if (self.CavalryLogger) { CavalryLogger.start_js(["5Uw56"]); }

__d("WhatsAppNumberVerificationResult",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INVALID_WHATSAPP_NUMBER:"INVALID_WHATSAPP_NUMBER",VERIFICATION_CODE_SEND_FAILURE:"VERIFICATION_CODE_SEND_FAILURE",VERIFICATION_CODE_SEND_SUCCESS:"VERIFICATION_CODE_SEND_SUCCESS",VERIFICATION_CODE_NOT_SENT:"VERIFICATION_CODE_NOT_SENT",VERIFIED:"VERIFIED",INVALID_VERIFICATION_CODE:"INVALID_VERIFICATION_CODE",VERIFICATION_CODE_SENT_AGAIN:"VERIFICATION_CODE_SENT_AGAIN"})}),null);
__d("XPresmaWhatsAppSendVerificationCodeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/presma\/whatsapp\/verification_code\/send\/",{})}),null);
__d("XPresmaWhatsAppVerificationCodeValidationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/presma\/whatsapp\/verification_code\/validate\/",{})}),null);
__d('PresmaWhatsAppEditSection.react',['cx','fbt','AsyncRequest','LayerFadeOnHide','Layout.react','Link.react','List.react','PresmaSettingsSaveCancelView.react','React','WhatsAppNumberVerificationResult','XPresmaWhatsAppSendVerificationCodeController','XPresmaWhatsAppVerificationCodeValidationController','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUIText.react','XUITextInput.react','XUIPopoverButton.react','XUISingleSelector.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').FillColumn,m=c('Layout.react').Column,n=c('XUISingleSelector.react').Option;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this.$PresmaWhatsAppEditSection1=function(q){this.setState({countryCode:q.value})}.bind(this);this.$PresmaWhatsAppEditSection5=function(q){this.setState({phoneNumber:q.target.value});if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').INVALID_WHATSAPP_NUMBER)this.setState({verificationStatus:''});}.bind(this);this.$PresmaWhatsAppEditSection8=function(q){this.setState({verificationStatus:''})}.bind(this);this.$PresmaWhatsAppEditSection9=function(){this.setState({disableSave:true});var q=c('XPresmaWhatsAppVerificationCodeValidationController').getURIBuilder().getURI(),r={page_token:this.props.pageToken,verification_code:this.state.verificationCode,whatsapp_number:'+'+this.props.waCountryCodeInfo[this.state.countryCode].phone_code+this.state.phoneNumber};new (c('AsyncRequest'))().setURI(q).setMethod('POST').setData(r).setHandler(function(s){this.setState({disableSave:false});var t=s.payload,u=t.verificationStatus;if(u===c('WhatsAppNumberVerificationResult').VERIFIED){this.props.onVerificationSuccess(t.formattedNumber,t.nonFormattedWhatsApp,this.props.waCountryCodeInfo[this.state.countryCode].iso_country,this.props.waCountryCodeInfo[this.state.countryCode].phone_code,true)}else this.setState({verificationStatus:u});}.bind(this)).send()}.bind(this);this.$PresmaWhatsAppEditSection11=function(q){var r=q.target;if(r instanceof HTMLInputElement){var s=r.value;if(!isNaN(s))this.setState({verificationCode:s});}}.bind(this);this.state={accountData:p.accountData,countryCode:this.props.accountData.initialCountryCode?this.props.accountData.initialCountryCode:'US',disableSave:false,phoneNumber:this.props.accountData.nonFormattedWhatsApp?this.props.accountData.nonFormattedWhatsApp:'',verificationCode:'',verificationStatus:''}}o.prototype.$PresmaWhatsAppEditSection2=function(p){return c('React').createElement(m,{className:"_3pwc"},c('React').createElement(c('XUIText.react'),{size:'small',weight:'bold'},c('React').createElement('span',{className:"_2ej-"},p)))};o.prototype.$PresmaWhatsAppEditSection3=function(){var p=Object.values(this.props.waCountryCodeInfo).map(function(q){return {name:q.iso_country+' (+'+q.phone_code+')',value:q.iso_alpha2.toString()}});return c('React').createElement('div',{className:"_2pip"},this.$PresmaWhatsAppEditSection2(i._("Country Code")),c('React').createElement(l,{className:"_3pwd"},c('React').createElement(c('XUISingleSelector.react'),{className:"_3pwg",maxheight:480,onChange:this.$PresmaWhatsAppEditSection1,size:'xlarge',value:this.state.countryCode,customButton:c('React').createElement(c('XUIPopoverButton.react'),{className:"_3pwg",size:'xlarge'}),disabled:false},p.map(function(q){return c('React').createElement(n,{value:q.value,key:q.value},q.name)}))))};o.prototype.$PresmaWhatsAppEditSection4=function(){return this.state.disableSave||isNaN(this.state.phoneNumber)||this.state.phoneNumber===''};o.prototype.$PresmaWhatsAppEditSection6=function(){if(isNaN(this.state.phoneNumber))return i._("Please enter a valid phone number.");if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').INVALID_WHATSAPP_NUMBER)return i._("This number isn't registered with WhatsApp. Please enter a new number.");if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SEND_FAILURE)return i._("We're having trouble sending your code. Please try again.");return null};o.prototype.$PresmaWhatsAppEditSection7=function(){return c('React').createElement('div',{className:"_2pip"},this.$PresmaWhatsAppEditSection2(i._("Phone Number")),c('React').createElement(l,{className:"_3pwd"},c('React').createElement(c('XUITextInput.react'),{className:"_3pwh",height:'tall',onChange:this.$PresmaWhatsAppEditSection5,value:this.state.phoneNumber,xuiError:this.$PresmaWhatsAppEditSection6(),xuiErrorPosition:'below',disabled:false})))};o.prototype.$PresmaWhatsAppEditSection10=function(){var p='+'+this.props.waCountryCodeInfo[this.state.countryCode].phone_code+' '+this.state.phoneNumber,q=c('React').createElement(c('Link.react'),{onClick:this.$PresmaWhatsAppEditSection8},i._("Change WhatsApp Number")),r=c('React').createElement('div',{className:"_16np"},i._("Enter the code in the WhatsApp message sent to {number}",[i.param('number',p)]),'\u00A0',q);if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').INVALID_VERIFICATION_CODE){r=c('React').createElement('div',{className:"_2ek0"},i._("The code is incorrect. Please try again or request the code again."))}else if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_NOT_SENT){r=c('React').createElement('div',{className:"_2ek0"},i._("Something went wrong. Make sure the number in your Page settings is the number you use on WhatsApp."))}else if(this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SENT_AGAIN)r=c('React').createElement('div',{className:"_16np"},i._("We sent the code again to {number}",[i.param('number',p)]),c('React').createElement('br',null),q);return c('React').createElement(c('XUIDialog.react'),{causalElementRef:function(){return this.refs.button}.bind(this),shown:this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SEND_SUCCESS||this.state.verificationStatus===c('WhatsAppNumberVerificationResult').INVALID_VERIFICATION_CODE||this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_NOT_SENT||this.state.verificationStatus===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SENT_AGAIN,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},titleID:'whatsapp_verification_code_dialog',width:445},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Confirm WhatsApp Number")),c('React').createElement(c('XUIDialogBody.react'),null,c('React').createElement(c('List.react'),{border:'none'},c('React').createElement('li',null,r),c('React').createElement('li',{className:"_16nq"},c('React').createElement(c('XUITextInput.react'),{name:'verification_code_input',onChange:this.$PresmaWhatsAppEditSection11,value:this.state.verificationCode})),c('React').createElement('li',{className:"_16nq"},c('React').createElement(c('Link.react'),{onClick:this.$PresmaWhatsAppEditSection12.bind(this,true)},i._("Send Code Again"))))),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.$PresmaWhatsAppEditSection8,use:'default'}),c('React').createElement(c('XUIButton.react'),{action:'confirm',disabled:this.state.disableSave||this.state.verificationCode==='',label:i._("Confirm"),onClick:this.$PresmaWhatsAppEditSection9,use:'default'})))};o.prototype.$PresmaWhatsAppEditSection12=function(p){this.setState({disableSave:true});var q=c('XPresmaWhatsAppSendVerificationCodeController').getURIBuilder().getURI(),r={page_token:this.props.pageToken,whatsapp_number:'+'+this.props.waCountryCodeInfo[this.state.countryCode].phone_code+this.state.phoneNumber};new (c('AsyncRequest'))().setURI(q).setMethod('POST').setData(r).setHandler(function(s){this.setState({disableSave:false});var t=s.payload.verification_status;if(p&&t===c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SEND_SUCCESS){this.setState({verificationStatus:c('WhatsAppNumberVerificationResult').VERIFICATION_CODE_SENT_AGAIN})}else if(t===c('WhatsAppNumberVerificationResult').VERIFIED){if(this.props.accountData.whatsappNumber){this.props.onVerificationSuccess(this.props.accountData.whatsappNumber,this.props.accountData.nonFormattedWhatsApp,this.props.waCountryCodeInfo[this.state.countryCode].iso_country,this.props.waCountryCodeInfo[this.state.countryCode].phone_code,false)}else this.props.toggleReadEditMode();}else this.setState({verificationStatus:t});}.bind(this)).send()};o.prototype.render=function(){return c('React').createElement('div',{className:"_1z3g"},this.$PresmaWhatsAppEditSection10(),c('React').createElement('div',{className:"_3pwi"},c('React').createElement('div',{className:"_3pwi"},this.$PresmaWhatsAppEditSection3(),this.$PresmaWhatsAppEditSection7()),c('React').createElement(c('PresmaSettingsSaveCancelView.react'),{className:"_1d7d",hideCancelButton:!this.state.accountData.nonFormattedWhatsApp,onCancel:this.props.toggleReadEditMode,onSave:this.$PresmaWhatsAppEditSection12.bind(this,false),saveLabel:i._("Next"),shouldDisableCancel:!this.state.accountData.whatsappNumber,shouldDisableSave:this.$PresmaWhatsAppEditSection4(),shouldShowSpinnerForSave:false})))};f.exports=o}),null);
__d('PresmaWhatsAppRemoveButtonSection.react',['PresmaSettingsActionButton.react','PresmaSettingsTitledSectionView.react','React'],(function a(b,c,d,e,f,g){'use strict';var h=function i(j){return c('React').createElement('div',{className:j.className},c('React').createElement(c('PresmaSettingsTitledSectionView.react'),{subtitle:j.subtitle,title:j.title,titleStyle:j.titleStyle},[c('React').createElement(c('PresmaSettingsActionButton.react'),{className:j.buttonClassName,key:'presmaWhatsAppRemoveButton',shouldHide:j.shouldHide?j.shouldHide:false,label:j.buttonLabel,isDisabled:j.isDisabled,onClick:j.actionCallback,use:j.use})]))};f.exports=h}),null);
__d("XPresmaWhatsAppPublicVisibilityController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/presma\/whatsapp\/public_visibility\/update\/",{})}),null);
__d("XPresmaWhatsAppRemoveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/presma\/whatsapp\/remove\/",{})}),null);
__d('PresmaWhatsAppReadOnlySection.react',['cx','fbt','AsyncRequest','LayerFadeOnHide','LeftFillRightFitLayout.react','PresmaSettingsActionButton.react','PresmaSettingFieldNonEdit.react','PresmaSettingsToggleSectionView.react','PresmaWhatsAppRemoveButtonSection.react','React','XPresmaWhatsAppPublicVisibilityController','XPresmaWhatsAppRemoveController','XUIButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XUINotice.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$PresmaWhatsAppReadOnlySection1=function(n){this.setState({isWhatsAppPublic:n},this.props.onTogglePublicVisibility(n));var o=c('XPresmaWhatsAppPublicVisibilityController').getURIBuilder().getURI(),p={page_token:this.props.pageToken,is_wa_public:n};new (c('AsyncRequest'))().setURI(o).setMethod('POST').setData(p).setHandler(function(q){this.setState({isWhatsAppPublic:q.payload.isWAPublic})}.bind(this)).send()}.bind(this);this.$PresmaWhatsAppReadOnlySection3=function(){var n=c('XPresmaWhatsAppRemoveController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(n).setMethod('POST').setData({page_token:this.props.pageToken}).setHandler(function(o){if(o.payload.isDeleted)this.props.onRemoveWhatsApp();}.bind(this)).send()}.bind(this);this.$PresmaWhatsAppReadOnlySection4=function(){this.setState({isRemoveDialogShown:!this.state.isRemoveDialogShown})}.bind(this);this.state={isRemoveDialogShown:false,isWhatsAppPublic:m.isWAPublic}}l.prototype.$PresmaWhatsAppReadOnlySection2=function(){return c('React').createElement('div',{className:"_45yg"},c('React').createElement(c('PresmaSettingsToggleSectionView.react'),{title:this.props.waPublicToggleData.waToggleTitle,subtitle:this.props.waPublicToggleData.waToggleSubtitle,isOn:this.state.isWhatsAppPublic,titleStyle:'normal',onToggle:this.$PresmaWhatsAppReadOnlySection1}))};l.prototype.$PresmaWhatsAppReadOnlySection5=function(){var m=i._("Are you sure you want to delete this number?");if(this.props.accountData.hasWhatsAppCTA)m=i._("Are you sure you want to delete this number? The WhatsApp button on your Page also will be removed.");return c('React').createElement(c('XUIDialog.react'),{causalElementRef:function(){return this.refs.button}.bind(this),shown:this.state.isRemoveDialogShown,behaviors:{LayerFadeOnHide:c('LayerFadeOnHide')},titleID:'whatsapp_remove_confirm_dialog',width:445},c('React').createElement(c('XUIDialogTitle.react'),null,i._("Delete WhatsApp Number")),c('React').createElement(c('XUIDialogBody.react'),null,m),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{action:'cancel',label:i._("Cancel"),onClick:this.$PresmaWhatsAppReadOnlySection4,use:'default'}),c('React').createElement(c('XUIButton.react'),{action:'confirm',label:i._("Delete Number"),onClick:this.$PresmaWhatsAppReadOnlySection3,use:'default'})))};l.prototype.$PresmaWhatsAppReadOnlySection6=function(){return c('React').createElement(c('PresmaWhatsAppRemoveButtonSection.react'),{actionButtonLabel:this.props.waRemoveData.waRemoveButtonLabel,actionCallback:this.$PresmaWhatsAppReadOnlySection4,buttonClassName:"_15u5",buttonLabel:this.props.waRemoveData.waRemoveButtonLabel,className:"_1z3c",isDisabled:false,title:this.props.waRemoveData.waRemoveTitle,subtitle:this.props.waRemoveData.waRemoveSubtitle,shouldHide:false,titleStyle:'normal',use:'default'})};l.prototype.$PresmaWhatsAppReadOnlySection7=function(){var m=this.props.accountData,n='',o='';if(m.waCountryCode&&m.waCountryName)n=m.waCountryName+' (+'+m.waCountryCode+')';if(m.whatsappNumber)o=m.whatsappNumber;return c('React').createElement(c('LeftFillRightFitLayout.react'),{className:"_1z3g"},c('React').createElement('div',{className:"_1z3f"},c('React').createElement(c('PresmaSettingFieldNonEdit.react'),{className:"_1z3h",key:'countryCode',label:i._("Country Code"),value:n}),c('React').createElement(c('PresmaSettingFieldNonEdit.react'),{className:"_1z3h",key:'phoneNumber',label:i._("Phone Number"),value:o})),c('React').createElement('div',{className:"_4x9v"},c('React').createElement(c('PresmaSettingsActionButton.react'),{key:'presmaWhatsAppEditButton',shouldHide:false,label:i._("Edit"),isDisabled:false,onClick:this.props.onEdit,use:'default'})))};l.prototype.$PresmaWhatsAppReadOnlySection8=function(){return c('React').createElement('div',{className:(this.props.showSuccessBanner?"_2ph_":'')+(!this.props.showSuccessBanner?' '+"_4s21":'')},c('React').createElement(c('XUINotice.react'),{use:'success'},i._("You've added your WhatsApp number to your Facebook Page.")))};l.prototype.render=function(){return c('React').createElement('div',null,this.$PresmaWhatsAppReadOnlySection5(),this.$PresmaWhatsAppReadOnlySection8(),this.$PresmaWhatsAppReadOnlySection7(),c('React').createElement('div',{className:"_1z3b"},this.$PresmaWhatsAppReadOnlySection2(),this.$PresmaWhatsAppReadOnlySection6()))};f.exports=l}),null);
__d('PresmaWhatsAppAccountSection.react',['PresmaWhatsAppEditSection.react','PresmaWhatsAppReadOnlySection.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$PresmaWhatsAppAccountSection1=function(){this.setState({accountData:{hasWhatsAppCTA:this.props.accountData.hasWhatsAppCTA,initialCountryCode:this.props.accountData.initialCountryCode,nonFormattedWhatsApp:null,whatsappNumber:null,waCountryCode:null,waCountryName:null},showSuccessBanner:false},this.$PresmaWhatsAppAccountSection2)}.bind(this);this.$PresmaWhatsAppAccountSection3=function(l){this.setState({isWAPublic:l})}.bind(this);this.$PresmaWhatsAppAccountSection2=function(){this.setState({editEnabled:!this.state.editEnabled})}.bind(this);this.$PresmaWhatsAppAccountSection5=function(l,m,n,o,p){var q=p?true:this.state.isWAPublic;this.setState({accountData:{hasWhatsAppCTA:this.props.accountData.hasWhatsAppCTA,initialCountryCode:this.props.accountData.initialCountryCode,nonFormattedWhatsApp:m,whatsappNumber:l,waCountryCode:o,waCountryName:n},showSuccessBanner:true,isWAPublic:q},this.$PresmaWhatsAppAccountSection2);setTimeout(function(){return this.setState({showSuccessBanner:false})}.bind(this),3000)}.bind(this);this.state={accountData:k.accountData,editEnabled:this.props.accountData.whatsappNumber===null,isWAPublic:this.props.waPublicToggleData.waToggleValue,showSuccessBanner:false}}j.prototype.$PresmaWhatsAppAccountSection4=function(){return c('React').createElement(c('PresmaWhatsAppReadOnlySection.react'),{accountData:this.state.accountData,isWAPublic:this.state.isWAPublic,onEdit:this.$PresmaWhatsAppAccountSection2,onRemoveWhatsApp:this.$PresmaWhatsAppAccountSection1,onTogglePublicVisibility:this.$PresmaWhatsAppAccountSection3,pageToken:this.props.pageToken,showSuccessBanner:this.state.showSuccessBanner,waPublicToggleData:this.props.waPublicToggleData,waRemoveData:this.props.waRemoveData})};j.prototype.$PresmaWhatsAppAccountSection6=function(){return c('React').createElement(c('PresmaWhatsAppEditSection.react'),{accountData:this.state.accountData,pageToken:this.props.pageToken,toggleReadEditMode:this.$PresmaWhatsAppAccountSection2,onVerificationSuccess:this.$PresmaWhatsAppAccountSection5,waCountryCodeInfo:this.props.waCountryCodeInfo})};j.prototype.render=function(){if(this.state.editEnabled){return this.$PresmaWhatsAppAccountSection6()}else return this.$PresmaWhatsAppAccountSection4();};f.exports=j}),null);