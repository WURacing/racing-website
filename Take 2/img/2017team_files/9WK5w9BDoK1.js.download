if (self.CavalryLogger) { CavalryLogger.start_js(["WOaqo"]); }

__d('BusinessActorUtils.brands',['UnicodeCJK'],(function a(b,c,d,e,f,g){'use strict';var h={getInitials:function i(j,k){var l=j.trim().charAt(0),m=k.trim().charAt(0),n=l+m;return !c('UnicodeCJK').hasIdeograph(n)?n.toUpperCase():m}};f.exports=h}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={}}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log()}delete this.$UFICommentLogger2[i]};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l]}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log()};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h()}),null);
__d('UFIRootRegistry',[],(function a(b,c,d,e,f,g){'use strict';var h={},i={},j={},k=[],l={registerController:function m(n,o,p,q){h[n]=q;i[p]=[].concat(i[p]||[],[o]);j[o]=p},registerSnowliftID:function m(n){k.push(n)},isSnowliftNode:function m(n){return k.indexOf(n)>=0},getInstanceIDFromFTEntIdentifier:function m(n){return i[n]||null},getFTEntIdentifierFromInstanceID:function m(n){return j[n]||null},cleanupInstance:function m(n){var o=j[n],p=i[o];if(p&&p.includes(n)){i[o]=p.filter(function(q){return q!=n});if(i[o].length==0)delete i[o];}delete j[n]},cleanupSnowliftNodes:function m(){k.forEach(function(n){return h[n]&&h[n]()});h={};k=[]}};f.exports=l}),null);
__d("UFIStoryActionType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANGE_ACCEPTED_ANSWER:"story_change_accepted_answer",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SHOW_COMMENTS:"story_show_comments",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",CHANGE_REACTION_FAILURE:"story_change_reaction_failure",CHANGE_REACTION_SUCCESS:"story_change_reaction_success",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"})}),null);
__d('UFIAcceptedAnswerStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER:return babelHelpers['extends']({},k,(m={},m[l.comment.ftentidentifier]=l.doAccept?{type:'Accepted',id:l.comment.id}:{type:'NoneAccepted'},m));default:return k;}};j.prototype.get=function(k,l){var m=this.getState()[k];if(m)return m;return l?{type:'Accepted',id:l}:{type:'NoneAccepted'}};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFICommentEditIDStore',['FluxReduceStore','UFIAddCommentActionType','UFICentralUpdates','UFICommentActionType','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);c('UFICentralUpdates').subscribe('actor-changed',function(l,m){c('UFIDispatcherBase').dispatch({type:'PRIVATE_ACTOR_CHANGED',instanceID:true,ftentidentifier:true})})}j.prototype.getInitialState=function(){return {}};j.prototype.getForInstance=function(k){return this.getState()[k]||null};j.prototype.reduce=function(k,l){var m;switch(l.type){case 'PRIVATE_ACTOR_CHANGED':return {};case c('UFIAddCommentActionType').CANCEL:case c('UFIAddCommentActionType').SUBMIT_EDIT:var n=k[l.instanceID],o=babelHelpers.objectWithoutProperties(k,[l.instanceID]);return o;case c('UFICommentActionType').EDIT:return babelHelpers['extends']({},k,(m={},m[l.instanceID]=l.comment.id,m));}return k};f.exports=new j(c('UFIDispatcherBase'))}),null);
__d("CommentApprovalsResponsibleUserAction",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({APPEALED:"APPEALED",SECURED_ACCOUNT:"SECURED_ACCOUNT"})}),null);
__d('UFIComments',['invariant','ClientIDs','CommentApprovalsResponsibleUserAction','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j={},k={};function l(ha){return ha in j?j[ha]:ha}function m(ha,ia){ha.forEach(function(ja){var ka=ja.ftentidentifier,la=c('UFIConstants').UFIPayloadSourceType,ma=ja.clientid,na=false,oa=babelHelpers['extends']({},ja);if(ma){delete oa.clientid;na=c('ClientIDs').isExistingClientID(ma);if(na&&j[ma]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ja.id).log();return}}if(ia===la.LIVE_SEND||ia===c('UFIConstants').UFIPayloadSourceType.STREAMING||ia===la.USER_ACTION||ia===la.ENDPOINT_ADD_COMMENT||ia===la.ENDPOINT_EDIT_COMMENT)oa.isunseen=true;if(ia===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ia===c('UFIConstants').UFIPayloadSourceType.STREAMING)oa.islive=true;if(ia===la.ENDPOINT_COMMENT_FETCH||ia===la.ENDPOINT_ID_COMMENT_FETCH)oa.fromfetch=true;if(na&&i[ma]){oa.ufiinstanceid=i[ma].ufiinstanceid;j[ma]=ja.id;k[ja.id]=ma;i[ja.id]=i[ma];delete i[ma];c('UFICentralUpdates').didUpdateComment(ma)}ga.setComment(ja.id,new (c('ImmutableObject'))(oa));c('UFICentralUpdates').didUpdateComment(ja.id);c('UFICentralUpdates').didUpdateFeedback(ka)})}function n(ha,ia){for(var ja=0;ja<ha.length;ja++){var ka=ha[ja];switch(ka.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ga.getComment(ka.entidentifier))o(ka.clientid,ka.entidentifier,ka.hasviewerliked,ka.likecount,ka.reactiondata,ia);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:o(ka.clientid,ka.commentid,ka.viewerliked,ka.likecount,ka.reactiondata,ia);break;case c('UFIConstants').UFIActionType.MUTE_MEMBER:p(ka);break;case c('UFIConstants').UFIActionType.REACTION:if(ga.getComment(ka.entidentifier))q(ka.entidentifier,ka);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:q(ka.commentid,ka);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:u(ka);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:v(ka);break;case c('UFIConstants').UFIActionType.CHANGE_ACCEPTED_ANSWER:w(ka);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:x(ka);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:y(ka);break;case c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM:z(ka);break;case c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM:aa(ka);break;case c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT:ba(ka);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:ca(ka);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:s(ka);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:r(ka);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:ea(ka);break;}}}function o(ha,ia,ja,ka,la,ma){var na=ga.getComment(ia);if(na){var oa={},pa=ha&&c('ClientIDs').isExistingClientID(ha);if(!pa){oa.hasviewerliked=ja;oa.likecount=ka;if(la){oa.reactioncount=la.reactioncount;oa.reactioncountmap=la.reactioncountmap;oa.reactioncountreduced=la.reactioncountreduced;oa.viewerreaction=la.viewerreaction}}if(ma===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ma===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(Boolean(pa)).setCommentID(ia).log();oa.likeconfirmhash=c('randomInt')(0,1024);fa(ia,oa)}}function p(ha){for(var ia in i){var ja=i[ia];if(ja.author===ha.authorid){var ka={};ka.ismuted=ha.shouldmute;fa(ia,ka)}}}function q(ha,ia){var ja=ga.getComment(ha);if(ja){var ka={};if(ia.clientid&&c('ClientIDs').isExistingClientID(ia.clientid)&&ia.viewerreaction!==ja.viewerreaction)return;ka.hasviewerliked=ia.hasviewerliked;ka.likecount=ia.likecount;ka.reactioncount=ia.reactioncount;ka.reactioncountmap=ia.reactioncountmap;ka.reactioncountreduced=ia.reactioncountreduced;ka.viewerreaction=ia.viewerreaction;fa(ha,ka)}}function r(ha){var ia=ga.getComment(ha.commentid);if(ia&&ha.hasviewerliked===ia.hasviewerliked){var ja={likecount:ha.likecount,likeconfirmhash:c('randomInt')(0,1024)};fa(ha.commentid,ja)}}function s(ha){var ia=ha.commentid,ja=ga.getComment(ia);if(ja){var ka={translationdata:ha.translationdata};fa(ia,ka)}}function t(ha){var ia={reportLink:ha.reportLink,commenterIsFOF:ha.commenterIsFOF,userIsMinor:ha.userIsMinor,giveFeedbackLink:ha.giveFeedbackLink,reportGroupAdminLink:ha.reportGroupAdminLink};return ia}function u(ha){var ia=ga.getComment(ha.commentid);if(ia)da(ia,c('UFIConstants').UFIStatus.DELETED);}function v(ha){var ia=ga.getComment(ha.commentid);if(ia&&ia.status!==c('UFIConstants').UFIStatus.DELETED)da(ia,c('UFIConstants').UFIStatus.LIVE_DELETED);}function w(ha){fa(ha.commentid,{postacceptedanswer:ha.isaccepted?ha.commentid:null})}function x(ha){fa(ha.commentid,{attachment:null})}function y(ha){var ia=ga.getComment(ha.commentid),ja=ha.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;if(ia)da(ia,ja);}function z(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{needsApproval:false,isApproved:true});}function aa(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').APPEALED,canAppeal:false,canSecure:false});}function ba(ha){var ia=ga.getComment(ha.commentid);if(ia)fa(ia.id,{appealStatus:c('CommentApprovalsResponsibleUserAction').SECURED_ACCOUNT,canAppeal:false,canSecure:false});}function ca(ha){fa(ha.commentid,t(ha))}function da(ha,ia){fa(ha.id,{priorstatus:ha.status,status:ia})}function ea(ha){var ia=ga.getComment(ha.commentid);if(ia){var ja={constituentTitle:ha.constituentTitle,hasConstituentBadge:ha.hasConstituentBadge};fa(ha.commentid,ja)}}function fa(ha,ia){var ja=ga.getComment(ha)||new (c('ImmutableObject'))({});ga.setComment(ha,c('ImmutableObject').set(ja,ia));c('UFICentralUpdates').didUpdateComment(ja.id);c('UFICentralUpdates').didUpdateFeedback(ja.ftentidentifier)}var ga={getRenderKey:function ha(ia){return 'comment'+(ia in k?k[ia]:ia)},getComment:function ha(ia){if(ia===c('UFIConstants').unavailableCommentKey)return null;return i[l(ia)]},setComment:function ha(ia,ja){ja instanceof c('ImmutableObject')||h(0);i[l(ia)]=ja},resetComments:function ha(ia){for(var ja in ia)delete i[l(ja)];},getCommentsForFTEntIdentifier:function ha(ia){var ja=[];for(var ka in i){var la=i[ka];if(la.ftentidentifier==ia)ja.push(la);}return ja}};c('UFICentralUpdates').subscribe('update-comments',function(ha,ia){if(ia.comments&&ia.comments.length)m(ia.comments,ia.payloadsource);if(ia.pinnedcomments&&ia.pinnedcomments.length)m(ia.pinnedcomments,ia.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ha,ia){if(ia.actions&&ia.actions.length)n(ia.actions,ia.payloadsource);});f.exports=ga}),22);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIComments','UFIDispatcherBase','UFIFeedbackTargets','UFIStoryActionType','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIStoryActionType').LIVE_PIN_COMMENT:case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l)};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null}return l.commentID||null};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(!l)return null;var m=c('UFIComments').getComment(l);return m?m.author||null:null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){'use strict';var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFICommentActionType','UFIComments','UFIDispatcherBase','UFIInstanceActionType','UFILivePinnedCommentStore','UFIRootRegistry','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(p){var q=arguments.length<=1||arguments[1]===undefined?null:arguments[1],r=arguments.length<=2||arguments[2]===undefined?null:arguments[2];q===null&&r===null||q!==null&&r!==null||h(0);if(q)return p+'-'+q+(r?'-P':'');return p}function l(p,q){return p===q||p.startsWith(q+'-')}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[]}function n(p){return {instanceid:p}}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {}};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.comment.fbid,r.isLivePinnedComment):k(q.instanceid);if(Object.prototype.hasOwnProperty.call(p,s))return p[s];return c('UFIVisibility').HIDDEN};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r)}.bind(this))};o.prototype.reduce=function(p,q){var r;switch(q.type){case c('UFICommentActionType').UNMOUNTED:var s=babelHelpers['extends']({},p);delete s[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)];return s;case c('UFICommentActionType').CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.renderedComment.comment.fbid,q.renderedComment.isLivePinnedComment)]=q.visibility,r));case c('UFIInstanceActionType').CHANGE_VISIBILITY:var t=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),u=c('UFIComments').getCommentsForFTEntIdentifier(t);q.type===c('UFIInstanceActionType').CHANGE_VISIBILITY||h(0);var v=q.visibility;if(u){var w,x=u.reduce(function(ca,da){ca[k(q.instanceID,da.fbid,da.fbid?false:null)]=v;return ca},{});if(t){var y=c('UFILivePinnedCommentStore').getPinnedCommentID(t);if(y){var z=c('UFIComments').getComment(y);if(z)x[k(q.instanceID,z.fbid,true)]=v;}}return babelHelpers['extends']({},p,(w={},w[k(q.instanceID)]=q.visibility,w),x)}case c('UFIInstanceActionType').REMOVE:var aa=q.instanceID,ba=k(aa);return c('filterObject')(p,function(ca,da){return da!==ba&&!l(da,aa)});}return p};function o(){i.apply(this,arguments)}f.exports=new o(c('UFIDispatcherBase'))}),null);
__d('UFIKeyValueStore',['FluxReduceStore','abstractMethod'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.getValueFor=function(k){return this.getState()[k]||null};j.prototype.getStateKey=function(k){return k.instanceID};j.prototype.getStateValue=function(k){return c('abstractMethod')('UFIKeyValueStore','getStateValue')};j.prototype.reduce=function(k,l){var m=this.getStateKey(l),n=this.getStateValue(l);if(n!==null){var o;return babelHelpers['extends']({},k,(o={},o[m]=n,o))}return k};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('UFICommercialBreakStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK:return k.inCommercial;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIComposerIsTypingStore',['UFIAddCommentActionType','UFIDispatcherBase','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getStateKey=function(k){return k.ftentidentifier};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').SUBMIT_EDIT:return false;case c('UFIAddCommentActionType').SUBMIT_NEW:return false;case c('UFIAddCommentActionType').CHANGE_CONTENT:var l=k.text.trim().length;return l>0;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIInteractionStore',['UFIAddCommentActionType','UFICommentActionType','UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIAddCommentActionType').CHANGE_CONTENT:case c('UFIAddCommentActionType').SUBMIT_EDIT:case c('UFIAddCommentActionType').SUBMIT_NEW:case c('UFICommentActionType').CHANGE_REACTION:case c('UFICommentActionType').EDIT:case c('UFICommentActionType').REMOVE:case c('UFICommentActionType').TOGGLE_LIKE:case c('UFICommentActionType').TOGGLE_MARK_AS_SPAM:case c('UFICommentActionType').TRANSLATE:case c('UFIInstanceActionType').CHANGE_ORDER_MODE:case c('UFIInstanceActionType').TOGGLE_COMMENTS:case c('UFIStoryActionType').PAGE_IN_COMMENTS:case c('UFIStoryActionType').SHOW_REPLIES:case c('UFIStoryActionType').TOGGLE_REPLIES:return true;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIStoryActionType').FRIEND_TYPING:return 'friend';case c('UFIStoryActionType').SOMEONE_TYPING:return 'someone';case c('UFIStoryActionType').TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {}};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n))}return k};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend'};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFICentralUpdatesLocalCommentAdapter',['ClientIDs','FeedbackPayloadSourceType','UFICentralUpdates','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i={},j=(h={},h[c('FeedbackPayloadSourceType').USER_ACTION]=l,h[c('FeedbackPayloadSourceType').ENDPOINT_ADD_COMMENT]=m,h);function k(){return c('UFICentralUpdates').subscribe('update-comments',function(p,q){if(q.comments){var r=j[q.payloadsource];if(r)q.comments.forEach(r);}})}function l(p){if(!c('ClientIDs').isExistingClientID(p.id))return;i[p.id]=p.ufiinstanceid;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_ADDED_COMMENT',instanceID:p.ufiinstanceid,ftentidentifier:p.ftentidentifier,clientID:p.id})}function m(p){if(!c('ClientIDs').isExistingClientID(p.clientid))return;var q=i[p.clientid];delete i[p.clientid];if(!q)return;c('UFIDispatcherBase').dispatch({type:'CENTRALUPDATES_SAVED_COMMENT',instanceID:q,ftentidentifier:p.ftentidentifier,clientID:p.clientid,commentID:p.id})}var n=void 0,o={subscribeOnce:function p(){if(!n){n=k();return n}return null}};f.exports=o}),null);
__d('UFILocallyComposedCommentStore',['invariant','ClientIDs','FluxReduceStore','UFIAddCommentActionType','UFICentralUpdatesLocalCommentAdapter','UFIDispatcherBase','setByPath'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;function k(m){return babelHelpers['extends']({},m)}i=babelHelpers.inherits(l,c('FluxReduceStore'));j=i&&i.prototype;function l(m){j.constructor.call(this,m);var n=c('UFICentralUpdatesLocalCommentAdapter').subscribeOnce()}l.prototype.getInitialState=function(){return {}};l.prototype.getStateForInstance=function(m){return m?this.getState()[m]||{}:{}};l.prototype.reduce=function(m,n){switch(n.type){case 'CENTRALUPDATES_ADDED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.clientID],true);return m;case 'CENTRALUPDATES_SAVED_COMMENT':c('ClientIDs').isExistingClientID(n.clientID)||h(0);m=k(m);c('setByPath')(m,[n.instanceID,n.commentID],true);delete m[n.instanceID][n.clientID];return m;case c('UFIAddCommentActionType').SUBMIT_EDIT:m=k(m);c('setByPath')(m,[n.instanceID,n.comment.id],true);return m;}return m};f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFIPlayLiveVODHighlightsStore',['UFIDispatcherBase','UFIInstanceActionType','UFIKeyValueStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIKeyValueStore'));i=h&&h.prototype;j.prototype.getValueFor=function(k){return !!i.getValueFor.call(this,k)};j.prototype.getStateValue=function(k){switch(k.type){case c('UFIInstanceActionType').PLAY_LIVE_VOD_HIGHLIGHTS:return k.playingLiveVODHighlights;}return null};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIActionTypes',['UFIInstanceActionType','UFIStoryActionType','UFIAddCommentActionType','UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={INSTANCE:c('UFIInstanceActionType'),STORY:c('UFIStoryActionType'),ADD_COMMENT:c('UFIAddCommentActionType'),COMMENT:c('UFICommentActionType')};f.exports=h}),null);
__d('UFIReactionPendingRequestsStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(o){return o+'-comment'}function k(o){return o+'-story'}function l(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)+1,q))}function m(o,p){var q;return babelHelpers['extends']({},o,(q={},q[p]=(o[p]||0)-1,q))}h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {}};n.prototype.reduce=function(o,p){switch(p.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:return l(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION:return l(o,j(p.fbid));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:case c('UFIActionTypes').STORY.CHANGE_REACTION_FAILURE:return m(o,k(p.ftentidentifier));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_FAILURE:case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return m(o,j(p.fbid));}return o};n.prototype.getPendingRequestsForComment=function(o){return this.getState()[j(o)]||0};n.prototype.getPendingRequests=function(o){return this.getState()[k(o)]||0};function n(){h.apply(this,arguments)}f.exports=new n(c('UFIDispatcherBase'))}),null);
__d('UFIReactionSyncStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(m){return m+'-comment'}function k(m){return m+'-story'}h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return {}};l.prototype.reduce=function(m,n){var o,p,q;switch(n.type){case c('UFIActionTypes').INSTANCE.INIT:var r=n.payload,s=r.feedbacktarget?r.feedbacktarget:r.feedbacktargets&&r.feedbacktargets[0];if(!s)return m;var t=n.payload.comments.reduce(function(u,v){u[j(v.fbid)]=v.viewerreaction;return u},{});return babelHelpers['extends']({},m,t,(o={},o[k(n.ftentidentifier)]=s.viewerreaction,o));case c('UFIActionTypes').STORY.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(p={},p[k(n.ftentidentifier)]=n.reactionType,p));case c('UFIActionTypes').COMMENT.CHANGE_REACTION_SUCCESS:return babelHelpers['extends']({},m,(q={},q[j(n.fbid)]=n.reactionType,q));default:return m;}};l.prototype.getLastKnownCommentReaction=function(m){return this.getState()[j(m)]};l.prototype.getLastKnownReaction=function(m){return this.getState()[k(m)]};function l(){h.apply(this,arguments)}f.exports=new l(c('UFIDispatcherBase'))}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFIAcceptedAnswerStore','UFICommentEditIDStore','UFICommentVisibilityStore','UFICommercialBreakStore','UFIComposerIsTypingStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIReactionPendingRequestsStore','UFIReactionSyncStore','UFISpamStore','UFIPlayLiveVODHighlightsStore'],(function a(b,c,d,e,f,g){'use strict';c('UFIFeedbackStore');c('UFIAcceptedAnswerStore');c('UFICommentEditIDStore');c('UFICommentVisibilityStore');c('UFICommercialBreakStore');c('UFIComposerIsTypingStore');c('UFIFeedbackStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFILocallyComposedCommentStore');c('UFIOrderingModeStore');c('UFIReactionPendingRequestsStore');c('UFIReactionSyncStore');c('UFISpamStore');c('UFIPlayLiveVODHighlightsStore');f.exports=c('UFIDispatcherBase')}),null);
__d('UFICommentAction',['UFICommentActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function i(j,k,l,m){return {type:c('UFICommentActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l,target:m}},changeReactionSuccess:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},changeReactionFailure:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,reactionType:l}},mounted:function i(j,k){return {type:c('UFICommentActionType').MOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},unmounted:function i(j,k){return {type:c('UFICommentActionType').UNMOUNTED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j}},changeVisibility:function i(j,k,l){return {type:c('UFICommentActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.comment.fbid,renderedComment:k,contextArgs:j,visibility:l}},edit:function i(j,k){return {type:c('UFICommentActionType').EDIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},remove:function i(j,k,l,m){return {type:c('UFICommentActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},delete_comment_and_remove_commenter:function i(j,k,l,m){return {type:c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},mute_member:function i(j,k,l,m){return {type:c('UFICommentActionType').MUTE_MEMBER,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l,onConfirm:m}},toggle_text_delights:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_TEXT_DELIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},removePreview:function i(j,k,l){return {type:c('UFICommentActionType').REMOVE_PREVIEW,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},toggleLike:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_LIKE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,like:!k.hasviewerliked,target:l}},translate:function i(j,k,l){return {type:c('UFICommentActionType').TRANSLATE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,trigger:l}},markAsSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:true,target:l}},markAsNotSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_spam:false,target:l}},inlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:true,ownerid:m,target:l}},undoInlineBan:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_INLINE_BAN,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,is_banned:false,ownerid:m,target:l}},embed:function i(j,k){return {type:c('UFICommentActionType').EMBED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},manageConstituentBadge:function i(j,k){return {type:c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k}},keepSpam:function i(j,k,l){return {type:c('UFICommentActionType').TOGGLE_KEEP_SPAM,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,fbid:k.fbid,comment:k,target:l}},appealSpam:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_APPEAL_SPAM,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}},secureAccount:function i(j,k,l,m){return {type:c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,instanceID:j.instanceid,ftentidentifier:k.fbid,fbid:k.fbid,comment:k,target:l,feedback:m}}};f.exports=h}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){var h={getReactionData:function i(j,k,l,m){k=parseInt(k,10);var n=!!k,o=j.reactorids?j.reactorids.slice(0):[],p=o.indexOf(l),q=0;if(n){if(p<0){l&&o.unshift(l);q=1}}else if(p>-1){o.splice(p,1);q=-1}var r=Math.max(j.reactioncount+q,0),s=j.reactioncountreduced;if(s&&!isNaN(s))if(m){s=m(r)}else s=r.toString();var t=j.reactioncountmap||{},u=void 0,v=j.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[k]){t[k]['default']=(t[k]['default']||0)+1;u=t[k].reduced;if(u&&!isNaN(u))t[k].reduced=t[k]['default'].toString();}var w=j.userreactions;if(!w||Array.isArray(w))w={};if(l)if(n){w[l]=k}else delete w[l];var x=null;if(j.reactionsentences){var y=!(v&&k);x={current:j.reactionsentences[y?'alternate':'current'],alternate:j.reactionsentences[y?'current':'alternate']}}return {reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:x,reactorids:o,userreactions:w,viewerreaction:k}},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count}}return k}};f.exports=h}),null);
__d('UFIStoryAction',['UFIStoryActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeAcceptedAnswer:function i(j,k,l){return {type:c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,instanceID:j.instanceid,ftentidentifier:k.ftentidentifier,comment:k,doAccept:l}},commentsArrived:function i(j,k,l,m){return {type:c('UFIStoryActionType').COMMENTS_ARRIVED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,newOffset:k,newLength:l,source:m}},pageInComments:function i(j,k,l,m){return {type:c('UFIStoryActionType').PAGE_IN_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,direction:l,nextRange:m}},showComments:function i(j){return {type:c('UFIStoryActionType').SHOW_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},showReplies:function i(j,k,l){return {type:c('UFIStoryActionType').SHOW_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,initiatorComment:l}},spamFetched:function i(j,k,l,m){return {type:c('UFIStoryActionType').SPAM_FETCHED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,viewas:k,commentIDs:l,parentCommentID:m}},changeReaction:function i(j,k,l){var m=arguments.length<=3||arguments[3]===undefined?null:arguments[3],n=arguments.length<=4||arguments[4]===undefined?null:arguments[4];return {type:c('UFIStoryActionType').CHANGE_REACTION,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,contextArgs:j,reactionType:k,target:l,sphericalYaw:m,sphericalPitch:n}},changeReactionSuccess:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_SUCCESS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},changeReactionFailure:function i(j,k){return {type:c('UFIStoryActionType').CHANGE_REACTION_FAILURE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,reactionType:k}},toggleReplies:function i(j,k){return {type:c('UFIStoryActionType').TOGGLE_REPLIES,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k}},friendTyping:function i(j){return {type:c('UFIStoryActionType').FRIEND_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},someoneTyping:function i(j){return {type:c('UFIStoryActionType').SOMEONE_TYPING,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},typingStopped:function i(j){return {type:c('UFIStoryActionType').TYPING_STOPPED,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},pinComment:function i(j,k){var l=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:c('UFIStoryActionType').LIVE_PIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:k,pinEventID:l}},unpinComment:function i(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:c('UFIStoryActionType').LIVE_UNPIN_COMMENT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,commentID:null,pinEventID:k}}};f.exports=h}),null);
__d('UFIUserActionUtils',['Nectar','collectDataAttributes'],(function a(b,c,d,e,f,g){var h={trackingData:function i(j){if(!j)return {ft:{}};var k={ft:c('collectDataAttributes')(j,['ft']).ft};c('Nectar').addModuleData(k,j);return k}};f.exports=h}),null);
__d('UFIVideoPlayerRegistry',['EventEmitter','Map','Set','VideoPlayerReason','ViewportBounds','destroyOnUnload','getOrCreateDOMID'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('Map'))(),j=new (c('Map'))(),k=new (c('Map'))(),l=new (c('Map'))(),m=new (c('Set'))();c('destroyOnUnload')(function(){h.removeAllListeners();i.clear();j.clear();k.clear();l.clear();m.clear()});function n(q){var r=q,s=[];while(r){s.unshift(r);r=r.parentElement}return s}function o(q,r){var s=n(q),t=null,u=null;r.forEach(function(v){var w=v[0],x=v[1],y=n(w);for(var z=0;z<s.length;++z)if(s[z]!==y[z]){if(u===null||z>u){u=z;t=x}break}});return t}var p={registerVideoPlayerController:function q(r){var s=r.getVideoID(),t=l.get(s);if(t){t.push(r)}else{t=[r];l.set(s,t);k['delete'](s)}m.forEach(function(v){return v()});var u=i.get(s);if(!u)return;u.forEach(function(v){return this._associateUFIController(v,s)}.bind(this))},addOnRegisterListener:function q(r){m.add(r)},removeOnRegisterListener:function q(r){m['delete'](r)},getAvailableVideoPlayerController:function q(r){return j.get(r)},seekAvailableVideoPlayerController:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;if(['ready','playing','paused','finished'].includes(t.getState())){t.pause(c('VideoPlayerReason').SEEK);t.seek(s);t.play(c('VideoPlayerReason').SEEK)}},scrollToAvailableVideo:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return;var t=c('ViewportBounds').getElementPosition(s.getRootNode());window.scroll(0,t.y)},setAvailableVideoPlayerControllerSphericalViewport:function q(r,s){var t=p.getAvailableVideoPlayerController(r);if(!t)return;t.emit('SphericalVideoViewportTagComment/click',s)},getAvailableVideoPlayerControllerForElement:function q(r,s){if(!r)return null;var t=k.get(s)||new (c('Map'))(),u=c('getOrCreateDOMID')(r),v=t.get(u)||this._findVideoPlayerControllerForElement(r,s);t.set(u,v);k.set(s,t);return v},getAvailableVideoPlayerControllerTimeForElement:function q(r,s){if(!r)return null;var t=p.getAvailableVideoPlayerControllerForElement(r,s);if(!t)return null;var u=t.getCurrentTimePosition();if(u>=0)return Math.floor(u);return null},getAvailableVideoPlayerControllerTime:function q(r){var s=p.getAvailableVideoPlayerController(r);if(!s)return null;var t=s.getCurrentTimePosition();if(t>=0)return Math.floor(t);return null},registerUFIController:function q(r,s,t){var u=r.getInstanceID(),v=r.getFluentContentToken();if(!v)return;var w=i.get(v);if(w){w.push(r)}else{w=[r];i.set(v,w)}h.addListener(u+'/register',s);h.addListener(u+'/unregister',t);this._associateUFIController(r,v)},_findVideoPlayerControllerForElement:function q(r,s){var t=l.get(s);if(!t)return null;if(t.length===1)return t[0];return o(r,t.filter(function(u){return !u.isState('destroyed')}).map(function(u){return [u.getRootNode(),u]}))},_associateUFIController:function q(r,s){var t=r.getInstanceID(),u=this._findVideoPlayerControllerForElement(r.getRootNode(),s);if(!u||u.isState('destroyed'))return;var v=j.get(t);if(v){if(!v.isState('destroyed')&&c('getOrCreateDOMID')(v.getRootNode())===c('getOrCreateDOMID')(u.getRootNode()))return;h.emit(t+'/unregister')}j.set(t,u);h.emit(t+'/register',u)}};f.exports=p}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}})}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},is_inline:{type:"Bool",defaultValue:false},is_comment:{type:"Bool",defaultValue:false},is_permalink:{type:"Bool",defaultValue:false},action_source:{type:"String"},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}})}),null);
__d('UFIReactionUserActions',['ActorURI','AsyncResponse','ChannelClientID','ClientIDs','MercuryServerDispatcher','NumberFormat','QE2Logger','UFICentralUpdates','UFICommentAction','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionPendingRequestsStore','UFIReactionsUtils','UFIReactionSyncStore','UFIReactionTypes','UFISharedDispatcher','UFIStoryAction','UFIUserActionUtils','UFIVideoPlayerRegistry','XUFICommentReactionController','XUFIReactionController','emptyFunction','ifRequired','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h={changeReaction:function z(aa,ba,ca,da){var ea=arguments.length<=4||arguments[4]===undefined?null:arguments[4],fa=arguments.length<=5||arguments[5]===undefined?null:arguments[5];c('UFIFeedbackTargets').getFeedbackTarget(aa,function(ga){var ha,ia=w(ga,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ia});var ja=c('UFIUserActionUtils').trackingData(da),ka={};ka[c('ActorURI').PARAMETER_ACTOR]=ga.actorforpost;var la=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:aa,reaction_type:ba,root_id:ca.rootid,session_id:c('ChannelClientID').getID(),source:ca.source,feedback_referrer:ca.feedbackReferrer,instance_id:ca.instanceid},ka,ja);if(ca.fluentContentToken)(function(){var ma=ca.fluentContentToken,na=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(da,ma);if(na&&na.isSpherical())la.video_playback_timestamp=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(ca.isLiveVOD){la.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma)}else if(ca.islivestreaming)la.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(da,ma);if(na&&na.isSpherical())c('ifRequired')('SphericalViewportControlStore',function(oa){var pa=oa.getOrientation(na.getVideoPlayerID());if(pa)if(ea!==null&&fa!==null){la.spherical_yaw=ea;la.spherical_pitch=fa}else{la.spherical_pitch=Math.round(pa.pitch);la.spherical_yaw=Math.round(pa.yaw)}},c('emptyFunction')());})();c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),la)})},changeCommentReaction:function z(aa,ba,ca,da){var ea=c('UFIComments').getComment(aa);if(ea&&ea.__typename==='saved'&&ea.viewerreaction!=ba)c('UFIFeedbackTargets').getFeedbackTarget(ea.ftentidentifier,function(fa){var ga=c('UFIUserActionUtils').trackingData(da),ha=v(ea,fa,ba);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ha});var ia={};ia[c('ActorURI').PARAMETER_ACTOR]=fa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:aa,legacy_id:ea.legacyid,reaction_type:ba,ft_ent_identifier:ea.ftentidentifier,source:ca.source,instance_id:ca.instanceid,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ga,ia))});}},i={},j=c('XUFIReactionController').getURIBuilder().getURI();i[j]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r,handler:q};var k=c('XUFICommentReactionController').getURIBuilder().getURI();i[k]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,batch_if:l,batch_function:m,error_handler:u,handler:t};c('MercuryServerDispatcher').registerEndpoints(i);function l(z,aa){return z&&z.ft_ent_identifier==aa.ft_ent_identifier&&z.comment_id==aa.comment_id}function m(z,aa){return aa}var n='feedback_reactions_www_rollback_universe';function o(){c('QE2Logger').logExposureForUser(n)}function p(z,aa){var ba=c('UFIReactionPendingRequestsStore').getPendingRequests(z);if(ba>0)return;var ca=c('UFIReactionSyncStore').getLastKnownReaction(z);if(aa===ca)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(da){var ea=w(da,ca);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ea})})}function q(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type;c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},da));c('setImmediate')(function(){return p(ca,da)})}function r(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type;o();var da=c('UFIConfig').reactionsHasReactionsRollback,ea=c('UFIConfig').reactionsHasReactionsRetry;if(ea&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}c('UFISharedDispatcher').dispatch(c('UFIStoryAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},ca));if(da)c('setImmediate')(function(){return p(ba,ca)});c('AsyncResponse').defaultErrorHandler(z)}function s(z,aa,ba){var ca=c('UFIReactionPendingRequestsStore').getPendingRequestsForComment(aa.fbid);if(ca>0)return;var da=c('UFIReactionSyncStore').getLastKnownCommentReaction(aa.fbid);if(ba===da)return;c('UFIFeedbackTargets').getFeedbackTarget(z,function(ea){var fa=v(aa,ea,da);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:fa})})}function t(z,aa){var ba=aa.data,ca=ba.ft_ent_identifier,da=ba.reaction_type,ea=c('UFIComments').getComment(ba.comment_id);if(!ea||ea.__typename!=='saved')return;c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionSuccess({instanceid:ba.instance_id,ftentidentifier:ca},ea,da));c('setImmediate')(function(){return s(ca,ea,da)})}function u(z){var aa=z.request.data,ba=aa.ft_ent_identifier,ca=aa.reaction_type,da=c('UFIComments').getComment(aa.comment_id);if(!da)return;o();var ea=c('UFIConfig').reactionsHasCommentReactionsRollback,fa=c('UFIConfig').reactionsHasCommentReactionsRetry;if(fa&&!aa.retry_attempt){c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({},aa,{retry_attempt:1}));return}if(da&&da.__typename==='saved'){c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeReactionFailure({instanceid:aa.instance_id,ftentidentifier:ba},da,ca));if(ea)c('setImmediate')(function(){return s(ba,da,ca)});}c('AsyncResponse').defaultErrorHandler(z)}function v(z,aa,ba){var ca=z.id,da=[y(z,ba,ca,aa.supportedreactions||[],aa.actorforpost)],ea=ba===c('UFIReactionTypes').LIKE;if(aa.hasviewerliked!==ea){var fa=ea?1:-1;da.push({commentid:ca,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ea,likecount:(z.likecount||0)+fa})}return da}function w(z,aa){var ba=[x(z,aa)],ca=aa!==c('UFIReactionTypes').NONE;if(z.hasviewerliked!==ca){var da=ca?1:-1;ba.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:z.actorforpost,hasviewerliked:ca,likecount:(z.likecount||0)+da,entidentifier:z.entidentifier,likesentences:{current:z.likesentences.alternate,alternate:z.likesentences.current}})}return ba}function x(z,aa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:z.actorforpost,entidentifier:z.entidentifier},c('UFIReactionsUtils').getReactionData(z,aa,z.actorforpost,c('NumberFormat').formatInteger))}function y(z,aa,ba,ca,da){var ea={};for(var fa=0;fa<ca.length;fa++){var ga=ca[fa],ha=z.reactioncountmap?z.reactioncountmap[ga]:null;ea[ga]={'default':ha?ha['default']:0,reduced:ha?ha.reduced:'0'}}var ia=c('UFIReactionsUtils').getReactionData({viewerreaction:z.viewerreaction,reactioncount:z.reactioncount,reactioncountreduced:z.reactioncountreduced,reactioncountmap:ea,reactorids:z.viewerreaction?[da]:[]},aa,da);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:ba,hasviewerliked:!!aa,likecount:ia.reactioncountmap[1]['default'],reactioncount:ia.reactioncount,reactioncountmap:ia.reactioncountmap,reactioncountreduced:ia.reactioncountreduced,viewerreaction:aa}}f.exports=h}),null);
__d("CommentPostedLiveState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"Live",ON_DEMAND:"OnDemand"})}),null);
__d('UFIPagedCommentListImpl',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets'],(function a(b,c,d,e,f,g){'use strict';function h(i){this.actorID=null;this.basePermalink=null;this.commentPermalinks=Object.create(null);this.count=0;this.dataSource=new (c('KeyedCallbackManager'))();this.deletedComments=Object.create(null);this.deletedCount=0;this.lastRequestedLength=0;this.lastRequestedOffset=0;this.feedbackTargetID=i;c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(j){this.actorID=j.actorforpost;this.basePermalink=j.permalink}.bind(this))}h.prototype.setClientHasAll=function(i){};h.prototype.addOrUpdateComment=function(i){if(i.__typename==='local'){this.$UFIPagedCommentListImpl1(i.id)}else this.$UFIPagedCommentListImpl2(i.id,i.clientid,i.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.$UFIPagedCommentListImpl1=function(i){this.dataSource.setResource(this.count,i);this.count++};h.prototype.$UFIPagedCommentListImpl2=function(i,j,k){var l=j&&c('ClientIDs').isExistingClientID(j),m=this.dataSource.getAllResources(),n={};for(var o in m){var p=m[o];n[p]=o}if(l&&j&&j in n){n[i]=n[j];var q=n[j];this.dataSource.setResource(q,i);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(j,Date.now());}else if(!n[i]&&j)this.$UFIPagedCommentListImpl1(i);if(k&&i in n)this.commentPermalinks[i]=this.buildCommentPermalink(i,k,n[i]);};h.prototype.addCommentIDs=function(i,j,k){var l={};for(var m=0;m<j;m++)l[i+m]=k[m]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(l);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};h.prototype.getComments=function(i,j,k,l){var m=new Array(j).fill().map(function(s,t){return t+i}),n=this.dataSource.getUnavailableResourcesFromRequest(m);if(n.length){var o=Math.min.apply(Math,n),p=Math.max.apply(Math,n),q=o,r=p-o+1;if(q<this.lastRequestedOffset||q+r>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=q;this.lastRequestedLength=r;this.fetchComments(q,r,k)}}else this.dataSource.executeOrEnqueue(m,function(s){return l(this.commentsFromCommentIDs(s,i,j))}.bind(this));};h.prototype.getCommentsOrThrow=function(i){var j=i.getLength(),k=i.getOffset(),l={};new Array(j).fill().forEach(function(m,n){var o=n+k,p=this.dataSource.getResource(o);if(!p)throw new Error('Tried to get nonexistent comment');l[o]=p}.bind(this));return this.commentsFromCommentIDs(l,k,j)};h.prototype.fetchComments=function(i,j,k){};h.prototype.commentsFromCommentIDs=function(i,j,k){return {}};h.prototype.reset=function(){var i=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return i};h.prototype.deleteComment=function(i){if(!(i in this.deletedComments)){this.deletedComments[i]=true;this.deletedCount++}};h.prototype.updateCommentCount=function(i){this.count=i;this.deletedCount=0};h.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};h.prototype.getCommentCount=function(){return this.count};h.prototype.getDeletedCount=function(){return this.deletedCount};h.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount};h.prototype.getBasePermalink=function(){return this.basePermalink};h.prototype.buildCommentPermalink=function(i,j,k){return null};h.prototype.getPermalinkForComment=function(i){return this.commentPermalinks[i]};f.exports=h}),null);
__d('UFIReplyCommentListImpl',['ActorURI','JSLogger','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIPagedCommentListImpl','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(k,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function k(l,m,n){i.constructor.call(this,l);this.parentCommentID=m;this.containerOrderingMode=n}k.prototype.fetchComments=function(l,m,n){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:m,is_reply:true});var o={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[l],lengths:[m],feed_context:n?n.feedContext:null,numpagerclicks:n?n.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:n?n.translateAll:null};if(!n||!n.viewAs)o[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',o)};k.prototype.commentsFromCommentIDs=function(l,m,n){var o={};for(var p=0;p<n;p++){var q=c('UFIComments').getComment(l[m+p]);if(q)o[m+p]=q;}return o};k.prototype.reset=function(){var l=i.reset.call(this),m={};for(var n in l){var o=l[n];m[o]=true}c('UFIComments').resetComments(m);return l};k.prototype.getParentCommentID=function(){return this.parentCommentID};k.prototype.buildCommentPermalink=function(l,m,n){if(!this.basePermalink)return null;var o=this.getParentCommentID().split('_'),p=m;if(o.length===2){p=o[1]}else j.error('Bad reply comment ID: '+this.getParentCommentID());return new (c('URI'))(this.basePermalink).addQueryData({comment_id:p,reply_comment_id:m}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=k}),null);
__d('UFIReplyCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentListImpl','getObjectValues'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m,n){if(!h[m])h[m]={};if(!h[m][n]){var o=new (c('UFIReplyCommentListImpl'))(l,m,n),p=i.getReplyListsForParentCommentID(String(m));if(p.length)o.updateCommentCount(p[0].getCommentCount());h[m][n]=o}return h[m][n]},getReplyListsForParentCommentID:function k(l){return c('getObjectValues')(h[l]||{})},resetWithContext:function k(l,m,n,o){var p=h[m][o];if(!p)return;p.reset();p.actorID=n}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.parentcommentid;if(!n)return;if(l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getReplyListsForParentCommentID(n).forEach(function(o){o.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.replies&&Object.keys(m).length)for(var n in m.replies){var o=m.replies[n],p=o.ftentidentifier,q=o.containerorderingmode,r=i.getCommentList(String(p),String(n),q);r.addCommentIDs(o.range.offset,o.range.length,o.values);r.updateCommentCount(o.count)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){var n=m.parentcommentid;if(!n)return;i.getReplyListsForParentCommentID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});f.exports=i}),22);
__d('UFIToplevelPagedCommentListImpl',['ActorURI','MercuryServerDispatcher','UFICommentLogger','UFIComments','UFIConfig','UFIOrderingModeStore','UFIPagedCommentListImpl','URI','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIPagedCommentListImpl'));i=h&&h.prototype;function j(k,l){i.constructor.call(this,k);this.clientHasAll=false;this.orderReversed=c('UFIOrderingModeStore').isInverted(l);this.orderingMode=l;this.clientHasAll=false}j.prototype.fetchComments=function(k,l,m){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:l,is_reply:false});var n={ft_ent_identifier:this.feedbackTargetID,viewas:m&&m.viewAs?m.viewAs+'':null,source:m&&m.feedbackSource,offset:k,length:l,orderingmode:this.orderingMode,feed_context:m?m.feedContext:null,numpagerclicks:m?m.numPagerClicks:null,translate_all:m?m.translateAll:null,clientcommentcount:this.count};if(this.orderingMode!==c('WebCommentViewOption').RECENT_ACTIVITY||this.orderingMode!==c('WebCommentViewOption').RANKED_THREADED||this.orderingMode!==c('WebCommentViewOption').FILTERED)delete n.clientcommentcount;if(!m||!m.viewAs)n[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',n)};j.prototype.commentsFromCommentIDs=function(k,l,m){var n={},o=l,p=l+m-1;for(var q=0;q<m;q++){var r=this.orderReversed?p-q:o+q,s=c('UFIComments').getComment(k[r]);if(s)n[l+q]=s;}return n};j.prototype.getOrderingMode=function(){return this.orderingMode};j.prototype.setClientHasAll=function(k){this.clientHasAll=k};j.prototype.getClientHasAll=function(){return this.clientHasAll};j.prototype.buildCommentPermalink=function(k,l,m){if(!this.basePermalink)return null;return new (c('URI'))(this.basePermalink).addQueryData({comment_id:l}).toString()};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});f.exports=j}),null);
__d("UFIStreamingStateType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",ON_DEMAND:"on_demand"})}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIRange','UFIStreamingStateType'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID};i.prototype.getClientHasAll=function(){return false};i.prototype.getActualCommentCount=function(){return this.commentIDs.length};i.prototype.getCommentCount=function(){return this.totalCommentCount};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount()};i.prototype.getDeletedCount=function(){return this.deletedCount};i.prototype.getPermalinkForComment=function(j){return ''};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l))};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();m===0||h(0);var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false};i.prototype.addCommentIDs=function(j,k,l){};i.prototype.setClientHasAll=function(j){};i.prototype.addOrUpdateComment=function(j){var k=arguments.length<=1||arguments[1]===undefined?null:arguments[1],l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.__typename==='local'){if(this.hasComment(j))return;this.commentIDs.push(j.id);if(k!==c('UFIStreamingStateType').ON_DEMAND&&!j.isAnnouncement&&!j.tipOptionIndex)this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID)};i.prototype.deleteComment=function(j){this.deletedCount+=1;var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m!==j)k.push(m);}this.commentIDs=k};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;this.deletedCount=0};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l)}var m=l.get(k);if(!m){m=new i(j);l.set(k,m)}return m};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k)};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values())};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true});return}var m={};k.forEach(function(n){m[n]=true});i.$UFIToplevelStreamedCommentList2.set(j,m)};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3())};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3())});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l)}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid);if(!m)return;var n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getAllExistingCommentLists(o).forEach(function(q){return q.deleteComment(n)});})});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,k.streamingstate)}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,k.streamingstate)});})});c('UFICentralUpdates').subscribe('update-feedback',function(j,k){var l=k.feedbacktarget?k.feedbacktarget:k.feedbacktargets&&k.feedbacktargets[0];if(!l)return;i.getAllExistingCommentLists(l.entidentifier).forEach(function(m){return m.updateCommentCount(l.commentcount)})});f.exports=i}),22);
__d('UFIToplevelPagedCommentList',['UFICentralUpdates','UFIComments','UFIConstants','UFIReplyCommentList','UFIToplevelPagedCommentListImpl','UFIToplevelStreamedCommentList','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h={},i={getCommentList:function k(l,m){if(!h[l])h[l]={};if(!h[l][m]){var n=new (c('UFIToplevelPagedCommentListImpl'))(l,m),o=i.getCommentListsForFeedbackTargetID(l);if(o.length)n.updateCommentCount(o[0].getCommentCount());h[l][m]=n}return h[l][m]},getCommentListsForFeedbackTargetID:function k(l){var m=[],n=h[l]||{};for(var o in n)m.push(n[o]);return m},getPagedCommentCountForFeedbackTargetID:function k(l){var m=i.getCommentListsForFeedbackTargetID(l);return m.length?m[0].getCommentCount():null},getDisplayedCommentCountForFeedbackTargetID_UNSAFE:function k(l){var m=i.getCommentListsForFeedbackTargetID(l),n=m.length?m[0].getDisplayedCommentCount():null,o=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(l),p=o.length?o[0].getDisplayedCommentCount():null;if(n===null&&p===null)return null;return Math.max(n||0,p||0)},resetCommentListsForFeedbackTargetID:function k(l){if(!h[l])return;var m={};for(var n in h[l]){var o=h[l][n],p=o.reset();for(var q in p){var r=p[q];m[r]=true}}c('UFIComments').resetComments(m)},resetCommentListsWithContext:function k(l,m){var n=h[l];if(!n)return;var o={};for(var p in n){var q=n[p];q.actorID=m;var r=q.reset();for(var s in r){var t=r[s];o[t]=true;c('UFIReplyCommentList').resetWithContext(l,t,m,p)}}c('UFIComments').resetComments(o)}};function j(k){var l=c('UFIComments').getComment(k.commentid);if(!l)return;var m=l.id,n=l.ftentidentifier,o=l.parentcommentid;if(o)return;if(k.islocal||l.status!==c('UFIConstants').UFIStatus.DELETED&&l.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentListsForFeedbackTargetID(n).forEach(function(p){p.deleteComment(m)});}c('UFICentralUpdates').subscribe('update-actions',function(k,l){if(l.actions&&l.actions.length)for(var m=0;m<l.actions.length;m++){var n=l.actions[m];switch(n.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:j(n);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(k,l){var m=l.commentlists;if(m&&m.comments&&Object.keys(m).length)for(var n in m.comments)for(var o in m.comments[n]){var p=m.comments[n][o],q=i.getCommentList(String(n),o);q.addCommentIDs(p.range.offset,p.range.length,p.values);q.setClientHasAll(!!p.forcenotpageable)}});c('UFICentralUpdates').subscribe('update-comments',function(k,l){if(l.comments&&l.comments.length)l.comments.forEach(function(m){if(m.parentcommentid)return;var n=m.ftentidentifier;i.getCommentListsForFeedbackTargetID(String(n)).forEach(function(o){o.addOrUpdateComment(m)})});});c('UFICentralUpdates').subscribe('update-feedback',function(k,l){var m,n=l.feedbacktarget?l.feedbacktarget:l.feedbacktargets&&l.feedbacktargets[0];if(n)(function(){var o=n.entidentifier,p=n.defaultcommentorderingmode,q={};if(p)q[p]=true;if(n.orderingmodes)n.orderingmodes.forEach(function(s){if(s.value===c('WebCommentViewOption').LIVE_STREAMING)return;q[s.value]=true});for(var r in q)i.getCommentList(String(o),String(r)).updateCommentCount(n.commentcount);})();});f.exports=i}),22);
__d("XGroupsMuteMembersController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/groups\/mutemember\/",{group_id:{type:"FBID"},user_id:{type:"FBID"},mute_duration:{type:"Enum",enumType:1},source:{type:"Enum",enumType:1},should_reload:{type:"Bool",defaultValue:false},mute_reason:{type:"FBID"},custom_expiration:{type:"Int"}})}),null);
__d("XTownHallController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/townhall\/",{address:{type:"String"},nux_shown:{type:"Bool",defaultValue:false},ref:{type:"Enum",enumType:1},term:{type:"String"},override_address:{type:"Bool",defaultValue:false},campaign:{type:"String"},setting_nux:{type:"Bool",defaultValue:false}})}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/actor\/change\/",{})}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/add\/comment\/",{})}),null);
__d("XUFICommentAcceptAnswerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/answer\/accept\/",{})}),null);
__d("XUFICommentAppealSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/appeal_spam\/",{})}),null);
__d("XUFICommentKeepSpamController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/keep_spam\/",{})}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/like\/",{})}),null);
__d("XUFICommentSecureAccountController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/comment\/secure_account\/",{})}),null);
__d("XUFIDeleteCommentAndRemoveCommenterController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/deletecommentandremovecommenter\/",{})}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/delete\/comment\/",{})}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/edit\/comment\/",{})}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/hide\/comment\/",{})}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/like\/",{})}),null);
__d("XUFISendMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/message\/send\/",{})}),null);
__d("XUFIToggleTextDelightsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/textdelights\/hide_comment_text_delights\/",{comment_id:{type:"String"},should_hide:{type:"Bool",defaultValue:false}})}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/translate\/comment\/",{})}),null);
__d('UFIUserActions',['errorCode','fbt','invariant','ActorURI','AsyncResponse','Bootloader','ChannelClientID','ClientIDs','CommentPostedLiveState','ImmutableObject','MercuryServerDispatcher','UFICentralUpdates','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionUserActions','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIUserActionUtils','UFIVideoPlayerRegistry','UnicodeBidi','XGroupsMuteMembersController','XTownHallController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentAcceptAnswerController','XUFICommentAppealSpamController','XUFICommentKeepSpamController','XUFICommentLikeController','XUFICommentSecureAccountController','XUFIDeleteCommentAndRemoveCommenterController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFISendMessageController','XUFIToggleTextDelightsAsyncController','XUFITranslateCommentController','goURI','ifRequired'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function qa(ra,sa){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ta){var ua;c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ra,sa);c('UFIToplevelStreamedCommentList').resetAllCommentLists(ra);c('UFICentralUpdates').inform('actor-changed',{actorID:sa});var va=(ua={from_actor_id:ta.actorforpost,ft_ent_identifier:ra},ua[c('ActorURI').PARAMETER_ACTOR]=sa,ua),wa=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,va)})},changeCommentLike:function qa(ra,sa,ta){var ua,va=c('UFIComments').getComment(ra);if(va&&va.__typename==='saved'&&va.hasviewerliked!=sa)(function(){var wa=ta.target?c('UFIUserActionUtils').trackingData(ta.target):{},xa=sa?1:-1,ya={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:sa,likecount:(va.likecount||0)+xa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ya]});c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(za){var ab={};ab[c('ActorURI').PARAMETER_ACTOR]=za.actorforpost;var bb=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(bb,babelHelpers['extends']({comment_id:ra,legacy_id:va.legacyid,like_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},wa,ab))})})();},_getAttachment:function qa(ra){return ra},_getLocalComment:function qa(ra,sa,ta,ua,va,wa){var xa=c('ClientIDs').getNewClientID(),ya=c('UnicodeBidi').isDirectionLTR(ta)?'ltr':'rtl',za=this._getAttachment(va.attachedsticker);return {__typename:'local',ftentidentifier:sa,body:{text:ta,dir:ya},author:ra.actorforpost,cancomment:false,clientid:null,fbid:null,id:xa,ufiinstanceid:va.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:va.replyid,replycommentparentid:va.replycommentparentid,attachment:za,photo_comment:va.attachedphoto,video_comment:va.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")},photoTextTagID:va.photoTextTagID,isPhotoTag:va.isPhotoTag,photoTagX:va.photoTagX,photoTagY:va.photoTagY,videoTimeOffset:wa,postedLiveState:va.islivestreaming?c('CommentPostedLiveState').LIVE:c('CommentPostedLiveState').ON_DEMAND}},addMessage:function qa(ra,sa,ta,ua,va){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(wa){this.sendMessage(ra,sa,ta,ua,va)}.bind(this))},sendMessage:function qa(ra,sa,ta,ua,va){var wa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(wa&&wa.actorforpost))return;var xa=this._getLocalComment(wa,ra,sa,ta,ua,null);this._sendMessageToServer(ra,wa.actorforpost,sa,ta,ua,xa.id,va)},addComment:function qa(ra,sa,ta,ua){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(va){var wa=this.createComment(ra,sa,ta,ua);if(!wa)return;var xa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:va.actorforpost,hasviewersubscribed:true,entidentifier:va.entidentifier},ya={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:va.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa],actions:[xa,ya]})}.bind(this))},createComment:function qa(ra,sa,ta,ua){var va=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ra);if(!(va&&va.actorforpost))return null;var wa=null;if(ua.isBroadcasterUFI){wa=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(ab){return ab.getCurrentBroadcastTime()})}else if(ua.fluentContentToken&&(ua.isLiveVOD||ua.islivestreaming||ua.enableVODCommentTimestamps)){var xa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(ua.target,ua.fluentContentToken)||0;if(ua.isLiveVOD||ua.islivestreaming){wa=xa}else{var ya=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerForElement(ua.target,ua.fluentContentToken);if(ya!=null&&xa>0&&xa<Math.floor(ya.getPlaybackDuration()))wa=xa;}}var za=this._getLocalComment(va,ra,sa,ta,ua,wa);this._sendCommentToServer(ra,va.actorforpost,sa,ta,ua,za.id,wa);return za},_sendMessageToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=c('XUFISendMessageController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,{ft_ent_identifier:ra,comment_text:ua,client_id:wa,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,messenger_recipient:xa})},_sendCommentToServer:function qa(ra,sa,ta,ua,va,wa,xa){var ya=null;if(va.reply_fbid){ya=va.reply_fbid}else if(va.replyid){var za=c('UFIComments').getComment(va.replyid);za||j(0);ya=za.fbid}var ab=void 0;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(wa,va.timestamp||0,{has_photo:!!va.attachedphoto,has_video:!!va.attachedvideo,has_sticker:!!va.attachedsticker,is_reply:!!va.replyid});var bb={};bb[c('ActorURI').PARAMETER_ACTOR]=sa;var cb=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(cb,babelHelpers['extends']({ft_ent_identifier:ra,comment_text:ua,source:va.source,client_id:wa,session_id:c('ChannelClientID').getID(),reply_fbid:ya,parent_comment_id:va.parent_comment_id||va.replyid,reply_comment_parent_id:va.replycommentparentid,rootid:va.rootid,clp:ab,attached_sticker_fbid:va.attachedsticker?va.attachedsticker.fbid:0,attached_photo_fbid:va.attachedphoto?va.attachedphoto.fbid:0,attached_video_fbid:va.attachedvideo?va.attachedvideo.fbid:0,attached_share_url:va.attachedshareurl,feedback_referrer:va.feedbackReferrer,feed_context:va.feedcontext,video_time_offset:xa,is_live_streaming:va.islivestreaming,is_markdown:va.isMarkdown},c('UFIUserActionUtils').trackingData(va.target),bb,{photo_text_tag_id:va.photoTextTagID,is_private:va.isPrivate,is_photo_tag:va.isPhotoTag,photo_fbid:va.photoFBID,photo_tag_x:va.photoTagX,photo_tag_y:va.photoTagY}))},_hasCommentTextChanged:function qa(ra,sa){return !!ra.body&&ra.body.text!=sa},_hasCommentPhotoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentVideoChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&sa&&ra.fbid!=sa.fbid)},_hasCommentStickerChanged:function qa(ra,sa){return !!((ra||sa)&&!(ra&&sa)||ra&&ra.type=='sticker'&&sa&&ra.fbid!=sa.fbid)},_hasCommentShareURLChanged:function qa(ra,sa){if(sa){return true}else return Boolean(ra&&ra.type=='share');},editComment:function qa(ra,sa,ta,ua){var va=c('UFIUserActionUtils').trackingData(ua.target),wa=c('UFIComments').getComment(ra);if(!wa)return;var xa=this._hasCommentTextChanged(wa,sa)||this._hasCommentPhotoChanged(wa.photo_comment,ua.attachedPhoto)||this._hasCommentStickerChanged(wa.attachment,ua.attachedSticker)||this._hasCommentVideoChanged(wa.video_comment,ua.attachedVideo)||this._hasCommentShareURLChanged(wa.attachment,ua.attachedShareURL);wa=c('ImmutableObject').set(wa,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:sa},editnux:null,attachment:ua.attachedSticker,photo_comment:ua.attachedPhoto,video_comment:ua.attachedVideo});if(xa)wa=c('ImmutableObject').set(wa,{originalTimestamp:wa.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[wa]});c('UFIFeedbackTargets').getFeedbackTarget(wa.ftentidentifier,function(ya){var za={};za[c('ActorURI').PARAMETER_ACTOR]=ya.actorforpost;var ab=c('XUFIEditCommentController').getURIBuilder().getURI();if(wa)c('MercuryServerDispatcher').trySend(ab,babelHelpers['extends']({ft_ent_identifier:wa.ftentidentifier,comment_text:ta,source:ua.source,comment_id:wa.id,parent_comment_id:wa.parentcommentid,attached_sticker_fbid:ua.attachedSticker?ua.attachedSticker.fbid:0,attached_photo_fbid:ua.attachedPhoto?ua.attachedPhoto.fbid:0,attached_video_fbid:ua.attachedVideo?ua.attachedVideo.fbid:0,attached_share_url:ua.attachedShareURL},va,za));})},translateComments:function qa(ra,sa,ta,ua){var va=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,{ft_ent_identifier:ra,comment_ids:sa,source:ua.source,trigger:ta})},setHideAsSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,spam_action:sa,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya))});},keepSpam:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_KEEP_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentKeepSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa));c('Bootloader').loadModules(["SimpleXUIDialog"],function(za){za.show(i._("This comment is now visible on your post."),i._("Comment Restored"))},'UFIUserActions')});},appealSpam:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(ta.target),va=c('UFIComments').getComment(ra),wa={commentid:ra,actiontype:c('UFIConstants').UFIActionType.COMMENT_APPEAL_SPAM};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va)c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFICommentAppealSpamController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:ra,ft_ent_identifier:va.ftentidentifier,source:ta.source},ua,ya));c('Bootloader').loadModules(["SimpleXUIDialog"],function(ab){ab.show(i._("Your feedback helps us do better."),i._("Thanks for Letting Us Know"))},'UFIUserActions')});},secureAccount:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua=c('UFIComments').getComment(ra),va={actiontype:c('UFIConstants').UFIActionType.COMMENT_SECURE_ACCOUNT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});if(ua)c('UFIFeedbackTargets').getFeedbackTarget(ua.ftentidentifier,function(wa){var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=wa.actorforpost;var ya=c('XUFICommentSecureAccountController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ya,babelHelpers['extends']({comment_id:ua.id,ft_ent_identifier:ua.ftentidentifier,source:sa.source},ta,xa))});},removeComment:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},removeCommentWithRule:function qa(ra,sa,ta){var ua=c('UFIUserActionUtils').trackingData(sa.target),va=c('UFIComments').getComment(ra),wa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});if(va&&va.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(va.ftentidentifier,function(xa){var ya={};ya[c('ActorURI').PARAMETER_ACTOR]=xa.actorforpost;var za=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,babelHelpers['extends']({comment_id:va.id,comment_legacyid:va.legacyid,ft_ent_identifier:va.ftentidentifier,one_click:sa.oneclick,source:sa.source,rule_id:ta,client_id:c('ClientIDs').getNewClientID()},ua,ya))});},deleteCommentAndRemoveCommenter:function qa(ra,sa,ta,ua,va,wa,xa){var ya=c('UFIUserActionUtils').trackingData(sa.target),za=c('UFIComments').getComment(ra),ab={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT_REMOVE_COMMENTER,commentid:ra,islocal:true,oneclick:sa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ab]});if(za&&za.__typename==='saved')c('UFIFeedbackTargets').getFeedbackTarget(za.ftentidentifier,function(bb){var cb={};cb[c('ActorURI').PARAMETER_ACTOR]=bb.actorforpost;var db=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(db,babelHelpers['extends']({comment_id:za.id,comment_legacyid:za.legacyid,ft_ent_identifier:za.ftentidentifier,one_click:sa.oneclick,source:sa.source,delete_posts:ta,delete_comments:ua,decline_pending_members:va,block_permanently:wa,apply_to_other_groups:xa,client_id:c('ClientIDs').getNewClientID()},ya,cb))});},muteMember:function qa(ra,sa,ta,ua){var va=c('UFIComments').getComment(ra),wa=ta!==null;if(va&&va.__typename==='saved'){var xa={authorid:va.author,actiontype:c('UFIConstants').UFIActionType.MUTE_MEMBER,shouldmute:wa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[xa]});var ya;c('Bootloader').loadModules(["GroupMemberActionSource"],function(ab){ya=ab.GROUP_COMMENT},'UFIUserActions');var za=c('XGroupsMuteMembersController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(za,{group_id:va.group_id,user_id:va.author,mute_duration:ta,custom_expiration:ua,should_reload:false,source:ya})}},toggleTextDelights:function qa(ra,sa,ta){var ua=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,{comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,should_hide:ta,parent_comment_id:ra.parentcommentid,source:sa.source})},changeAcceptedAnswer:function qa(ra,sa){c('MercuryServerDispatcher').trySend(aa,{ft_ent_identifier:ra.id,do_accept:sa})},banUser:function qa(ra,sa,ta,ua){var va=ta?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:sa,commenter_id:ra.author,action:va,comment_id:ra.id,client_side:true})},changeSubscribe:function qa(ra,sa,ta){c('UFIFeedbackTargets').getFeedbackTarget(ra,function(ua){var va=c('UFIUserActionUtils').trackingData(ta.target);if(ua.hasviewersubscribed!==sa){var wa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ua.actorforpost,hasviewersubscribed:sa,entidentifier:ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[wa]});var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:sa,ft_ent_identifier:ra,source:ta.source,client_id:c('ClientIDs').getNewClientID(),rootid:ta.rootid,comment_expand_mode:ta.commentexpandmode},va,xa))}})},fetchSpamComments:function qa(ra,sa,ta,ua){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ra,viewas:ua,comment_ids:sa,parent_comment_id:ta,source:null})},manageConstituentBadge:function qa(ra){c('goURI')(c('XTownHallController').getURIBuilder().setBool('setting_nux',true).getURI())},removePreview:function qa(ra,sa){var ta=c('UFIUserActionUtils').trackingData(sa.target),ua={commentid:ra.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ra.id,ft_ent_identifier:ra.ftentidentifier,source:sa.source},ta))}};function m(qa){c('AsyncResponse').defaultErrorHandler(qa)}function n(qa){var ra=qa.request.data;c('AsyncResponse').defaultErrorHandler(qa);var sa=ra.client_id||ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;var ua=ta.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ta=c('ImmutableObject').setDeep(ta,{status:ua,allowRetry:o(qa),body:{mentionstext:ra.comment_text,mentionsphoto:ta.photo_comment,mentionsvideo:ta.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function o(qa){var ra=qa.getError();if(qa.isBlockedAction())return false;if(qa.silentError)return true;if(ra===1357012||ra===1357006)return false;return true}function p(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{status:ta.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function q(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(!ta)return;ta=c('ImmutableObject').set(ta,{commentid:sa,needsApproval:!ta.needsApproval,isApproved:!ta.isApproved});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}function r(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta){ta=c('ImmutableObject').set(ta,{commentid:sa,appealStatus:null,canAppeal:!ta.canAppeal,canSecure:!ta.canSecure});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]})}}function s(qa){var ra=qa.request.data,sa=ra.comment_id,ta=c('UFIComments').getComment(sa);if(ta&&ra.like_action===ta.hasviewerliked){var ua=ta.hasviewerliked?-1:1,va={commentid:sa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}c('AsyncResponse').defaultErrorHandler(qa)}function t(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewerliked===ra.like_action){var ua=ta.hasviewerliked?-1:1,va={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ta.actorforpost,hasviewerliked:!ta.hasviewerliked,likecount:(ta.likecount||0)+ua,entidentifier:sa,likesentences:{current:ta.likesentences.alternate,alternate:ta.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]})}});c('AsyncResponse').defaultErrorHandler(qa)}function u(qa){var ra=qa.request.data,sa=ra.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(sa,function(ta){if(ta.hasviewersubscribed===ra.subscribe_action){var ua={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ta.actorforpost,hasviewersubscribed:!ta.hasviewersubscribed,entidentifier:sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]})}});c('AsyncResponse').defaultErrorHandler(qa)}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:m},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:oa,batch_function:pa},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var y=c('XUFIDeleteCommentAndRemoveCommenterController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var z=c('XUFICommentLikeController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ma,batch_function:pa};var aa=c('XUFICommentAcceptAnswerController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ba=c('XGroupsMuteMembersController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ca=c('XUFIToggleTextDelightsAsyncController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE};var da=c('XUFIHideCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var ea=c('XUFICommentKeepSpamController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var fa=c('XUFICommentAppealSpamController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ga=c('XUFICommentSecureAccountController').getURIBuilder().getURI();v[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ha=c('XUFILikeController').getURIBuilder().getURI();v[ha]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:na,batch_function:pa};var ia=c('XUFIEditCommentController').getURIBuilder().getURI();v[ia]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n};var ja=c('XUFITranslateCommentController').getURIBuilder().getURI();v[ja]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ka=c('XUFIActorChangeController').getURIBuilder().getURI();v[ka]={mode:c('MercuryServerDispatcher').IMMEDIATE};var la=c('XUFISendMessageController').getURIBuilder().getURI();v[la]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ma(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier&&qa.comment_id==ra.comment_id}function na(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function oa(qa,ra){return qa&&qa.ft_ent_identifier==ra.ft_ent_identifier}function pa(qa,ra){return ra}f.exports=babelHelpers['extends']({},l,c('UFIReactionUserActions'))}),null);
__d('UFISpamStore',['FluxReduceStore','UFIDispatcherBase','UFIStoryActionType','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {}};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIStoryActionType').SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return k[m]=true});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k};function j(){h.apply(this,arguments)}f.exports=new j(c('UFIDispatcherBase'))}),null);
__d('UFIInstanceAction',['UFIInstanceActionType'],(function a(b,c,d,e,f,g){'use strict';var h={changeOrderingMode:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_ORDER_MODE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,mode:k}},toggleComments:function i(j){return {type:c('UFIInstanceActionType').TOGGLE_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},changeCommentListVisibility:function i(j,k){return {type:c('UFIInstanceActionType').CHANGE_VISIBILITY,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,visibility:k}},init:function i(j,k){return {type:c('UFIInstanceActionType').INIT,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,payload:k}},didRequestVODComments:function i(j){return {type:c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},didReceiveVODComments:function i(j){return {type:c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},remove:function i(j){return {type:c('UFIInstanceActionType').REMOVE,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},toggleCommercialBreak:function i(j,k){return {type:c('UFIInstanceActionType').TOGGLE_COMMERCIAL_BREAK,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,inCommercial:k}},translateAll:function i(j){return {type:c('UFIInstanceActionType').TRANSLATE_ALL,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier}},playLiveVODHighlights:function i(j,k){return {type:c('UFIInstanceActionType').PLAY_LIVE_VOD_HIGHLIGHTS,instanceID:j.instanceid,ftentidentifier:j.ftentidentifier,playingLiveVODHighlights:k}}};f.exports=h}),null);
__d('UFICommercialBreakAdapter',['Map','SubscriptionsHandler','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l=k.getOption('VideoWithCommercialBreak','controller');if(l&&l.getIsCommercialBreakOngoing())c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,true));var m=new (c('SubscriptionsHandler'))();m.addSubscriptions(k.addListener('commercialBreak/hideUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,true))}),k.addListener('commercialBreak/showUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleCommercialBreak(j,false))}));return m}var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l))},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i['delete'](k)}}}),null);
__d('UFIDomRootAdapter',['csx','DOMQuery','Parent','UFIRootRegistry'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$UFIDomRootAdapter2=null;this.$UFIDomRootAdapter3=null;this.$UFIDomRootAdapter5=null;this.$UFIDomRootAdapter4=j;this.$UFIDomRootAdapter1=k}i.prototype.getParentForm=function(){'use strict';if(!this.$UFIDomRootAdapter2){var j=c('Parent').byTag(this.$UFIDomRootAdapter4,'form');this.$UFIDomRootAdapter2=j instanceof HTMLElement?j:null}return this.$UFIDomRootAdapter2};i.prototype.getHeadRoot=function(){'use strict';if(!this.$UFIDomRootAdapter3){var j=c('UFIRootRegistry').isSnowliftNode(this.$UFIDomRootAdapter1.rootid),k=j?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",l=c('DOMQuery').scry(this.$UFIDomRootAdapter4,k);this.$UFIDomRootAdapter3=l&&l[0]||null}return this.$UFIDomRootAdapter3};i.prototype.getSnowliftActionRoot=function(){'use strict';if(!this.$UFIDomRootAdapter5){var j=c('DOMQuery').scry(this.$UFIDomRootAdapter4,"^.snowliftPayloadRoot ._29qf ._37uu");this.$UFIDomRootAdapter5=j&&j[0]||null}return this.$UFIDomRootAdapter5};f.exports=i}),null);
__d('UFIPlayLiveVODHighlightsAdapter',['Map','SubscriptionsHandler','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){if(k&&k.isPlayingVODHighlights())c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').playLiveVODHighlights(j,true));var l=new (c('SubscriptionsHandler'))();l.addSubscriptions(k.addListener('playLiveVODHighlights/hideUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').playLiveVODHighlights(j,true))}),k.addListener('playLiveVODHighlights/showUFI',function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').playLiveVODHighlights(j,false))}));return l}var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.instanceid;if(i.get(m))return;i.set(m,h(k,l))},stop:function j(k){var l=i.get(k);if(!l)return;l.release();i['delete'](k)}}}),null);
__d('CommentPrelude',['BanzaiODS','CSS','ErrorUtils','Parent','clickRefAction','ex','ifRequired'],(function a(b,c,d,e,f,g){function h(n,o){if(n==='ufi.react'||n==='ufi_mentions_input.react'||n==='ufi_controller'||n==='action_link_bling'||n==='action_link_timeline_bling')return;var p=new Error(c('ex')('Deprecated CommentPrelude action %s called from ref %s',o||'unknown',n||'unknown'));p.type='warn';c('ErrorUtils').reportError(p);c('BanzaiODS').bumpEntityKey('comment_prelude',n)}function i(n,o,p){h(p,'click');var q=c('Parent').byTag(n,'form');if(!q||!c('CSS').hasClass(q,'collapsible_comments'))return;c('clickRefAction')('ufi',n,null,'FORCE');return j(n,o,p)}function j(n,o,p){h(p,'expand');var q=c('Parent').byTag(n,'form');if(!q||!c('CSS').hasClass(q,'collapsible_comments'))return;k(q,p);if(o!==false){var r=q.add_comment_text_text||q.add_comment_text,s=r.length;if(s)if(!c('Parent').byClass(r[s-1],'UFIReplyList')){r=r[s-1]}else if(!c('Parent').byClass(r[0],'UFIReplyList')){r=r[0]}else r=null;if(r){r.focus();c('ifRequired')('FbFeedCommentUFIScroller',function(t){return t.reveal(r)})}}return false}function k(n,o){h(o,'uncollapse');if(!n||!c('CSS').hasClass(n,'collapsible_comments'))return;var p=c('CSS').removeClass.bind(null,n,'collapsed_comments');c('ifRequired')('ScrollAwareDOM',function(q){return q.monitor(n,p)},function(){return p()})}function l(n){var o=n.getAttribute('data-comment-prelude-ref');h(o,'blingbox');var p=c('Parent').byTag(n,'form');if(!p||!c('CSS').hasClass(p,'collapsible_comments'))return;c('CSS').toggleClass(p,'collapsed_comments')}var m={click:i,expand:j,uncollapse:k,onBlingboxClick:l,logRef:h};f.exports=m}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1757438337629540",queryID:"897048570443065"})}),null);
__d('LivePinnedCommentEventCreateSubscription',['BaseGraphQLSubscription','PinnedCommentEventCreateSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/pinned_comment_event_create_subscribe/video_id_'+j},_getQueryID:function i(){return c('PinnedCommentEventCreateSubscriptionWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})}},_getSubscriptionCallName:function i(){return 'pinned_comment_event_create_subscribe'}});f.exports=h}),null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge','ifRequired'],(function a(b,c,d,e,f,g){var h={reveal:function i(j){if(j){var k=c('ge')('content');if(k&&c('containsNode')(k,j)){c('DOMScroll').ensureVisible(j,null,60,250)}else c('ifRequired')('ScrollableArea',function(l){var m=l.getInstance(j);if(m)m.scrollIntoView(j);});}}};f.exports=h}),null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.uploadURIString=k;this.data=l}j.prototype.handlePaste=function(event){'use strict';var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append('pasted_file',k[l]);var n=new (c('AsyncRequest'))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform('upload_success',o)}.bind(this)).setErrorHandler(function(o){this.inform('upload_error',o)}.bind(this)).setAbortHandler(function(o){this.inform('upload_error',o)}.bind(this));this.inform('upload_start');n.send();break}};j.getImages=function(event){'use strict';if(!event.clipboardData)return [];var k=event.clipboardData.items;if(!k)return [];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==='string')return [];if(l.kind==='file'&&l.type.indexOf('image/')!==-1)m.push(l.getAsFile());if(l.kind==='blob')m.push(l.blob);}return m};f.exports=j}),null);
__d('FocusRelocator.react',['csx','CSS','Focus','React','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.componentWillReceiveProps=function(l){var m=this.props,n=m.from,o=m.to,p=l.from,q=l.to;if(p&&q&&(n!==p||o!==q)){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=c('Focus').relocate(p,q)}};k.prototype.componentDidUpdate=function(){this.$FocusRelocator2()};k.prototype.componentWillUnmount=function(){this.$FocusRelocator1&&this.$FocusRelocator1.remove();this.$FocusRelocator1=null};k.prototype.render=function(){return this.props.children};k.prototype.$FocusRelocator3=function(){var l=this.props,m=l.from,n=l.to;if(m&&n){c('Focus').performRelocation(m,n,c('getActiveElement')()===this.props.from);this.$FocusRelocator2()}};k.prototype.$FocusRelocator2=function(){setTimeout(function(){if(this.props.to&&c('getActiveElement')()===this.props.from&&!c('CSS').matchesSelector(this.props.to,"._16jm"))this.$FocusRelocator3();}.bind(this),0)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('EmojiInputButton.react',['fbt','Bootloader','FocusRelocator.react','Link.react','React','createCancelableFunction','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=null;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$EmojiInputButton4=function(event){event.preventDefault();event.stopPropagation();this.props.onClick&&this.props.onClick();this.setState({locked:false,visible:!this.state.locked?!this.state.visible:false})}.bind(this);this.$EmojiInputButton5=function(event){this.setState({locked:this.state.visible})}.bind(this);this.$EmojiInputButton7=function(n){if(!n)this.setState({visible:false,isVariationsShown:false});}.bind(this);this.$EmojiInputButton8=function(n){this.setState({isVariationsShown:n})}.bind(this);this.state={locked:false,visible:false,isVariationsShown:false}}l.prototype.componentWillUnmount=function(){this.$EmojiInputButton1&&this.$EmojiInputButton1.cancel();this.$EmojiInputButton1=null};l.prototype.render=function(){var m=h._("Insert an emoji"),n=this.state.visible?c('joinClasses')(this.props.iconActiveClassName,this.props.iconClassName):this.props.iconClassName;return c('React').createElement(c('FocusRelocator.react'),{from:this.$EmojiInputButton3,to:this.$EmojiInputButton2},c('React').createElement(c('Link.react'),{'aria-label':m,className:this.props.buttonClassName,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':!this.state.visible?m:null,onClick:this.$EmojiInputButton4,onDragStart:function o(p){return p.preventDefault()},onMouseDown:this.$EmojiInputButton5,linkRef:function(o){return this.$EmojiInputButton3=o}.bind(this),role:'button'},c('React').createElement('div',{className:n,ref:function(o){return this.$EmojiInputButton2=o}.bind(this)}),this.$EmojiInputButton6()))};l.prototype.$EmojiInputButton6=function(){if(!k){if(this.state.visible){this.$EmojiInputButton1=c('createCancelableFunction')(function(){this.forceUpdate()}.bind(this));c('Bootloader').loadModules(["EmojiPicker.react"],function(m){k=m;if(this.$EmojiInputButton1){this.$EmojiInputButton1();this.$EmojiInputButton1=null}}.bind(this),'EmojiInputButton.react')}return null}return c('React').createElement(k,{context:this.$EmojiInputButton3,isVariationsShown:this.state.isVariationsShown,onToggle:this.$EmojiInputButton7,onSelect:this.props.onSelect,onVariationsShown:this.$EmojiInputButton8,shown:this.state.visible})};f.exports=l}),null);
__d('LitestandStoryInsertionStatus',['ArbiterMixin'],(function a(b,c,d,e,f,g){var h='check',i={registerBlocker:function j(k){return this.subscribe(h,function(l,m){if(m.can_insert&&k())m.can_insert=false;})},canInsert:function j(){var k={can_insert:true};this.inform(h,k);return k.can_insert}};Object.assign(i,c('ArbiterMixin'));f.exports=i}),null);
__d('TextDelightEvents',['Bootloader','EventEmitter','EventEmitterWithHolding','EventHolder'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('EventEmitterWithHolding'))(h,new (c('EventHolder'))());function j(){c('Bootloader').loadModules(["TextDelightController"],function(l){return l.init()},'TextDelightEvents')}var k={emitScrapablePost:function l(m){j();i.emit('potential_delight_in_post',{text:m})},emitScrapableComment:function l(m){j();i.emit('potential_delight_in_comment',{text:m})},addListener:function l(event,m){i.once(event,m)}};f.exports=k}),null);
__d('UFIBusinessActorIcon.react',['cx','AppUserRoleConstants.brands','BusinessActorUtils.brands','React','getObjectValues','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=c('BusinessActorUtils.brands').getInitials(this.props.firstName,this.props.lastName),n=this.props.businessRole===c('AppUserRoleConstants.brands').ADMIN;return c('React').createElement('div',{className:c('joinClasses')(this.props.classNames,"_1rpl")},c('React').createElement('div',{className:c('joinClasses')(this.props.textClassNames,n?"_1rpm":null)},m))};function l(){i.apply(this,arguments)}l.propTypes={firstName:k.string.isRequired,lastName:k.string.isRequired,classNames:k.string,textClassNames:k.string,businessRole:k.oneOf(c('getObjectValues')(c('AppUserRoleConstants.brands')))};f.exports=l}),null);
__d('UFIImageBlock.react',['cx','ImageBlock.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('ImageBlock.react'),babelHelpers['extends']({},this.props,{imageClassName:"UFIImageBlockImage",contentClassName:"UFIImageBlockContent"}),this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('UFIStickerButton.react',['cx','fbt','Arbiter','Bootloader','FocusRelocator.react','Link.react','React','StickerInterfaces','getObjectValues'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIStickerButton',_clickGuard:false,_updateListener:null,_linkRef:null,propTypes:{onStickerFlyoutShow:j.func,onStickerSelected:j.func.isRequired,onEmoticonSelected:j.func,showTooltip:j.bool,stickerInterface:j.oneOf(c('getObjectValues')(c('StickerInterfaces'))),tabIndex:j.number},getDefaultProps:function l(){return {showTooltip:true,stickerInterface:c('StickerInterfaces').COMMENTS}},getInitialState:function l(){return {renderFlyout:null,flyoutShown:false}},componentDidMount:function l(){this._updateListener=c('Arbiter').subscribe('page_transition',function(){return this._hideFlyout()}.bind(this))},componentWillUnmount:function l(){this._updateListener&&this._updateListener.unsubscribe()},render:function l(){var m=i._("Post a sticker");return c('React').createElement(c('FocusRelocator.react'),{from:this._linkRef,to:this.refs.icon},c('React').createElement(c('Link.react'),{'aria-label':m,className:"_r1a UFICommentStickerButton",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':this.props.showTooltip?m:null,linkRef:this._setRef,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick,role:'button',tabIndex:this.props.tabIndex},c('React').createElement('div',{ref:'icon',className:"UFICommentStickerIcon"+(this.state.flyoutShown?' '+"UFICommentStickerIconActive":'')}),this.props.children,this.state.renderFlyout?this.state.renderFlyout():null))},_hideFlyout:function l(){this.setState({flyoutShown:false})},_prepareForClick:function l(){this._clickGuard=this.state.flyoutShown},_onLinkClicked:function l(m){m.preventDefault();if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true})}return}c('Bootloader').loadModules(["ContextualLayerAutoFlip","LayerTabIsolation","StickersFlyout.react","XUIContextualDialog.react"],function(n,o,p,q){this.setState({flyoutShown:true,renderFlyout:function(){return c('React').createElement(q,{alignment:'right',behaviors:{ContextualLayerAutoFlip:n,LayerTabIsolation:o},className:"_5e-r",contextRef:function(){return this._linkRef}.bind(this),onBlur:this._hideFlyout,onToggle:function(r){if(!r&&this.state.flyoutShown)this._hideFlyout();}.bind(this),position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:278},c('React').createElement('div',null,c('React').createElement(p,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow()}.bind(this),'UFIStickerButton.react')},_onStickerSelected:function l(m,event){this.props.onStickerSelected(m,event);this._hideFlyout()},_onEmoticonSelected:function l(m){this.props.onEmoticonSelected&&this.props.onEmoticonSelected(m);this._hideFlyout()},_setRef:function l(m){this._linkRef=m}});f.exports=k}),null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){var m=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),n=void 0;if(this.props.isQAndA){n=i._("Ask a question...")}else if(this.props.isGroupQA){n=i._("Write an answer...")}else n=i._("Write a comment...");return c('React').createElement('div',{className:m,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},n))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('ProfileBrowserLink',['URI'],(function a(b,c,d,e,f,g){var h='/ajax/browser/dialog/',i='/browse/',j=function l(m,n,o){return new (c('URI'))(m+n).setQueryData(o)},k={constructPageURI:function l(m,n){return j(i,m,n)},constructDialogURI:function l(m,n){return j(h,m,n)}};f.exports=k}),null);
__d('ProfileBrowserTypes',[],(function a(b,c,d,e,f,g){var h={LIKES:'likes',FRIEND_CHECKINS:'friendcheckins',FRIENDED_FANS_OF:'friended_fans_of',GROUP_ADMINS:'group_admins',GROUP_MEMBERS:'group_members',GROUP_FRIEND_MEMBERS:'group_friend_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',LIVE_VIDEO_VIEWERS:'live_video_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',GROUP_JOIN_REQUESTERS_FRIENDS_IN_GROUP:'group_join_requesters_friends_in_group'};f.exports=h}),null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],(function a(b,c,d,e,f,g){var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null})})},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null})}this.subscription=i.add(function(q){this.locked=q}.bind(this))};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove()};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null}.bind(this),function(){this.deferred=null}.bind(this))};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)}))};function n(){'use strict';l.apply(this,arguments)}return n}()}.bind(this);f.exports=j}),null);
__d('FBCollapsibleList.react',['Link.react','React','getObjectValues'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k={COMMA:'comma',NEWLINE:'newline'};h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={numShown:this.props.numVisible},this.$FBCollapsibleList1=function(){return this.state.numShown<this.$FBCollapsibleList6()}.bind(this),this.$FBCollapsibleList2=function(){var r=this.$FBCollapsibleList6();return this.props.showLessLink&&this.props.numVisible<r&&this.state.numShown>=r}.bind(this),this.$FBCollapsibleList4=function(){var r=this.$FBCollapsibleList6()-this.props.numVisible;return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList7,key:'seeMore'},c('React').createElement('b',null,'Show more ','(',r,')'))}.bind(this),this.$FBCollapsibleList5=function(){return c('React').createElement(c('Link.react'),{onClick:this.$FBCollapsibleList8,key:'seeLess'},c('React').createElement('b',null,'Show less'))}.bind(this),this.$FBCollapsibleList3=function(r,s){switch(this.props.delimiter){case k.NEWLINE:return [c('React').createElement('div',{key:r.key},r)];case k.COMMA:return s?[r]:[r,', '];default:throw new Error('Invalid delimiter: '+this.props.delimiter);}}.bind(this),this.$FBCollapsibleList8=function(){this.setState({numShown:this.props.numVisible})}.bind(this),this.$FBCollapsibleList6=function(){if(!!this.props.maxShowMore&&this.props.maxShowMore<this.props.children.length)return this.props.maxShowMore;return this.props.children.length}.bind(this),this.$FBCollapsibleList7=function(){this.setState({numShown:this.$FBCollapsibleList6()})}.bind(this),n}l.prototype.render=function(){'use strict';var m=this.$FBCollapsibleList1(),n=this.$FBCollapsibleList2(),o=Math.min(this.state.numShown,this.props.children.length),p=m||n,q=[];for(var r=0;r<o;r++){var s=!p&&r===o-1;q.push(this.$FBCollapsibleList3(this.props.children[r],s))}if(m){q.push(this.$FBCollapsibleList4())}else if(n)q.push(this.$FBCollapsibleList5());return this.props.display=='block'?c('React').createElement('div',this.props,q):c('React').createElement('span',this.props,q)};l.propTypes={delimiter:j.oneOf(c('getObjectValues')(k)),display:j.oneOf(['inline','block']),numVisible:j.number.isRequired,maxShowMore:j.number,showLessLink:j.bool};l.Delimiters=k;l.defaultProps={children:[],delimiter:k.NEWLINE,display:'block',showLessLink:false};f.exports=l}),null);
__d('LitestandEllipsis',['BinarySearch','DOMQuery','concatMap','getElementText','isTextNode'],(function a(b,c,d,e,f,g){var h=void 0,i='\u2026';function j(o,p,q){var r=o.slice(0,p).join(' ')+i;if(q===0)r=r.trimLeft();return r}function k(o,p,q){var r=o.substr(0,p).trimRight()+i;if(q===0)r=r.trimLeft();return r}var l={add:function o(p,q,r){var s;r=r||p;c('DOMQuery').scry(p,'br').forEach(function(y){y.parentNode&&y.parentNode.removeChild(y)});var t=r.offsetHeight||0;if(t<=q)return;var u=n(p),v=u.length-1,w=q+1,x=function y(){var z=c('getElementText')(u[v]).split(/[\n\s]/g),aa=c('BinarySearch').greatestLowerBound(function(ca){m(u[v],j(z,ca,v));return r.offsetHeight||0},w,0,z.length,function(ca,da){return ca-da});if(aa>0){m(u[v],j(z,aa,v));return 'break'}var ba=c('BinarySearch').greatestLowerBound(function(ca){m(u[v],k(z[0],ca,v));return r.offsetHeight||0},w,0,z[0].length-i.length-2,function(ca,da){return ca-da});if(ba>-1){m(u[v],k(z[0],ba,v));return 'break'}m(u[v],'');v--};while(v>=0){var s=x();if(s==='break')break;}}};function m(o,p){h=h||(o.textContent!=null?'textContent':'innerText');o[h]=p}function n(o){if(c('isTextNode')(o))return [o];return c('concatMap')(n,Array.from(o.childNodes))}f.exports=l}),null);
__d('LitestandShareAttachment',['csx','cx','CSS','DOMQuery','LitestandEllipsis','queryThenMutateDOM'],(function a(b,c,d,e,f,g,h,i){var j=16,k=22,l=20,m=5,n=3,o=3,p=2,q=2,r=5,s=5,t="_5qqr",u="_6m2";function v(ja){return c('CSS').matchesSelector(ja,"._59ap")}function w(ja){return c('CSS').matchesSelector(ja,"._5ej3")}function x(ja){return c('CSS').matchesSelector(ja,"._pb2")}function y(ja){return c('CSS').matchesSelector(ja,"._61bj")}function z(ja,ka){var la=c('DOMQuery').scry(ja,ka)[0];return la?la:null}function aa(ja){return !!z(ja,"^div._4rtc")}function ba(ja){return z(ja,"._59tj")}function ca(ja){return z(ja,"._6m6")}function da(ja){return z(ja,"._6m7")}function ea(ja){return z(ja,"._6m3")}function fa(ja){if(x(ja)){return q}else if(aa(ja)){return p}else if(v(ja)){return n}else if(w(ja)){return o}else return m;}function ga(ja,ka,la){var ma=ea(ja);if(!ka||!ma||y(ja))return 0;var na=ba(ja),oa=v(ja),pa=x(ja),qa=Math.round(ka.scrollHeight/ha(ja));if(qa>la&&!pa)return 0;var ra=ma.offsetHeight-r-ka.offsetHeight-(na?na.offsetHeight:0)-(oa?0:s)+1;return Math.floor(Math.max(ra,0)/j)}function ha(ja){return x(ja)?l:k}var ia={getSimpleCropClass:function ja(){return t},_truncateText:function ja(ka,la){var ma=void 0,na=void 0,oa=void 0,pa=fa(ka);c('queryThenMutateDOM')(function(){ma=ca(ka);na=da(ka);oa=ga(ka,ma,pa)},function(){if(!ka.offsetHeight){if(la)c('CSS').addClass(ka,t);return}if(!oa){if(na)c('CSS').hide(na);ma&&c('LitestandEllipsis').add(ma,pa*ha(ka))}else if(na&&oa){c('CSS').show(na);c('LitestandEllipsis').add(na,oa*j)}})},init:function ja(ka){var la,ma=this;if(c('CSS').hasClass(ka,t)){var la=function(){var oa=false;c('queryThenMutateDOM')(function(){if(ka.offsetHeight)oa=true;},function(){if(oa){c('CSS').removeClass(ka,t);this._truncateText(ka,true)}}.bind(ma));return {v:void 0}}();if(typeof la==="object")return la.v;}else{var na=c('CSS').hasClass(ka,u);this._truncateText(ka,na)}},getNumDescriptionLines:function ja(ka){return ga(ka,ca(ka),fa(ka))},getDescriptionLineHeight:function ja(){return j}};f.exports=ia}),null);
__d('HovercardLinkInterpolator',['cx','fbt','Badge.react','HovercardLink','Link.react','React','URI','isFacebookURI','isRTL'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n,o){var p=arguments.length<=5||arguments[5]===undefined?null:arguments[5],q=l.entity,r=m||(q.external?'_blank':null),s,t=(!q.external?"profileLink":'')+(q.weakreference?' '+"weakReference":''),u,v=q.hashtag?k.substring(1):k;u=c('isRTL')(v)?'rtl':'ltr';var w=new (c('URI'))(q.url);if(c('isFacebookURI')(w))w.addQueryData({hc_location:o});var x=q.shimhash?q.shimhash:null,y=!q.external&&!q.hashtag&&!q.photo&&!q.note&&!q.statusupdate&&!q.video,z=y?{'data-hovercard':c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(q,n,q.hovercardlocation?q.hovercardlocation:o,null,p).toString()}:{};if(q.hashtag){s=c('React').createElement('a',babelHelpers['extends']({},z,{className:"_58cn",dir:u,href:w.toString(),target:r}),c('React').createElement('span',{'aria-label':i._("hashtag"),className:"_58cl"},k.substring(0,1)),c('React').createElement('span',{className:"_58cm"},k.substring(1)))}else{var aa=[];if(q.weakreference)aa.push(c('React').createElement('i',{key:'weakreference',className:'UFIWeakReferenceIcon'}));aa.push(k);if(q.noncoworker)aa.push(c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}));if(q.dialogurl){s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,ajaxify:q.dialogurl,rel:'dialog',href:{url:w.toString(),shimhash:x},target:r}),aa)}else s=c('React').createElement(c('Link.react'),babelHelpers['extends']({},z,{className:t,dir:u,href:{url:w.toString(),shimhash:x},target:r}),aa);}return s}f.exports=j}),null);
__d('TextDelightRange.react',['cx','Bootloader','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.componentDidMount=function(){if(this.props.campaignID)c('Bootloader').loadModules(["TextDelightController"],function(l){return l.attachClickListener(this.$TextDelightRange1,this.props.campaignID,'comment')}.bind(this),'TextDelightRange.react');};k.prototype.render=function(){return c('React').createElement('span',{className:"_ezo",style:this.props.style,ref:function(l){this.$TextDelightRange1=l}.bind(this),role:'presentation'},this.props.children)};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('URITruncator',['fbt','URI'],(function a(b,c,d,e,f,g,h){var i=3,j=h._("..."),k=j.length||j.toString().length;function l(m,n){if(!m||n===undefined||m.length<=n||n<=k||m.toString().length<=k)return m;if(!c('URI').isValidURI(m))return m.substring(0,n-k)+j;var o=new (c('URI'))(m),p=o.getOrigin();if(p.length>n-k)return p.substring(0,n-k)+j;var q=false;if(!!o.getFragment()){q=true;o.setFragment('');if(o.toString().length<=n-k)return o.toString()+j;}var r=o.getQueryData();if(r){var s=Object.keys(r);if(s.length>0){q=true;for(var t=s.length-1;t>=0;t--){o.removeQueryData(s[t]);if(o.toString().length<=n-k)return o.toString()+j;}}}var u=o.getPath()+(q?j:''),v=u.split('/'),w=p.length+u.length-n,x=0;while(w>0&&v.length>x+1){var y=x+1,z=v[y];if(w+k+i<=z.length){var aa=z.length-1,ba=z.length-w-k,ca=/[a-zA-Z0-9]/;w+=k;while(w>0){while(aa>0&&ca.test(z[aa])){aa--;w--}while(aa>0&&!ca.test(z[aa])){aa--;w--}}if(aa===0)aa=ba-1;v[y]=z.substring(0,aa+1)+j}else{x++;w-=z.length;if(x===1){w+=k}else w--;}}if(x>0){if(v[v.length-1].length===0&&v.length===x+2)x++;v.splice(1,x,j)}var da=p+v.join('/');if(da.length>n)da=da.substring(0,n-k)+j;return da}f.exports=l}),null);
__d('VideoTimestampsClicksWWWTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:VideoTimestampsClicksWWWLoggerConfig',this.$VideoTimestampsClicksWWWTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$VideoTimestampsClicksWWWTypedLogger1={};return this};h.prototype.updateData=function(j){this.$VideoTimestampsClicksWWWTypedLogger1=babelHelpers['extends']({},this.$VideoTimestampsClicksWWWTypedLogger1,j);return this};h.prototype.setCommentID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.comment_id=j;return this};h.prototype.setIsContentTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.is_content_timestamp=j;return this};h.prototype.setLocalCommentFeedbackID=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.local_comment_feedback_id=j;return this};h.prototype.setVC=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.vc=j;return this};h.prototype.setVideoTimestamp=function(j){this.$VideoTimestampsClicksWWWTypedLogger1.video_timestamp=j;return this};var i={comment_id:true,is_content_timestamp:true,local_comment_feedback_id:true,vc:true,video_timestamp:true};f.exports=h}),null);
__d('transformTextRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){var h=function i(j,k,l){if(!j||!k||!l)return j;k.sort(function(s,t){return s.offset-t.offset});var m=0;for(var n=0;n<k.length;n++){k[n].offset+=m;var o=c('UnicodeUtils').substr(j,k[n].offset,k[n].length),p=c('UnicodeUtils').strlen(o),q=l(o,k[n]),r=c('UnicodeUtils').strlen(q);if(o!==q){j=c('UnicodeUtils').substr(j,0,k[n].offset)+q+c('UnicodeUtils').substr(j,k[n].offset+k[n].length);k[n].length=r;m+=r-p}}return j};f.exports=h}),null);
__d('UFICommentUtils',['HovercardLinkInterpolator','React','TextDelightRange.react','UFIConstants','UFIVideoPlayerRegistry','URI','URITruncator','VideoTimestampsClicksWWWTypedLogger','transformTextRanges'],(function a(b,c,d,e,f,g){'use strict';var h={getCommentTextWithTruncatedURIs:function i(j,k){if(c('UFIConstants').commentURLTruncationLength)if(j&&j.length>0)k=c('transformTextRanges')(k,j,function(l,m){var n=m.entity&&(m.entity.external||m.entity.__type__&&m.entity.__type__.name==='ExternalUrl');return n?c('URITruncator')(l,c('UFIConstants').commentURLTruncationLength):l});return k},getCommentBodyInterpolator:function i(j,k,l,m){return function(n,o){var p;if(o.videoTimestamp){if(m)return c('React').createElement('span',null,o.entity);var q=function t(u){u.preventDefault();new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(o.integerTimestamp).setCommentID(l).setIsContentTimestamp(false).log();if(k){c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp);c('UFIVideoPlayerRegistry').scrollToAvailableVideo(k)}return false};return c('React').createElement('a',{className:'TimestampLink',onClick:q,href:'#'},o.entity)}else if(o.sphericalViewport){var r=function t(u){u.preventDefault();if(k)c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});return false};return c('React').createElement('a',{onClick:r,href:'#'},o.entity)}else if(o.sphericalViewportAndTimestamp){var s=function t(u){u.preventDefault();if(k){c('UFIVideoPlayerRegistry').setAvailableVideoPlayerControllerSphericalViewport(k,{yaw:o.yaw,pitch:o.pitch});c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(k,o.integerTimestamp)}return false};return c('React').createElement('a',{onClick:s,href:'#'},o.entity)}else if(o.campaign){var p=function(){var t={};if(o.campaign.delight_styles)o.campaign.delight_styles.forEach(function(u){var v=u.style.replace(/-([a-z])/gi,function(w,x,y,z){return x.toUpperCase()});t[v]=u.value});return {v:c('React').createElement(c('TextDelightRange.react'),{style:t,campaignID:o.campaign.id},n)}}();if(typeof p==="object")return p.v;}else return c('HovercardLinkInterpolator')(n,o,'_blank',j,'ufi');}},shallowCopyRanges:function i(j){if(!j)return j;var k=[];j.forEach(function(l){k.push(babelHelpers['extends']({},l))});return k},annotateProfileURIIfPublic:function i(j,k){if(!j)return k;return new (c('URI'))(k).addQueryData('rc','p').toString()},shouldShowTranslateAll:function i(j,k,l,m){if(!j)return false;var n=0,o=void 0,p=void 0;for(var q=0;q<j.length;q++){o=j[q];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;if(l[o.id]){p=k?k[o.id]:[];for(var r=0;r<p.length;r++){o=p[r];if(o.istranslatable&&!o.translationdata&&!m[o.id])n++;if(n>1)return true;}}}return false}};f.exports=h}),null);
__d('IntlLang',['UnicodeBidi'],(function a(b,c,d,e,f,g){'use strict';var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null}var k={getLang:j};f.exports=k}),null);
__d('findSplitPointForText',[],(function a(b,c,d,e,f,g){function h(i,j,k){var l=null,m=i.split('\n');if(j&&i.length>j)l=j;if(k&&m.length>k){var n=m.slice(0,k).join('\n').length;if(l!==null){l=Math.min(n,l)}else l=n;}return l}f.exports=h}),null);
__d('partitionTextAndRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){function h(k,l){var m=k.offset+k.length;return l>k.offset&&l<m}function i(k,l){for(var m=0;m<k.length;m++){var n=k[m];if(h(n,l))return n.offset;}return l}var j=function k(l,m,n){var o=[],p=[],q=i(m,n);for(var r=0;r<m.length;r++){var s=m[r];if(s.offset<q){o.push(s)}else p.push(babelHelpers['extends']({},s,{offset:s.offset-q}));}return {before:{ranges:o,text:c('UnicodeUtils').substr(l,0,q)},after:{ranges:p,text:c('UnicodeUtils').substr(l,q)}}};f.exports=j}),null);
__d('TruncatedTextWithEntities.react',['fbt','React','SeeMore.react','TextWithEntities.react','findSplitPointForText','partitionTextAndRanges'],(function a(b,c,d,e,f,g,h){var i,j,k=30;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$TruncatedTextWithEntities1=function(r){if(!this.props.allowSeeMoreLinebreakOnLongWords||!r)return false;if(r.length<=k)return false;var s=/(^|\s)(\S+)$/,t=s.exec(r),u=t?t[2]:null;return !!(u&&u.length>k)}.bind(this),n}l.prototype.render=function(){'use strict';var m=this.props.text||'',n=this.props.ranges||[];m=m.replace(/\s*$/,'');var o=this.props.maxLines,p=this.props.maxLength;if(p&&m.length>p){var q=this.props.truncationPercent||.6;p=Math.floor(q*p)}var r=null;if(!this.props.shouldExpand)r=c('findSplitPointForText')(m,p,o);if(r!==null){while(m[r-1]==='\n')r--;var s=c('partitionTextAndRanges')(m,n,r),t=c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:s.before.ranges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:s.before.text});if(!this.props.showSeeMore)return c('React').createElement('span',{className:this.props.className,'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},t,c('React').createElement('span',null,h._("...")));var u=this.$TruncatedTextWithEntities1(s.before.text);return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('SeeMore.react'),{allowSeeMoreLinebreak:u,className:this.props.className,clickCallback:this.props.markViewerHasInteracted},t,c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,interpolator:this.props.interpolator,ranges:s.after.ranges,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:s.after.text})))}else return c('React').createElement('span',{'data-ft':this.props['data-ft'],dir:this.props.dir,lang:this.props.lang},c('React').createElement(c('TextWithEntities.react'),{aggregatedRanges:this.props.aggregatedRanges,className:this.props.className,imageRanges:this.props.imageRanges,interpolator:this.props.interpolator,ranges:n,textDelightRanges:this.props.textDelightRanges,renderEmoji:this.props.renderEmoji,renderEmoticons:this.props.renderEmoticons,text:m}));};l.defaultProps={showSeeMore:true};f.exports=l}),null);
__d('UFICommentBody.react',['cx','IntlLang','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UFICommentUtils','UFIConfig','UFIConstants','UnicodeBidi'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),p=c('UnicodeBidi').isDirectionLTR(n),q=!p,r=p&&c('Locale').isRTL()?'ltr':q&&!c('Locale').isRTL()?'rtl':null,s=c('IntlLang').getLang(n),t=c('UFICommentUtils').getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,!!m.isLiveStreaming),u=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:t,ranges:m.commentRanges,textDelightRanges:m.textDelightRanges,text:n,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:true,shouldExpand:this.props.shouldExpand});if(m.socialContext){u=c('React').createElement('div',{key:'body'},u)}else{var v=(p&&c('Locale').isRTL()?"_5wjy":'')+(p&&c('Locale').isRTL()?' '+"_5wjz":'')+(q&&!c('Locale').isRTL()?' '+"_5wj-":'')+(q&&!c('Locale').isRTL()?' '+"_5wj_":'');u=v?c('React').createElement('div',{key:'body',className:v},u):[' ',u]}return c('React').createElement('span',null,u)};function l(){i.apply(this,arguments)}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,textDelightRanges:k.array,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.oneOfType([k.string,k.number]),isLiveStreaming:k.bool,shouldExpand:k.bool};f.exports=l}),null);
__d('XUIEditButton.react',['cx','fbt','XUIAbstractGlyphButton.react','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip)n=m;return c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{label:m,title:n,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center','data-tooltip-content':this.props.tooltip,className:c('joinClasses')(this.props.className,"_5upq _5upr")}))};function l(){'use strict';j.apply(this,arguments)}l.defaultProps={label:i._("Edit")};f.exports=l}),null);
__d('UFICommentDisabledNotice.react',['cx','React','TextWithEntities.react','linkifyEntityRange'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.feedback,n=m.commentdisablednotice;if(m.isviewermuted)n=m.mutednotice;if(m.arecommentsdisabled)n=m.commentdisablednotice;var o=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:c('linkifyEntityRange'),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return c('React').createElement('div',{className:"UFIRow _4204 _2o9m _4oep"},o)};function l(){i.apply(this,arguments)}l.propTypes={feedback:k.object.isRequired};f.exports=l}),null);
__d('UFICommentFilters',['UFIConstants'],(function a(b,c,d,e,f,g){'use strict';var h={getAuthors:function i(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k},[])},isDeleted:function i(j){return j.status===c('UFIConstants').UFIStatus.DELETED},isSpam:function i(j){return j.status===c('UFIConstants').UFIStatus.SPAM},collectSpamBuckets:function i(j,k){var l=j.reduce(function(m,n){if(h.isSpam(n)){if(m.spamBucket){m.spamBucket.spamCommentIDs.push(n.id);m.collected.push(null)}else{m.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:n.id,spamCommentIDs:[n.id]};m.collected.push(m.spamBucket)}}else if(n.isAnnouncement||k[n.author]){m.spamBucket=null;m.collected.push(n)}return m},{spamBucket:null,collected:[]});return l.collected}};f.exports=h}),null);
__d('UFICommentHeader.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments"))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('UFICommentListVisibilityTracker.react',['cx','Arbiter','DOMQuery','OnVisible.react','React','ReactDOM','SubscriptionsHandler','UFICommentVPVD','UFIConfig','UFIInstanceAction','UFISharedDispatcher','UFIVisibility'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').Children,l=c('React').Component,m=c('React').PropTypes,n=c('UFIConfig').commentVPVD;i=babelHelpers.inherits(o,l);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.onVisible=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:true});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').VISIBLE))}.bind(this);this.onHidden=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:false});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').HIDDEN))}.bind(this);this.$UFICommentListVisibilityTracker1=new (c('SubscriptionsHandler'))()}o.prototype.componentDidMount=function(){if(this.$UFICommentListVisibilityTracker2()&&this.props.contextArgs.location==='conversation_nub')this.$UFICommentListVisibilityTracker1.addSubscriptions(c('Arbiter').subscribe('ConversationNubUtils/recheckTabVisibility',function(p,q){var r=q||{},s=r.tab,t=s&&s.getRootDOM(),u=this.refs.onVisibleRoot,v=u&&c('ReactDOM').findDOMNode(u);if(t&&u&&v&&c('DOMQuery').contains(t,v))u.check();}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$UFICommentListVisibilityTracker1.release()};o.prototype.shouldComponentUpdate=function(p,q){if(!n.debug_html&&this.state.isVisible!==q.isVisible)return false;return true};o.prototype.$UFICommentListVisibilityTracker2=function(){return !!c('UFIConfig').enableCommentListVisibilityTracking||c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs)};o.prototype.render=function(){var p=k.only(this.props.children);if(!this.$UFICommentListVisibilityTracker2())return p;var q=n.debug_html;return c('React').createElement('div',{'data-debugstate':q?this.state.isVisible?'partially visible':'hidden':null,className:"_3b-9"+(q?' '+"_3b-a":'')+(q&&this.state.isVisible?' '+"_3b-b":'')+(q&&!this.state.isVisible?' '+"_3b-c":'')},c('React').createElement(c('OnVisible.react'),{ref:'onVisibleRoot',onVisible:this.onVisible,onHidden:this.onHidden},p))};o.propTypes={contextArgs:m.shape({instanceid:m.string.isRequired,location:m.string}).isRequired};f.exports=o}),null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Children;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.scrollcomments,o=l.scrollwidth;if(n&&o)return c('React').createElement(c('ScrollableArea.react'),{width:o},j.only(m));return j.only(m)};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d('CommentsTimeSpentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$CommentsTimeSpentTypedLogger1={};return this};h.prototype.updateData=function(j){this.$CommentsTimeSpentTypedLogger1=babelHelpers['extends']({},this.$CommentsTimeSpentTypedLogger1,j);return this};h.prototype.setEndTime=function(j){this.$CommentsTimeSpentTypedLogger1.end_time=j;return this};h.prototype.setOrderingMode=function(j){this.$CommentsTimeSpentTypedLogger1.ordering_mode=j;return this};h.prototype.setPostFbid=function(j){this.$CommentsTimeSpentTypedLogger1.post_fbid=j;return this};h.prototype.setStartTime=function(j){this.$CommentsTimeSpentTypedLogger1.start_time=j;return this};h.prototype.setTimeSpentID=function(j){this.$CommentsTimeSpentTypedLogger1.time_spent_id=j;return this};h.prototype.setViewerHasInteracted=function(j){this.$CommentsTimeSpentTypedLogger1.viewer_has_interacted=j;return this};var i={end_time:true,ordering_mode:true,post_fbid:true,start_time:true,time_spent_id:true,viewer_has_interacted:true};f.exports=h}),null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','CommentsTimeSpentTypedLogger','Event','OnVisible.react','React','SubscriptionsHandler','TimeSlice','UFIOrderingModeStore','UserActivity','pageID','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{contextArgs:i.object.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function k(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000}},render:function k(){return c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children)},startInterval:function k(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer()}},finishInterval:function k(){var l=c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var m=this._getTimeInSeconds();if(m>this.firstVisibleTime)new (c('CommentsTimeSpentTypedLogger'))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(l).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(m).setTimeSpentID(c('pageID')).log();this.firstVisibleTime=0}},componentWillReceiveProps:function k(){this.finishInterval()},componentDidMount:function k(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility))},componentWillUnmount:function k(){this.finishInterval();this.listeners.release()},componentDidUpdate:function k(){this._checkVisibility()},_getTimeInSeconds:function k(){return Math.floor(Date.now()/1000)},_checkVisibility:function k(){if(this.isMounted()){this.refs.onVisibleElement!==null||h(0);this.refs.onVisibleElement.reset()}},_checkForIdleViewer:function k(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){c('setTimeout')(c('TimeSlice').guard(function(){this._checkForIdleViewer()}.bind(this),'CommentsTimeSpentTracker checkForIdleViewer',{isContinuation:false}),this.props.pollViewerActivityIntervalMillis)}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this))}}});f.exports=j}),null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i;function j(l){var m=false;return function(){if(!m){l();m=true}}}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this))}k.prototype.render=function(){if(this.state.seen)return this.props.children;return c('React').createElement(c('OnVisible.react'),{onVisible:this.$UFISeenTracker1},this.props.children)};k.prototype.logSeen=function(){c('setTimeout')(function(){return this.setState({seen:true})}.bind(this),100);c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client')};k.defaultProps={children:null};f.exports=k}),null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFIConfig','UFISeenTracker.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.contextArgs,o=l.feedback,p=l.hasComments,q=l.isPermalink,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c('React').createElement('div',null,m);if(p&&c('UFIConfig').logCommentsTimespent){var t=r||q;s=c('React').createElement(c('CommentsTimeSpentTracker.react'),{contextArgs:n,viewerHasInteracted:t,targetFBID:o.commentstargetfbid},s)}if(c('UFIConfig').logWhetherUFISeen)s=c('React').createElement(c('UFISeenTracker.react'),null,s);return s};function k(){h.apply(this,arguments)}k.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};k.defaultProps={children:null};f.exports=k}),null);
__d('UFIComponents',['React','UFICommentFilters'],(function a(b,c,d,e,f,g){'use strict';var h=function k(l){if(!l)return false;if(l.props.comment&&c('UFICommentFilters').isDeleted(l.props.comment))return false;return true},i=function k(l,m,n){var o=void 0,p=n?l.length-1:0,q=n?-1:l.length,r=n?-1:1;for(o=p;o!=q;o+=r)if(h(l[o])){m(l,o);return l}return l},j={applyToUFIComponents:function k(l,m,n){l=i(l,function(o,p){if(o[p])o[p]=c('React').cloneElement(o[p],m);},false);l=i(l,function(o,p){if(o[p])o[p]=c('React').cloneElement(o[p],n);},true);return l}};f.exports=j}),null);
__d('UFILikeSentenceText.react',['cx','ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;function l(n,o,p,q){if(q.count!=null){var r=c('ProfileBrowserTypes').LIKES,s={id:n.targetfbid,actorid:n.actorid},t=[],u=void 0;for(var v=0;v<o.length;v++)if(!o[v].count){u=o[v];var w=u.entity;t.push(w.id)}var x=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:n.targetfbid,comment_from:n.actorforpost,seen_user_fbids:t.length?t:true});x=c('ActorURI').create(x,n.actorforpost);var y=void 0,z=void 0;if(n.displayreactions){y=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();y=c('ActorURI').create(y,n.actorforpost);z=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();z=c('ActorURI').create(z,n.actorforpost)}else{y=c('ProfileBrowserLink').constructDialogURI(r,s).toString();z=c('ProfileBrowserLink').constructPageURI(r,s).toString()}return c('React').createElement('a',{'data-testid':'n_other_people_link',className:"_375l",rel:'dialog',ajaxify:y,href:z,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),role:'button'},p)}else{var aa={source_feedback_owner_id:n.ownerid,source_feedback_identifier:n.entidentifier};return c('HovercardLinkInterpolator')(p,q,null,null,'ufi',aa)}}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var n=this.props.feedback,o=this.props.likeSentenceData,p=void 0,q=o.aggregatedranges||o.aggregated_ranges;p=l;p=p.bind(null,n,o.ranges);return c('React').createElement(c('TextWithEntities.react'),{interpolator:p,ranges:Object.values(o.ranges),aggregatedRanges:q,text:o.text})};function m(){i.apply(this,arguments)}m.propTypes={contextArgs:k.object.isRequired,feedback:k.object.isRequired,likeSentenceData:k.object.isRequired};f.exports=m}),null);
__d("XUFIReactionTooltipController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}})}),null);
__d('UFIReactionsFacepile.react',['ix','cx','ActorURI','Bootloader','Image.react','React','TooltipLink.react','UFIConfig','UFIConstants','UFIReactionIconImpl.react','UFIReactionsProfileBrowserUtils','XUFIReactionsSocialSentenceTooltipController','XUFIReactionTooltipController','fbglyph'],(function a(b,c,d,e,f,g,h,i){var j,k,l=11,m=7,n=32,o='16';j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){'use strict';k.constructor.call(this,q,r);this.onSentenceClick=function(event){var s=this.props.feedback,t=c('UFIReactionsProfileBrowserUtils').getDialogURI(s).toString();c('Bootloader').loadModules(["AsyncDialog"],function(u){u.bootstrap(t,event.currentTarget,'dialog')},'UFIReactionsFacepile.react');event.preventDefault()}.bind(this)}p.prototype.componentWillMount=function(){'use strict';var q=this.props.context.source,r=c('UFIConstants').UFIFeedbackSourceType.PHOTOS_SNOWLIFT;if(q===r){this.$UFIReactionsFacepile1=m}else this.$UFIReactionsFacepile1=l;};p.prototype.$UFIReactionsFacepile2=function(q){'use strict';var r=q.actorforpost,s=q.entidentifier,t=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(t.getURIBuilder().setString('ft_ent_identifier',s).getURI(),r)}};p.prototype.renderFacepile=function(){'use strict';var q=this.props.feedback,r=q.reactors,s=q.reactioncount||0;if(!r)return null;var t=r;if(s>this.$UFIReactionsFacepile1)t=r.slice(0,this.$UFIReactionsFacepile1-1);return t.map(function(u){return c('React').createElement(c('TooltipLink.react'),{href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),key:u.profilepicsrc,onClick:this.onSentenceClick,position:'above',rel:'ignore',tooltip:u.name},c('React').createElement('div',null,c('React').createElement('div',{className:"_44l5"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n}),c('React').createElement('div',{className:"_44l6"},c('React').createElement(c('UFIReactionIconImpl.react'),{reaction:u.reaction,size:o})))))}.bind(this))};p.prototype.renderMoreLink=function(){'use strict';var q=this.props.feedback,r=q.reactors,s=q.viewerreaction,t=q.reactioncount||0;if(!r||t<=this.$UFIReactionsFacepile1)return null;var u=r[this.$UFIReactionsFacepile1-1],v=void 0;if(c('UFIConfig').reactionsHasTooltipBreakdown){v=t>1}else v=s?t>3:t>2;var w=null;if(v)w=this.$UFIReactionsFacepile2(q);return c('React').createElement('a',{className:"_44l5 _19sm",href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),onClick:this.onSentenceClick,rel:'ignore'},c('React').createElement('span',babelHelpers['extends']({},w,{className:"_44l7"}),c('React').createElement('div',{className:"_3vbb"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n})),c('React').createElement('div',{className:"_44l8"},c('React').createElement(c('Image.react'),{height:o,src:h("114186"),width:o}))))};p.prototype.render=function(){'use strict';return c('React').createElement('li',{className:"_44l9"},this.renderFacepile(),this.renderMoreLink())};f.exports=p}),null);
__d('UFIReactionsSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsFacepile.react','UFIReactionsProfileBrowserUtils','XUFIReactionsSocialSentenceTooltipController','XUFIReactionTooltipController'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onSentenceClick=function(event){if(this.props.reactionsLink)return;var r=this.props.feedback,s=c('UFIReactionsProfileBrowserUtils').getDialogURI(r).toString();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(s,event.currentTarget,'dialog')},'UFIReactionsSocialSentence.react');event.preventDefault()}.bind(this),n}l.prototype.$UFIReactionsSocialSentence1=function(m){'use strict';var n=m.actorforpost,o=m.entidentifier,p=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(p.getURIBuilder().setString('ft_ent_identifier',o).getURI(),n)}};l.prototype.render=function(){'use strict';var m=this.props.feedback,n=this.props.contextArgs,o=m.likesentences,p=m.reactors,q=m.reactioncountreduced,r=m.reactionsentences,s=m.showblingbarfeedback,t=m.viewerreaction,u=m.reactioncount||0,v=t?u>3:u>2;if(c('UFIConfig').reactionsHasTooltipBreakdown)v=u>1;var w=null;if(v)w=this.$UFIReactionsSocialSentence1(m);var x=null;if(r&&r.current){x=r.current.text}else if(o&&o.current){x=o.current.text}else x=q;var y=m!==null&&s&&n.isPermalink,z=null;if(x)z=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',w,x));var aa=null,ba=null;if(u){if(y&&!z)ba=i._("people reacted to this");aa=c('React').createElement('span',{'aria-hidden':!!z,className:"_1g5v"},c('React').createElement('span',w,q,' ',ba))}var ca=c('UFIReactionsProfileBrowserUtils').getPageURI(m);if(this.props.reactionsLink)ca=this.props.reactionsLink;var da=c('React').createElement('a',{className:"_2x4v",href:ca,onClick:this.onSentenceClick,rel:'ignore'},aa,z),ea=null,fa=null;if(y&&p){ea=c('React').createElement(c('UFIReactionsFacepile.react'),{feedback:m,context:n})}else{var ga=c('UFIConfig').reactionsDirectReactTokensModule?c('UFIConfig').reactionsDirectReactTokensModule:c('UFIReactionsBlingTokens.react');fa=c('React').createElement(ga,{className:"_4ar- _ipn",contextArgs:n,showCounts:c('UFIConfig').reactionsHasDirectReactTokensCounts,feedback:m,max:3},da)}return c('React').createElement('div',{className:"_1vaq"},ea,c('React').createElement('div',{className:"_ipp"},y?da:fa))};f.exports=l}),null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}})}),null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}})}),null);
__d('UFILikeSentence.react',['cx','fbt','invariant','ActorURI','Bootloader','LeftRight.react','React','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','intlSummarizeNumber','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=null;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},q}o.rendersSocialSentence=function(p){var q=p.feedback,r=p.contextArgs,s=q.likesentences,t=q.reactionsentences;if(r.hideSocialSentence)return false;return s&&!c('isEmpty')(s.current)||t&&t.current&&t.current.text};o.prototype.componentWillMount=function(){this.$UFILikeSentence1(this.props)};o.prototype.componentWillReceiveProps=function(p){this.$UFILikeSentence1(p)};o.prototype.$UFILikeSentence1=function(p){if(p.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!p.contextArgs.entstream||j(0);c('Bootloader').loadModules(["UFIOrderingModeSelectorContainer.react"],function(q){n=q;this.setState({hasSelectorModule:true})}.bind(this),'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true})}};o.prototype.$UFILikeSentence2=function(){var p=this.props.feedback,q=p.likesentences,r=q||{},s=r.current;return s||{}};o.prototype.$UFILikeSentence3=function(){var p=this.props,q=p.feedback,r=p.contextArgs;if(!this.constructor.rendersSocialSentence(p))return null;if(r.hasReactions)return c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:q,contextArgs:r});var s=this.$UFILikeSentence2();if(s&&s.text)return c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:r,feedback:q,likeSentenceData:s}));return null};o.prototype.$UFILikeSentence4=function(){var p=this.props,q=p.contextArgs,r=p.commentCounts;if(!q.showCommentHeader)return null;var s=void 0,t=r[q.ftentidentifier];if(t){t=c('intlSummarizeNumber')(t);s=i._("Comments ({commentCount})",[i.param('commentCount',t)])}else s=i._("Comments");return c('React').createElement('div',{className:"_4bsb"},s)};o.prototype.renderOrderingModeSelector=function(){if(!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!n)return null;return c('React').createElement(n,{key:'orderingmodeselector',contextArgs:this.props.contextArgs,feedback:this.props.feedback})};o.prototype.renderSeenState=function(){var p=this.props.feedback;if(!p.seencount||p.seencount===0||this.props.contextArgs.entstream)return null;var q=null;if(p.seenbyall){if(p.seencount==1){q=i._("Seen by both of you")}else q=i._("Seen by everyone");}else q=p.seencount==1?i._("Seen by 1"):i._("Seen by {count}",[i.param('count',p.seencount)]);var r=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:p.entidentifier}),s=c('ActorURI').create(c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost),t=c('ActorURI').create(c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost);return c('React').createElement('a',{key:'seenstate',rel:'dialog',ajaxify:s,href:t,'data-hovercard':r.toString(),className:"UFISeenCount"+(' '+"UFISeenCountRight")},c('React').createElement('span',{className:'UFISeenCountIcon'}),q)};o.prototype.render=function(){var p=this.$UFILikeSentence3(),q=[this.renderSeenState(),this.renderOrderingModeSelector()].filter(function(t){return t!==null}),r=null;if(q.length===1){r=q[0]}else if(q.length>1)r=c('React').createElement('div',{className:"_oql"},q);if(!p){p=this.$UFILikeSentence4();if(!p&&r)p=c('React').createElement('div',null);}var s=null;if(p){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r)}else s=r;return c('React').createElement('div',{className:c('joinClasses')("UFIRow"+(this.props.feedback.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":''))},s)};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,commentCounts:m.object,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o}),null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFIConfig','UFILiveTypingStore'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false}}k.getStores=function(){return [c('UFILiveTypingStore')]};k.calculateState=function(l,m){if(!c('UFIConfig').typingIndicator.showInline)return {everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c('UFILiveTypingStore').getState()[m.feedbackTargetID];return {everHadTyping:(l||{}).everHadTyping||n,hasTyping:n,friendTyping:c('UFILiveTypingStore').isFriendTyping(m.feedbackTargetID)}};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping};k.prototype.render=function(){if(this.state.everHadTyping)return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))});return null};f.exports=c('FluxContainer').create(k,{pure:false,withProps:true})}),null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.onPagerClick=function(q){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();q.nativeEvent.prevent()}.bind(this),m}k.prototype.render=function(){var l=this.onPagerClick,m=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),n=null;if(this.props.isLoading)n=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var o=c('React').createElement('a',{className:'UFIPagerLink',onClick:l,href:'#',role:'button'},this.props.pagerLabel,n),p="fcg"+(' '+"UFIPagerCount"),q=c('React').createElement('span',{className:p},this.props.countSentence),r=void 0;if(this.props.contextArgs.entstream||!this.props.isReply){r=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},o,q)}else r=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:l,href:'#',role:'button'}),o,q);return c('React').createElement('div',{className:m,'data-ft':this.props['data-ft']},r)};f.exports=k}),null);
__d('UFIPagerLabel',['fbt','NumberFormat','intlList'],(function a(b,c,d,e,f,g,h){'use strict';function i(k){return c('NumberFormat').formatInteger(k.count)}var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',VIEW_PREVIOUS_EXPLICIT:'view_previous_explicit',_getReplyLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 reply");case j.VIEW_ONE_MORE:return h._("View 1 more reply");case j.VIEW_ALL:return h._({"*":"View all {count} replies"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more replies","_1":"View {count} more reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more replies");case j.VIEW_PREVIOUS:return h._("View previous replies");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous replies","_1":"View {count} previous reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);default:return null;}},_getCommentLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 comment");case j.VIEW_ONE_MORE:return h._("View 1 more comment");case j.VIEW_ALL:return h._({"*":"View all {count} comments"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more comments","_1":"View {count} more comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more comments");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous comments","_1":"View {count} previous comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function k(l,m){var n=c('intlList')(m.commenters),o=m.othersCount,p=c('NumberFormat').formatInteger(o);switch(l){case j.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case j.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case j.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',i(m),[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_PREVIOUS:case j.VIEW_PREVIOUS_EXPLICIT:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}default:return null;}},_getQuestionLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 question");case j.VIEW_ONE_MORE:return h._("View 1 more question");case j.VIEW_ALL:return h._({"*":"View all {count} questions"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more questions","_1":"View {count} more question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more questions");case j.VIEW_PREVIOUS:return h._("View previous questions");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous questions","_1":"View {count} previous question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);default:return null;}},_getAnswerLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 answer");case j.VIEW_ONE_MORE:return h._("View 1 more answer");case j.VIEW_ALL:return h._({"*":"View all {count} answers"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more answers","_1":"View {count} more answer"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_MORE:return h._("View more answers");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous answers","_1":"View {count} previous answer"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count)]);case j.VIEW_PREVIOUS:return h._("View previous answers");default:return null;}},getLabel:function k(l,m,n,o,p){if(m){return j._getReplyLabel(l,p)}else if(n){return j._getQuestionLabel(l,p)}else if(o){return j._getAnswerLabel(l,p)}else{if(p.commenters)return this._getCommentLabelWithCommentSentence(l,p);return j._getCommentLabel(l,p)}}};f.exports=j}),null);
__d('UFIPagerGenerator',['fbt','NumberFormat','React','TrackingNodes','UFIConstants','UFIOrderingModeStore','UFIPager.react','UFIPagerLabel','UFIRange'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UFIConstants').UFIPaging,j={isBottomPager:function k(l,m){return c('UFIOrderingModeStore').isInverted(m)&&!l},needsStartOfRangePager:function k(l){return l>0},renderPagers:function k(l){var m,n,o,p=l.commentCount,q=l.contextArgs,r=l.currentLength,s=l.currentOffset,t=l.deletedCount,u=l.feedback,v=l.onPageCallback,w=l.orderingMode,x=l.range,y=l.targetID,z=p-t,aa=r-t,ba=y!==q.ftentidentifier,ca=this.isBottomPager(ba,w),da={topPager:null,bottomPager:null},ea=false;if(q.isaskquestion)ea=q.isaskquestion;var fa=x.isLoadingPrev(),ga=x.isLoadingNext(),ha={count:0},ia=u.commentsentenceinfo;if(ia){ha.commenters=ia.explicit_commenter_names;ha.othersCount=ia.other_commenter_count}var ja=s+r==p;if(p<q.pagesize&&ja||aa===0){var m=function(){var ma=Math.min(p,q.pagesize),na=function sa(){return v(ca?i.BOTTOM:i.TOP,new (c('UFIRange'))(p-ma,ma))},oa=void 0;if(aa===0){if(z==1){oa=c('UFIPagerLabel').VIEW_ONE}else{ha.count=z;oa=c('UFIPagerLabel').VIEW_ALL}}else if(z-aa==1){oa=c('UFIPagerLabel').VIEW_ONE_MORE}else{oa=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ha.count=z-aa}var pa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS),qa=c('UFIPagerLabel').getLabel(oa,ba,Boolean(u.isqanda),Boolean(ea),ha),ra=c('React').createElement(c('UFIPager.react'),{key:'allPager'+y,ref:ca?'topLevelBottomPager':null,contextArgs:q,isUnseen:u.hasunseencollapsed,isLoading:ca?ga:fa,isReply:ba,pagerLabel:qa,onPagerClick:na,'data-ft':pa});if(ca){da.bottomPager=ra}else da.topPager=ra;return {v:da}}();if(typeof m==="object")return m.v;}var ka=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,ba,Boolean(u.isqanda),Boolean(ea),ha),la=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,ba,Boolean(u.isqanda),Boolean(ea),ha);if(this.needsStartOfRangePager(s))(function(){var ma=Math.max(s-q.pagesize,0),na=s+r-ma,oa=void 0;if(!ba||aa>1){var pa=c('NumberFormat').formatInteger(aa),qa=c('NumberFormat').formatInteger(z);oa=h._("{countshown} of {totalcount}",[h.param('countshown',pa),h.param('totalcount',qa)])}var ra=function sa(){return v(ca?i.BOTTOM:i.TOP,new (c('UFIRange'))(ma,na))};if(ca){da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+y,ref:!ba?'topLevelBottomPager':null,contextArgs:q,isLoading:fa,isReply:ba,pagerLabel:ka,onPagerClick:ra,countSentence:oa})}else da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+y,contextArgs:q,isLoading:fa,isReply:ba,pagerLabel:la,onPagerClick:ra,countSentence:oa});})();if(s+r<p)(function(){var ma=Math.min(r+q.pagesize,p-s),na=function oa(){return v(ca?i.TOP:i.BOTTOM,new (c('UFIRange'))(s,ma))};if(ca){da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+y,contextArgs:q,isLoading:ga,isReply:ba,pagerLabel:la,onPagerClick:na})}else da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!ba?'topLevelBottomPager':null,contextArgs:q,isLoading:ga,isReply:ba,pagerLabel:ka,onPagerClick:na});})();return da}};f.exports=j}),null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','Middot.react','NumberFormat','React','Timestamp.react','UFIImageBlock.react','WebCommentViewOption','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=43200;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.isLoading?"UFIReplySocialSentenceLoading":'',o=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),p=void 0,q=void 0,r=c('NumberFormat').formatInteger(this.props.replies);if(this.props.isExpanded){p=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',r,[0,this.props.replies])]):i._("Hide 1 Reply")}else{p=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',r,[0,this.props.replies])]):i._("1 Reply");var s=this.props.timestamp;if(s){var t=c('LiveTimer').getApproximateServerTime()/1000-s.time;if(t<l||this.props.orderingMode==c('WebCommentViewOption').RECENT_ACTIVITY)q=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:s.time,text:s.text,verbose:s.verbose}));}}var u=this.props.author,v=null,w=void 0;if(u&&!this.props.isExpanded){v=c('React').createElement(c('Image.react'),{alt:'',src:u.thumbSrc,className:"img UFIActorImage _54ru"});var x=null;if(this.props.showVerified)x=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(u.i18nGender){w=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',u.name,[1,u.i18nGender]),i.param('verified_badge',x)])]}else w=[i._("{author}{verified_badge} replied",[i.param('author',u.name),i.param('verified_badge',x)])];w.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),p)}else w=p;var y=u&&!this.props.isExpanded;return c('React').createElement('div',{className:o,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(y?"UFIReplyActorPhotoWrapper":'')+(y?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(y?' '+"UFIIconWithActor":'')}),v),c('React').createElement('span',{className:n},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},w),q))))};function m(){j.apply(this,arguments)}f.exports=m}),null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){if(this.props.isLoading)return c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'})));return c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._("{count} hidden",[h.param('count',this.props.numHidden)]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'}))))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state={isLoading:true,numHidden:0,onClick:function p(){}},l}j.getStores=function(){return [c('UFISpamStore')]};j.calculateState=function(k,l){var m=l.contextArgs,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function q(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p))}}};j.prototype.shouldComponentUpdate=function(k,l){return k.contextArgs!=this.props.contextArgs||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state)};f.exports=c('FluxContainer').create(j,{pure:false,withProps:true})}),null);
__d('UFITranslateAllRow.react',['cx','ContentTranslationStrings','Link.react','React','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$UFITranslateAllRow1=function(){c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').translateAll(this.props.contextArgs))}.bind(this),m}k.prototype.render=function(){return c('React').createElement('div',{className:"UFIRow"},c('React').createElement('div',{className:"_4upo"},c('React').createElement(c('Link.react'),{onClick:this.$UFITranslateAllRow1},c('ContentTranslationStrings').TRANSLATE_ALL_TEXT)))};f.exports=k}),null);
__d('StaticUFI.react',['csx','cx','invariant','Arbiter','BanzaiODS','BlueBar','BootloadOnRender.react','DOM','Event','FbFeedCommentUFIScroller','FluxContainer','JSLogger','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','SubscriptionsHandler','TrackingNodes','UFIAcceptedAnswerStore','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentDisabledNotice.react','UFICommentEditIDStore','UFICommentFilters','UFICommentHeader.react','UFICommentListVisibilityTracker.react','UFIComments','UFICommentScrollableArea.react','UFICommercialBreakStore','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInteractionStore','UFILikeSentence.react','UFILivePinnedCommentStore','UFILiveTypingIndicatorContainer.react','UFILocallyComposedCommentStore','UFIOrderingModeStore','UFIPagerGenerator','UFIPaging','UFIPlayLiveVODHighlightsStore','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','UFITranslateAllRow.react','URI','XUISpinner.react','distinctArrayBy','emptyFunction','getElementPosition','getElementRect','getUnboundedScrollPosition','ifRequired','shallowEqual','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('UFIConfig').UFICommentFilterFallbackWarning||null,n=c('UFIConstants').UFIFeedbackSourceType,o=c('UFIConstants').UFIPayloadSourceType,p=c('UFIConstants').UFIStatus,q=c('React').PropTypes,r=c('JSLogger').create('StaticUFI'),s=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),t=c('React').createElement('div',{className:"_xtv _32k4",role:'presentation'},c('React').createElement('i',null));k=babelHelpers.inherits(u,c('React').Component);l=k&&k.prototype;function u(v){l.constructor.call(this,v);this.loadMoreComments=function(){if(this.$StaticUFI1&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var x=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),y=c('getUnboundedScrollPosition')(window).y,z=y+(document.documentElement?document.documentElement.clientHeight:0)+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(x instanceof HTMLElement&&x.offsetHeight&&x.offsetTop<z)this.refs.topLevelBottomPager.props.onPagerClick();}}.bind(this);this.onComment=function(){var x=c('ReactDOM').findDOMNode(this),y=null,z=null;if(x instanceof Node){y=c('Parent').byTag(x,'form');z=c('Parent').bySelector(x,"._3g6d")}var aa=[function(){return this.refs.toplevelcomposer}.bind(this),function(){return this.$StaticUFI38(y)}.bind(this),function(){return this.$StaticUFI38(z)}.bind(this)],ba=aa.reduce(function(ca,da){return ca||da()},null);if(ba){ba.focus();c('FbFeedCommentUFIScroller').reveal(c('ReactDOM').findDOMNode(ba))}}.bind(this);var w=this.props.focusReply;this.state={acceptedAnswerState:{type:'NoneAccepted'},focusReply:w,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false,editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid),localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.contextArgs.instanceid),inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid),isPlayingLiveVODHighlights:c('UFIPlayLiveVODHighlightsStore').getValueFor(this.props.contextArgs.instanceid)}}u.getStores=function(){return [c('UFIAcceptedAnswerStore')]};u.calculateState=function(v,w){var x=w.contextArgs,y=w.feedback,z=c('UFIAcceptedAnswerStore').get(x.ftentidentifier,y.acceptedanswer);return babelHelpers['extends']({},v,{acceptedAnswerState:z})};u.prototype.componentDidMount=function(){this.$StaticUFI1=true;c('Arbiter').inform('UFI/displayDone-'+this.props.contextArgs.instanceid);this.$StaticUFI2=new (c('SubscriptionsHandler'))();if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var v=c('throttle')(this.loadMoreComments,20);this.$StaticUFI2.addSubscriptions(c('Event').listen(window,'scroll',v),c('Event').listen(window,'resize',v))}this.$StaticUFI5();this.$StaticUFI2.addSubscriptions(c('UFICommentEditIDStore').addListener(function(){this.setState({editcommentid:c('UFICommentEditIDStore').getForInstance(this.props.contextArgs.instanceid)})}.bind(this)),c('UFILocallyComposedCommentStore').addListener(function(){this.setState({localCommentIDs:c('UFILocallyComposedCommentStore').getStateForInstance(this.props.contextArgs.instanceid)})}.bind(this)),c('UFICommercialBreakStore').addListener(function(){this.setState({inCommercialBreak:c('UFICommercialBreakStore').getValueFor(this.props.contextArgs.instanceid)})}.bind(this)),c('UFIPlayLiveVODHighlightsStore').addListener(function(){this.setState({isPlayingLiveVODHighlights:c('UFIPlayLiveVODHighlightsStore').getValueFor(this.props.contextArgs.instanceid)})}.bind(this)))};u.prototype.componentWillReceiveProps=function(v){if(this.props.focusReply!==v.focusReply)this.setState({focusReply:v.focusReply});};u.prototype.componentWillUnmount=function(){this.$StaticUFI1=false;this.$StaticUFI2&&this.$StaticUFI2.release()};u.prototype.shouldComponentUpdate=function(v,w){var x=this.props,y=this.state;return !c('shallowEqual')(y,w)||!c('shallowEqual')(y.loadingSpamIDs,w.loadingSpamIDs)||!c('shallowEqual')(y.localCommentIDs,w.localCommentIDs)||!c('shallowEqual')(y.inCommercialBreak,w.inCommercialBreak)||!c('shallowEqual')(x,v)||!c('shallowEqual')(x.feedback,v.feedback)||!c('shallowEqual')(x.repliesMap,v.repliesMap)||!c('shallowEqual')(x.commentCounts,v.commentCounts)||!c('shallowEqual')(x.deletedCounts,v.deletedCounts)||!c('shallowEqual')(x.availableComments,v.availableComments)||!c('shallowEqual')(x.ranges,v.ranges)||!c('shallowEqual')(x.authorProfiles,v.authorProfiles)||!c('shallowEqual')(x.commentPermalinks,v.commentPermalinks)||!c('shallowEqual')(x.canAddCommentMap,v.canAddCommentMap)||!c('shallowEqual')(x.canReplyMap,v.canReplyMap)||!c('shallowEqual')(x.isActiveLoading,v.isActiveLoading)||!c('shallowEqual')(x.allSeenActiveLoadDirectionData,v.allSeenActiveLoadDirectionData)||!c('shallowEqual')(x.repliesExpandedMap,v.repliesExpandedMap)||!c('shallowEqual')(x.loadingTranslationsMap,v.loadingTranslationsMap)||!c('shallowEqual')(y.isPlayingLiveVODHighlights,w.isPlayingLiveVODHighlights)};u.prototype.componentWillUpdate=function(v,w){this.$StaticUFI3=this.$StaticUFI3||!this.$StaticUFI6(this.props.payloadSource)&&this.props.source===n.NEWS_FEED&&c('BlueBar').hasFixedBlueBar();if(this.$StaticUFI3&&!this.$StaticUFI4){var x=c('ReactDOM').findDOMNode(this);if(x instanceof Element)this.$StaticUFI4=c('getElementRect')(x);}};u.prototype.componentDidUpdate=function(v,w){this.$StaticUFI5(v);if(this.$StaticUFI3&&this.$StaticUFI4){var x=this.$StaticUFI7(this.$StaticUFI4);if(x!==null)c('Arbiter').inform('ufi/didUpdate',{offsetY:x});this.$StaticUFI3=false;this.$StaticUFI4=null}};u.prototype.$StaticUFI6=function(v){return v===o.UNKNOWN||v===o.INITIAL_SERVER||v===o.USER_ACTION||v===o.COLLAPSE_ACTION};u.prototype.$StaticUFI7=function(v){var w=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot());if(v.bottom<w.height){var x=v.bottom-v.top,y=c('ReactDOM').findDOMNode(this);if(y instanceof HTMLElement)return y.offsetHeight-x;}return null};u.prototype.$StaticUFI8=function(){var v=this.props,w=v.contextArgs,x=v.commentCounts,y=v.deletedCounts,z=v.feedback,aa=z.commentcountreduced,ba=w.ftentidentifier,ca=null;if(this.$StaticUFI9())if(aa&&isNaN(aa)){ca=aa}else ca=x[ba]-y[ba];return ca};u.prototype.$StaticUFI5=function(v){if(this.props.loadingComments)return;if(this.props.focusTopLevelComposer)this.onComment();if(this.state.focusReply){var w=this.state.focusReply,x=w.replyID,y=w.initiatorComment;if(!(x in this.refs))return;var z=this.refs[x]&&this.refs[x].refs&&this.refs[x].refs.mentionsinput;if(!z)return;z.focus();c('FbFeedCommentUFIScroller').reveal(c('ReactDOM').findDOMNode(z));this.setState({focusReply:null});if(!y)return;var aa=z.hasEnteredText(),ba=y.author===this.props.feedback.actorforpost,ca=!!y.parentcommentid;if(!aa&&!ba&&ca)z.insertMention(this.$StaticUFI10(y.author));}};u.prototype.$StaticUFI10=function(v){var w=this.props.authorProfiles[v],x=w.type;return new (c('SearchableEntry'))({uniqueID:w.id,title:w.name,type:x==='friend'?'user':x})};u.prototype.$StaticUFI11=function(){return this.props.source===n.ADS};u.prototype.$StaticUFI12=function(){return this.props.source===n.LIVE_VIDEO};u.prototype.$StaticUFI13=function(){var v=this.props.contextArgs,w=v.feedcontext&&JSON.parse(v.feedcontext);return !!(w&&w.is_narrow)};u.prototype.$StaticUFI14=function(){return this.props.source===n.COMPACT_SEARCH};u.prototype.$StaticUFI15=function(){var v=this.props,w=v.hideOrderingModeSelector,x=v.feedback,y=v.commentCounts,z=v.contextArgs;return !w&&x.orderingmodes&&!this.$StaticUFI14()&&y[z.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector};u.prototype.$StaticUFI16=function(){var v=this.props,w=v.contextArgs,x=v.ranges,y=w.ftentidentifier,z=x[y].getLength();return this.$StaticUFI17(y,z)};u.prototype.$StaticUFI17=function(v,w){var x=this.props.commentCounts;return x[v]==w};u.prototype.$StaticUFI18=function(){var v=this.props,w=v.contextArgs,x=v.feedback;return x.seencount>0&&!w.entstream};u.prototype.$StaticUFI19=function(){return c('UFILikeSentence.react').rendersSocialSentence(this.props)};u.prototype.$StaticUFI20=function(){var v=this.props;return Boolean(v.contextArgs.showCommentHeader)};u.prototype.$StaticUFI21=function(){var v=this.props,w=v.contextArgs,x=v.feedback;return this.$StaticUFI11()||this.$StaticUFI12()||w.search||this.hasReactions(x,w)};u.prototype.$StaticUFI22=function(){if(this.$StaticUFI21())return false;return this.$StaticUFI19()||this.$StaticUFI18()||this.$StaticUFI15()||this.$StaticUFI20()};u.prototype.$StaticUFI23=function(){var v=this.props,w=v.contextArgs,x=v.feedback;if(this.$StaticUFI11())return false;return Boolean(w.showshares&&x.sharecount&&!this.hasReactions(x,w))};u.prototype.$StaticUFI24=function(){return this.$StaticUFI23()&&!this.props.contextArgs.entstream};u.prototype.$StaticUFI9=function(){if(this.$StaticUFI11()||this.$StaticUFI14())return false;var v=this.props.availableComments;return !!(v&&v.length)};u.prototype.$StaticUFI25=function(){var v=this.props,w=v.canAddCommentMap,x=v.contextArgs,y=v.feedback;return y.cancomment&&Boolean(x.showaddcomment)&&Boolean(y.actorforpost)&&w[x.ftentidentifier]};u.prototype.$StaticUFI26=function(){return this.$StaticUFI25()&&this.$StaticUFI27()&&this.props.hasPagedToplevel};u.prototype.$StaticUFI28=function(){var v=this.props.feedback;return v.arecommentsdisabled===true&&v.cancomment===false};u.prototype.$StaticUFI29=function(){var v=this.props.feedback;return v.isviewermuted===true&&v.cancomment===false};u.prototype.$StaticUFI30=function(){if(!this.$StaticUFI24())return false;var v=this.props.contextArgs.isPermalink,w=v?this.$StaticUFI8():null;return Boolean(w)&&Number(w)!==0};u.prototype.$StaticUFI31=function(){if(!this.$StaticUFI24())return null;var v=this.props,w=v.contextArgs,x=v.feedback,y=this.$StaticUFI30()?this.$StaticUFI8():null;return c('React').createElement(c('UFIShareRow.react'),{contextArgs:w,feedback:x,shownCommentCount:y})};u.prototype.$StaticUFI32=function(){var v=this.props,w=v.feedback,x=v.contextArgs,y=v.commentCounts;if(this.$StaticUFI22())return c('React').createElement(c('UFILikeSentence.react'),{contextArgs:x,feedback:w,commentCounts:y,showOrderingModeSelector:this.$StaticUFI15(),key:'ufi_like_sentence'});return null};u.prototype.render=function(){var v=this.props,w=v.feedback,x=v.contextArgs,y=v.source,z=this.$StaticUFI28(),aa=this.$StaticUFI29(),ba=this.$StaticUFI23(),ca=this.$StaticUFI32(),da=!!ca,ea=z||aa?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:v.feedback}):null,fa=this.$StaticUFI31();if(v.loadingComments)return c('React').createElement(c('UFIContainer.react'),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},ca,fa,s);var ga=this.$StaticUFI9(),ha=v.ranges[x.ftentidentifier],ia=Number(v.loggingOffset)-ha.getOffset(),ja=w.targetiscomment,ka=ga?this.renderCommentArray(v.availableComments,ia,ja,null):null,la=null,ma=null,na=w.cancomment,oa=da||ba||ga||na,pa=null,qa=this.state.acceptedAnswerState.type==='Accepted'?this.state.acceptedAnswerState.id:null,ra=c('UFILivePinnedCommentStore').getPinnedCommentID(x.ftentidentifier)||qa;if(ra){var sa=c('UFIComments').getComment(ra);if(sa&&!v.authorProfiles[sa.author]){c('BanzaiODS').bumpEntityKey('unsampled_feedback','missing_pinned_comment_author')}else if(sa)if(qa&&qa===this.state.editcommentid&&sa.__typename==='saved'){pa=this.renderEditCommentBox(sa)}else pa=this.renderComment(sa,0,false,false,qa===ra,false,true,!!this.props.loadingTranslationsMap[sa.id]);}var ta=x.isBroadcasterUFI||y===n.LIVE_VIDEO_STORIES,ua=oa?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this.$StaticUFI25()||x.loggedOutLinkConfig&&x.loggedOutLinkConfig.showAddComment){var va=this.$StaticUFI33();if(va){var wa=c('UFIOrderingModeStore').isLiveStreaming(x.instanceid);if(!x.islivestreaming||!wa)la=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:x,feedbackTargetID:w.targetfbid});ma=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:w.actorforpost,targetID:w.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:false,editingComment:{},isEditing:false,mentionsDataSource:w.mentionsdatasource,showSendOnEnterTip:w.showsendonentertip,multiCompanyGroupsCount:w.multicompanygroupscount,allowVideoAttachments:w.allowvideoattachments&&!wa,allowPhotoAttachments:w.allowphotoattachments&&!wa,allowStickerAttachments:w.allowstickerattachments&&!wa,allowGifAttachments:w.allowgifattachments&&!wa,allowTipJar:Boolean(w.istipjarenabled&&wa),contextArgs:x,subtitle:w.subtitle,isQAndA:w.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?c('emptyFunction'):function(){return this.setState({viewerHasClickedCommentComposer:true})}.bind(this),groupID:w.grouporeventid,allowCommentMarkdown:w.iscommentmarkdowneligible,keepFocus:wa,constituentBanner:w.constituentbanneruri,isTargetPage:w.isownerpage})}}var xa=x.ftentidentifier,ya=this.renderPagers(xa,false,v.ranges[xa].getOffset(),v.ranges[xa].getLength()),za=ya.topPager,ab=ya.bottomPager,bb=this.$StaticUFI27()?la:null,cb=this.$StaticUFI27()?null:la,db=this.$StaticUFI34(xa,za,ab),eb=db.topFilterWarning,fb=db.bottomFilterWarning,gb=c('UFIComponents').applyToUFIComponents([bb,za,eb].concat(ka,[fb,ab,cb]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),hb=gb.slice(0,3);bb=hb[0];za=hb[1];eb=hb[2];var ib=gb.slice(-3);fb=ib[0];ab=ib[1];cb=ib[2];ka=gb.slice(3,-3);var jb=this.$StaticUFI27()?ma:null,kb=this.$StaticUFI27()?null:ma,lb=this.$StaticUFI26()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:w.isqanda,isGroupQA:x.isaskquestion}):null,mb=true,nb=null;if(x.showCommentNuxForGroupMallAds)nb=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{commentNuxContent:x.groupMallAdsCommentNuxContent})});gb=c('UFIComponents').applyToUFIComponents([ca,fa,jb,za,eb].concat(ka,[fb,ab,kb,lb]),{isFirstComponent:mb},{isLastComponent:true});var ob=gb.slice(0,5);ca=ob[0];fa=ob[1];jb=ob[2];za=ob[3];eb=ob[4];var pb=gb.slice(-4);fb=pb[0];ab=pb[1];kb=pb[2];lb=pb[3];ka=gb.slice(5,-4);var qb=!!c('UFIInteractionStore').getValueFor(x.instanceid),rb=null;if(this.state.acceptedAnswerState.type==='Accepted'){var sb=c('UFIComments').getComment(this.state.acceptedAnswerState.id);if(sb&&sb.__typename==='saved')rb=this.renderReplyContainer(sb);}return c('React').createElement(c('UFIContainer.react'),{shouldHide:this.state.inCommercialBreak||this.state.isPlayingLiveVODHighlights},x.shownub&&oa?t:null,ca,fa,ua,nb,jb,c('React').createElement(c('UFICommentListVisibilityTracker.react'),{contextArgs:x},c('React').createElement(c('UFICommentScrollableArea.react'),{scrollcomments:!!x.scrollcomments,scrollwidth:x.scrollwidth||0},c('React').createElement(c('UFIComponentLogger.react'),{contextArgs:x,feedback:w,hasComments:ga,isPermalink:x.isPermalink,viewerHasInteractedWithComments:qb||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},bb,za,eb,ta?null:pa,rb,ka,ta?pa:null,fb,ab,cb))),kb,lb,ea)};u.prototype.$StaticUFI33=function(){return this.state.editcommentid===null};u.prototype.renderCommentArray=function(v,w,x,y){var z=this.props,aa=z.contextArgs,ba=this.props.feedback;if(!v.length)return [];v=c('distinctArrayBy')(v,function(da){return da.id});v=v.filter(function(da){return this.state.acceptedAnswerState.type==='NoneAccepted'&&da.id||this.state.acceptedAnswerState.type==='Accepted'&&da.id!==this.state.acceptedAnswerState.id}.bind(this));var ca=c('UFICommentFilters').collectSpamBuckets(v,z.authorProfiles);return ca.reduce(function(da,ea,fa){if(!ea)return da;if(c('UFICommentFilters').isSpam(ea)){da.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+ea.id,contextArgs:aa,viewas:aa.viewas,comment:ea,parentCommentID:y}))}else{if(ea.id==this.state.editcommentid){da.push(this.renderEditCommentBox(ea))}else{var ga=Math.max(w-fa,0),ha=fa===0,ia=fa===ca.length-1,ja=!x&&!ba.arecommentsdisabled,ka=x&&!ha;da.push(this.renderComment(ea,ga,ha,ia,ja,ka,false,!!this.props.loadingTranslationsMap[ea.id]));if(ea.id==this.props.translateAllCommentID&&!c('UFIOrderingModeStore').isLiveStreaming(aa.instanceid))da.push(c('React').createElement(c('UFITranslateAllRow.react'),{key:'translateAll'+ea.id,contextArgs:aa}));}if(!x&&!c('UFICommentFilters').isDeleted(ea)&&!c('UFIOrderingModeStore').isLiveStreaming(aa.instanceid)){var la=this.renderReplyContainer(ea);if(la)da.push(la);}}return da}.bind(this),[])};u.prototype.renderReplyContainer=function(v){var w=this.props,x=w.commentCounts[v.id],y=w.repliesExpandedMap[v.id],z=!y&&v.interestingReplyId,aa=w.ranges[v.id];if(!aa)r.error('renderReplyContainer range is undefined');var ba=void 0,ca=void 0;if(aa&&(y||v.interestingReplyId)){ba=w.repliesMap[v.id];ca=aa.getOffset();if(z){var da=ba.filter(function(db){return db.id===v.interestingReplyId});if(da.length!==1){c('LogHistory').getInstance('ufi').error('comment '+v.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');ba=null}else{ba=da;ca=v.interestingReplyOffset}}}var ea=void 0,fa=null,ga=null,ha=null,ia=null;if(aa&&ba){var ja=aa.getOffset(),ka=aa.getLength();if(z){ja=ca;ka=1}var la=this.renderPagers(v.id,true,Number(ja),ka);fa=la.topPager;ga=la.bottomPager;var ma=Number(w.loggingOffset)-Number(ca);ea=this.renderCommentArray(ba,ma,true,v.id);var na=this.$StaticUFI35(v.id,fa,ga);ha=na.topFilterWarning;ia=na.bottomFilterWarning}var oa=Math.max(x-Number(v.spamreplycount),0),pa=void 0;if(aa&&!c('UFIOrderingModeStore').isLiveStreaming(this.props.contextArgs.instanceid)&&oa&&(y&&ba&&ba.length>w.replySocialSentenceMaxReplies||!y&&!ba)){var qa=aa.isLoadingPrev()||aa.isLoadingNext(),ra=y&&!fa&&qa,sa=null;if(v.replyauthors&&v.replyauthors.length)sa=w.authorProfiles[v.replyauthors[0]];var ta=ba?ba.length:0;pa=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:w.contextArgs,author:sa,replies:y?ta:oa,timestamp:v.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(w.contextArgs,v.id))}.bind(this),isLoading:ra,isExpanded:y,showVerified:w.feedback.showfeaturedreplies,orderingMode:w.orderingMode})}var ua=void 0;if(y)if(v.cancomment&&w.canAddCommentMap[v.id]&&!(v.needsApproval||v.canAppeal||v.canSecure)){var va=false;if(ea)for(var wa=ea.length-1;wa>=0;wa--)if(ea[wa]){va=ea[wa].props.isAuthorReply;break}ua=this.renderReplyComposer(v,!va)}var xa=void 0;if(pa||fa||ha||ea||ia||ga||ua){var ya=c('UFIComponents').applyToUFIComponents([pa,fa,ha].concat(ea,[ia,ga,ua]),{isFirstComponent:true},{isLastComponent:true}),za=ya.slice(0,3);pa=za[0];fa=za[1];ha=za[2];var ab=ya.slice(-3);ia=ab[0];ga=ab[1];ua=ab[2];ea=ya.slice(3,-3);var bb=v.status===p.LIVE_DELETED,cb=this.state.acceptedAnswerState.type==='Accepted'&&v.id===this.state.acceptedAnswerState.id;xa=c('React').createElement(c('UFIContainer.react'),{key:'replies'+v.id,isParentLiveDeleted:bb,isReplyList:true,isAcceptedAnswerReply:cb},pa,fa,ha,ea,ia,ga,ua)}return xa};u.prototype.renderReplyComposer=function(v,w){var x=this.props,y=x.contextArgs,z=x.feedback,aa=this.state.editcommentid!==null,ba=aa&&!v.id;if(ba)return null;var ca=c('UFIOrderingModeStore').isLiveStreaming(y.instanceid);return c('React').createElement(c('UFIAddComment.react'),{viewerActorID:z.actorforpost,replyCommentID:v.id,targetID:z.ownerid,initialData:null,ref:'replycomposer-'+v.id,withoutSeparator:w,editingComment:{},isEditing:false,mentionsDataSource:z.mentionsdatasource,showSendOnEnterTip:false,multiCompanyGroupsCount:z.multicompanygroupscount,allowVideoAttachments:z.allowvideoattachments&&!ca,allowPhotoAttachments:z.allowphotoattachments&&!ca,allowStickerAttachments:z.allowstickerattachments&&!ca,allowGifAttachments:z.allowgifattachments&&!ca,allowCommentMarkdown:z.iscommentmarkdowneligible,contextArgs:y,subtitle:z.subtitle,isQAndA:z.isqanda,constituentBanner:z.constituentbanneruri})};u.prototype.renderEditCommentBox=function(v){var w=this.props,x=w.contextArgs,y=w.feedback,z=babelHelpers['extends']({},x);delete z.addcommentautoflip;delete z.collapseaddcomment;delete z.hideActorPhoto;delete z.issnowlift;delete z.loggedOutLinkConfig;delete z.monitorHeight;delete z.sht;delete z.viewoptionstypeobjects;delete z.viewoptionstypeobjectsorder;return c('React').createElement(c('UFIAddComment.react'),{key:'editing_comment'+v.id,viewerActorID:y.actorforpost,targetID:y.ownerid,mentionsDataSource:y.mentionsdatasource,contextArgs:z,isEditing:true,editingComment:v,allowVideoAttachments:y.allowvideoattachments,allowPhotoAttachments:y.allowphotoattachments,allowStickerAttachments:y.allowstickerattachments,allowGifAttachments:y.allowgifattachments,isQAndA:y.isqanda,constituentBanner:y.constituentbanneruri})};u.prototype.renderComment=function(v,w,x,y,z,aa,ba,ca){var da=this.props,ea=da.feedback,fa=ea.actorforpost===v.author,ga=v.__typename==='local'||this.state.localCommentIDs[v.id],ha=Boolean(ea.showremovemenu||ea.viewerid===v.author),ia=Boolean(ea.canremoveall&&ea.isownerpage&&!fa),ja=da.source!=n.INTERN,ka=!!v.parentcommentid,la=v.parentcommentid,ma=true;if(ka&&la&&la in this.props.canReplyMap&&this.props.canReplyMap[la]!==null)ma=this.props.canReplyMap[la];var na=!!v.isfeatured,oa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,w),pa=new (c('URI'))(da.commentPermalinks[v.id]).addQueryData({comment_tracking:oa}).toString();return c('React').createElement(c('UFIComment.react'),{key:c('UFIComments').getRenderKey(v.id),isFirst:x,isLast:y,showReplyLink:z,hasPartialBorder:aa,comment:v,authorProfiles:da.authorProfiles,viewerIsAuthor:fa,feedback:ea,'data-ft':oa,contextArgs:da.contextArgs,hideAsSpamForPageAdmin:ia,isLocallyComposed:ga,isFeatured:na,parentCanComment:ma,permalink:pa,showPermalink:ja,showRemoveReportMenu:ha,focusOnMount:v.id===da.commentIDToFocusOnMount,orderingMode:da.orderingMode,featuredCommentIDs:da.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?c('emptyFunction'):function(){return this.setState({viewerHasClickedSeeMore:true})}.bind(this),isLivePinnedComment:ba,showTranslation:ca||!!v.translationdata})};u.prototype.$StaticUFI34=function(v,w,x){return this.$StaticUFI36(v,w,x,false)};u.prototype.$StaticUFI35=function(v,w,x){return this.$StaticUFI36(v,w,x,true)};u.prototype.$StaticUFI36=function(v,w,x,y){var z=null,aa=null;if(!w)z=this.$StaticUFI37(v,c('UFIPaging').TOP,y);if(!x)aa=this.$StaticUFI37(v,c('UFIPaging').BOTTOM,y);return {topFilterWarning:z,bottomFilterWarning:aa}};u.prototype.$StaticUFI37=function(v,w,x){var y=this.props.allSeenActiveLoadDirectionData;if(!y)return null;var z=y[v];if(!z||!(w in z))return null;var aa=this.props;if(!m||!m.shouldRender(aa,v,w,x))return null;return c('React').createElement(m,{asReplyWarning:x,targetID:v,pagingDirection:w,ufiProps:aa})};u.prototype.renderPagers=function(v,w,x,y){var z=this.props;if(this.$StaticUFI17(v,y)||this.$StaticUFI11()||this.$StaticUFI14()||!w&&z.hideToplevelPager)return {topPager:null,bottomPager:null};Number.isInteger(z.commentCounts[v])||j(0);Number.isInteger(z.deletedCounts[v])||j(0);Number.isInteger(y)||j(0);return c('UFIPagerGenerator').renderPagers({commentCount:z.commentCounts[v],contextArgs:z.contextArgs,currentLength:y,currentOffset:x,deletedCount:z.deletedCounts[v],feedback:z.feedback,onPageCallback:function(aa,ba){this.context.dispatch(c('UFIStoryAction').pageInComments(z.contextArgs,v,aa,ba))}.bind(this),orderingMode:z.orderingMode,range:z.ranges[v],targetID:v})};u.prototype.$StaticUFI38=function(v){if(!v)return null;return c('DOM').scry(v,'[name="add_comment_text_text"]').concat(c('DOM').scry(v,'[name="add_comment_text"]')).find(function(w){return !c('Parent').byClass(w,'UFIReplyList')})};u.prototype.$StaticUFI27=function(){return Boolean(c('UFIOrderingModeStore').isInverted(this.props.orderingMode))};u.prototype.hasReactions=function(v,w){return Boolean(v.displayreactions&&w.hasReactions&&(w.feedbackMode==='none'||w.feedbackMode==='toggle'))};u.contextTypes={dispatch:q.func};u.defaultProps={commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,loadingSpamIDs:{},loadingTranslationsMap:{}};f.exports=c('FluxContainer').create(u,{pure:false,withProps:true})}),null);
__d('UFIBlingItem.react',['cx','fbt','NumberFormat','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){var m=c('NumberFormat').formatInteger(this.props.count),n=m;switch(this.props.itemKey){case 'like':n=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':n=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':n=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':n=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return c('React').createElement('span',{className:"_2u_j"},n)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIReactionTypes'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=[],o='',p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c('UFIReactionTypes').LIKE]['default']!==s;n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',count:v?s||0:q,countreduced:v?u||'':r,itemKey:v?'reaction':'like',key:'like'}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);o+=' '}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c('NumberFormat').formatInteger(this.props.comments);n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,itemKey:'comment',key:'comment'}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);o+=' '}if(this.props.reshares){n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',count:this.props.reshares,countreduced:this.props.resharesreduced,itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])])}if(this.props.readOnly){return c('React').createElement('span',{'aria-label':o},n)}else{var x=this.props.contextArgs.commentajaxify;return c('React').createElement('a',{ajaxify:x,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:x?'dialog':'ignore'},n)}};function m(){j.apply(this,arguments)}m.propTypes={contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m}),null);
__d('renderCrosspostedTooltipText',['fbt','React','XUIText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var m=this.props,n=m.posts,o=m.postViews,p=m.otherPostsViews,q=Math.max(0,n-1);if(q<=1||p<1)return null;return c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},h._({"*":"Video Posted {number} Times","_1":"Video Posted 1 Time"},[h.plural(n,'number')])),c('React').createElement('br',null),h._({"*":"{number} views from this post","_1":"1 view from this post"},[h.plural(o,'number')]),c('React').createElement('br',null),h._({"*":{"*":"{number} views from {posts count} other posts","_1":"{number} views from {posts count} other post"},"_1":{"*":"1 view from {posts count} other posts","_1":"1 view from {posts count} other post"}},[h.plural(p,'number'),h.param('posts count',q),h.plural(q)]))};function k(){i.apply(this,arguments)}function l(m){var n=m.posts,o=m.otherPostsViews,p=Math.max(0,n-1);if(p<=1||o<1)return null;return c('React').createElement(k,m)}f.exports=l}),null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','BootloadOnRender.react','FeedbackSourceType','JSResource','LazyComponent.react','NumberFormat','PagesPrivateReplyConstants','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','XUFIShareTooltipController','renderCrosspostedTooltipText'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onCommentsClick=function(event){var r=this.props.contextArgs.commentajaxify;if(r){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(r,event.currentTarget)}else this.launchDialog(r,event.currentTarget);event.preventDefault()}else if(this.props.onCommentClick){this.props.onCommentClick(event);event.preventDefault()}this.logCountAction('comments','click')}.bind(this),this.onSeensClick=function(event){var r=this.props.feedback,s=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',r.entidentifier).getURI();s=c('ActorURI').create(s,r.actorforpost);this.launchDialog(s.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault()}.bind(this),this.onSharesClick=function(event){if(this.isCompactSearch())return;var r=this.props.feedback,s=r.sharefbid||r.targetfbid,t=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:s}),r.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault()}.bind(this),this.onViewsClick=function(event){this.logCountAction('views','click')}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');}.bind(this),n}l.prototype.launchSnowlift=function(m,n){'use strict';c('Bootloader').loadModules(["PhotoSnowlift"],function(o){o.bootstrap(m,n)},'UFIReactionsBlingSocialSentence.react')};l.prototype.launchDialog=function(m,n){'use strict';c('Bootloader').loadModules(["AsyncDialog"],function(o){o.bootstrap(m,n,'dialog')},'UFIReactionsBlingSocialSentence.react')};l.prototype.logCountAction=function(m,n){'use strict';c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:n,target_type:'count',target_subtype:m})};l.prototype.renderComments=function(){'use strict';var m=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!m||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var n=isNaN(this.props.feedback.commentcountreduced)&&!m?this.props.feedback.commentcountreduced:c('NumberFormat').formatInteger(this.props.commentCount),o=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c('React').createElement('div',{className:"_36_q"},c('React').createElement('a',{'aria-live':'polite',className:"_ipm _-56",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':o,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',n),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])))};l.prototype.renderSeens=function(){'use strict';if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var m=this.props.feedback,n=m.seencount,o=void 0;if(m.seenbyall){o=i._("Seen by everyone")}else if(n===1){o=i._("Seen by 1")}else o=i._("Seen by {count}",[i.param('count',n)]);var p=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:m.entidentifier}),q=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',m.entidentifier).getURI();q=c('ActorURI').create(q,m.actorforpost);return c('React').createElement('div',{className:"_36_q"},c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:q,'data-hovercard':p.toString(),className:"_ipm _2x0l",onClick:this.onSeensClick},o)))};l.prototype.renderShares=function(){'use strict';if(!this.props.feedback.sharecount)return null;var m=this.props.feedback.sharefbid||this.props.feedback.targetfbid,n=void 0;if(this.isCompactSearch()&&this.props.href!=null){n=this.props.href}else n=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:m}),this.props.feedback.actorforpost);var o=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return c('React').createElement('div',{className:"_36_q"},c('React').createElement('a',{'aria-live':'polite',className:"_ipm _2x0m",'data-hover':'tooltip','data-tooltip-uri':o,href:n,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])))};l.prototype.renderSaves=function(){'use strict';if(!this.props.contextArgs.saveCount||!this.props.contextArgs.saveCollectionId)return null;return c('React').createElement('div',{className:"_36_q"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFIReactionsSaveDialog.react').__setRef('UFIReactionsBlingSocialSentence.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{saveCount:this.props.contextArgs.saveCountReduced,collectionId:this.props.contextArgs.saveCollectionId,buttonText:this.props.contextArgs.saveButtonTitle,storyId:this.props.contextArgs.saveStoryID,isSaveCountLink:this.props.contextArgs.isSaveCountLink})}))};l.prototype.renderViews=function(){'use strict';var m=this.props.contextArgs.viewCount,n=null;if(this.canSeeConsolidatedTooltip())n=this.renderViewsTooltip();if(!m)return null;return c('React').createElement('div',{className:"_36_q"},c('React').createElement(c('Tooltip.react'),{tooltip:n,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm _2x0m",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](m==='1'?'View':'Views',{View:'View',Views:'Views'})])))};l.prototype.canSeeConsolidatedTooltip=function(){'use strict';var m=this.props.contextArgs.postViewCount,n=this.props.contextArgs.totalPosts,o=this.props.contextArgs.otherPostsViewCount;return !!n&&n>1&&!!m&&!!o};l.prototype.isCompactSearch=function(){'use strict';return this.props.contextArgs.source===c('FeedbackSourceType').COMPACT_SEARCH};l.prototype.renderViewsTooltip=function(){'use strict';var m=this.props.contextArgs.totalPosts||0,n=this.props.contextArgs.postViewCount||0,o=this.props.contextArgs.otherPostsViewCount||0;return c('renderCrosspostedTooltipText')({posts:m,postViews:n,otherPostsViews:o})};l.prototype.renderPrivateReply=function(){'use strict';var m=this.props.feedback.messagereplycontext;if(!m||m.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return c('React').createElement('div',{className:"_36_q"},c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:m.status})))};l.prototype.render=function(){'use strict';var m={feedback:this.props.feedback,contextArgs:this.props.contextArgs,reactionsLink:null};if(this.props.overrideReactionsLink)m.reactionsLink=this.props.href;if(this.props.contextArgs.viewCount!=null&&(this.props.contextArgs.saveCount!=null||this.props.contextArgs.seenCount!=null)){return c('React').createElement('div',{className:"_ipn clearfix _-5d"},c('React').createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),c('React').createElement('div',{className:"_34i1 _36_q"},this.renderSaves(),this.renderSeens(),this.renderViews(),this.renderPrivateReply())),c('React').createElement(c('UFIReactionsSocialSentence.react'),m))}else return c('React').createElement('div',{className:"_ipn clearfix _-5d"},c('React').createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),this.renderSaves(),this.renderSeens(),this.renderViews(),this.renderPrivateReply()),c('React').createElement(c('UFIReactionsSocialSentence.react'),m));};f.exports=l}),null);
__d('UFIBling.react',['CommentPrelude','FeedbackSourceType','React','TrackingNodes','UFIBlingBox.react','UFIReactionsBlingSocialSentence.react','UFISharedDispatcher','UFIStoryAction','UFIToplevelPagedCommentList','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l)}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k=Object.freeze(babelHelpers['extends']({},k,{commentajaxify:k.commentredirecturi}))}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=(k.feedbackMode==='none'||k.feedbackMode==='toggle')&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1()}else if(k.source===c('FeedbackSourceType').COMPACT_SEARCH){var v=k.commentredirecturi!=null?new (c('URI'))(k.commentredirecturi):new (c('URI'))(o);if(v!=null)v.go();}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r})}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced}return c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly})}};j.prototype.$UFIBling1=function(){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(this.props.contextArgs))};f.exports=j}),null);
__d('UFICommentActionLink.react',['cx','fbt','React','SutroStoryHeaderUFIGatingConfig','UFICommentLink.react','UFISharedDispatcher','UFIStoryAction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.contextArgs,o=n.commentajaxify,p=n.commentredirecturi,q=n.showtheaterforcomment,r=n.loggedOutLinkConfig,s='';if(c('SutroStoryHeaderUFIGatingConfig').is_uppercased){s=this.props.contextArgs.isaskquestion?i._("ANSWER"):i._("COMMENT")}else s=this.props.contextArgs.isaskquestion?i._("Answer"):i._("Comment");if(!o&&r&&r.showCommentLink)o=r.commentAjaxifyURI;var t=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned;if(o){return c('React').createElement('span',{className:"_6a"+(' '+"_15-3")+(' '+"_3h-u")+(t?' '+"_4k43":'')},c('React').createElement(c('UFICommentLink.react'),{ajaxify:o,rel:q?'theater':'dialog'},s))}else if(p)return c('React').createElement('span',{className:"_6a"+(' '+"_15-6")+(' '+"_3h-u")+(t?' '+"_4k43":'')},c('React').createElement(c('UFICommentLink.react'),{href:p,rel:q?'theater':''},s));return c('React').createElement('span',{className:"_6a"+(' '+"_15-7")+(' '+"_3h-u")+(t?' '+"_4k43":'')},c('React').createElement(c('UFICommentLink.react'),{onClick:function(event){event.preventDefault();c('UFISharedDispatcher').dispatch(c('UFIStoryAction').showComments(this.props.contextArgs))}.bind(this)},s))};function m(){j.apply(this,arguments)}m.propTypes={contextArgs:l.object.isRequired};f.exports=m}),null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,q?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target))}.bind(this),m}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c('UFIReactionsLinkImpl.react')){return c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:m,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions})}else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?'dialog':null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent})}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k}),null);
__d('UFISaveActionLink.react',['ix','cx','fbt','Bootloader','Image.react','React','SutroStoryHeaderUFIGatingConfig','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').Component);l=k&&k.prototype;function m(n){l.constructor.call(this,n);this.$UFISaveActionLink1=function(){var o=this.state.showSave;c('Bootloader').loadModules(["AsyncRequest","CollectionCurationMechanisms","CollectionsDisplaySurface","SavedStateActions","XSaveController"],function(p,q,r,s,t){new p().setData({action:o?s.SAVE:s.UNSAVE,mechanism:q.SAVED_UFI,story_id:this.props.storyID,surface:r.CAMPFIRE_NOTE}).setHandler(function(u){if(u.error===0)this.setState({showSave:!o});}.bind(this)).setURI(t.getURIBuilder().getURI()).send()}.bind(this),'UFISaveActionLink.react')}.bind(this);this.state={showSave:!n.isSaved}}m.prototype.render=function(){var n=this.state.showSave?j._("Save"):j._("Unsave"),o=null;if(!c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi){var p=this.state.showSave?h("122454"):h("138474");o=c('React').createElement(c('Image.react'),{src:p})}return c('React').createElement('span',{className:"_6a"+(c('SutroStoryHeaderUFIGatingConfig').is_center_aligned?' '+"_38qe":'')+(c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi?' '+"_38qf":'')},c('React').createElement('a',{className:(!this.state.showSave?"_38qg":'')+(c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi?' '+"_38qh":''),href:'#',onClick:this.$UFISaveActionLink1},o,n))};f.exports=m}),null);
__d('UFIShareActionLink.react',['ActorURI','Bootloader','React','ReactShareButtonGatedModule','UFIShareLink.react','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('ReactShareButtonGatedModule').module,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={confirmed:false,openOnInitOverride:false},n}l.prototype.render=function(){var m=this.state,n=m.confirmed,o=m.openOnInitOverride,p=this.props,q=p.shareURI,r=p.shareRel,s=p.shareNowMenuURI,t=p.feedbackReferrer,u=p.feedbackSource,v=p.feedbackTarget,w=p.misinformationConfirmDialogURI;if(w&&!n)return c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return this.$UFIShareActionLink1(w)}.bind(this)});var x={feedback_referrer:t,feedback_source:u},y=v&&v.actorforpost;if(y){q=q&&c('ActorURI').create(q,y);s=s&&new (c('URI'))(s).addQueryData('actor_id',y).toString()}return s?c('React').createElement(j,{endpoint:s,endpointData:x,openOnInitOverride:o}):c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(q).addQueryData(x),rel:r,openOnInit:o})};l.prototype.$UFIShareActionLink1=function(m){var n='MISINFORMATION_RESHARE_ALERT_FUNNEL';c('Bootloader').loadModules(["AsyncDialog","AsyncRequest","FunnelLogger"],function(o,p,q){q.startFunnel(n);o.send(new p(m),function(r){r.subscribe('confirm',function(){this.setState({confirmed:true,openOnInitOverride:true});q.appendAction(n,'continue');q.endFunnel(n);r.hide()}.bind(this));r.subscribe('cancel',function(){q.appendAction(n,'cancel');q.endFunnel(n);r.hide()})}.bind(this))}.bind(this),'UFIShareActionLink.react')};l.propTypes={feedbackTarget:k.object,shareURI:k.string,shareRel:k.string,shareNowMenuURI:k.string,shareLinkHref:k.string,feedbackReferrer:k.string,feedbackSource:k.number,misinformationConfirmDialogURI:k.string};f.exports=l}),null);
__d('UFIActionLinks.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','FBFeedLocations','FeedbackSourceType','JSResource','Parent','React','SutroStoryHeaderUFIGatingConfig','UFIBling.react','UFICommentActionLink.react','UFIConfig','UFIInstanceAction','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFISaveActionLink.react','UFIShareActionLink.react','UFISharedDispatcher','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.componentDidMount=function(){var m=this.$UFIActionLinks1();c('BanzaiODS').bumpEntityKey('feedback',m)};l.prototype.renderActorSelector=function(){if(this.props.hideActorSelector||this.props.contextArgs.disableCommentAndLikeForGroupAds)return null;var m=this.props.contextArgs,n=m.actorSelectorConfig,o=m.hasReactions;if(!n)return null;var p=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned,q=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi,r=n.module;return c('React').createElement('div',{className:"_40yk"+(q?' '+"_610g":'')+(q&&p?' '+"_610h":'')+(o?' '+"_pbn":'')},c('React').createElement(r,babelHelpers['extends']({},n.props,{nuxHoverContext:c('Parent').byTag(this.refs.root,'form')})))};l.prototype.renderActionList=function(){var m=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned,n=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink(),this.renderSaveLink()].filter(function(o){return o}).map(function(o,p){return c('React').createElement('span',{className:"_1mto",key:p},o)});if(n.length){return c('React').createElement('div',{className:"_42nr"+(m?' '+"_1mtp":'')},n)}else return null;};l.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs))}.bind(this)});return null};l.prototype.renderLikeLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=n.loggedOutLinkConfig,q=n.disableCommentAndLikeForGroupAds;if(q)return null;if(!o.hasviewerliked&&!o.viewercanlike&&!(p&&p.showLikeLink))return null;return c('React').createElement(c('UFILikeActionLink.react'),{feedback:o,contextArgs:n})};l.prototype.renderCommentLink=function(){var m=this.props.contextArgs.disableCommentAndLikeForGroupAds;if(m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(n&&n.showCommentLink)){var o=this.props.contextArgs.disabledCommentTooltip;if(o){var p=c('SutroStoryHeaderUFIGatingConfig').is_uppercased?i._("COMMENT"):i._("Comment");return c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':o},p))}return null}return c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs})};l.prototype.$UFIActionLinks1=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return 'ufi-share-link.unavailable';var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)return 'ufi-share-link.loggedout';return 'ufi-share-link.render'};l.prototype.renderShareLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)m.shareURI=n.shareAjaxifyURI;return c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},m))};l.prototype.renderPrivateReplyLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=o.actorforpost,q=o.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(q,p))return null;if(!q)return null;return c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:p,activityID:n.ftentidentifier,context:q,seeResponseLabel:false,shouldShowNux:n.shouldShowCommentPrivateReplyNux})};l.prototype.renderEmbedLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m||!m.embedURI||this.props.contextArgs.deepDiveToken)return null;var n=c('SutroStoryHeaderUFIGatingConfig').is_uppercased?i._("EMBED"):i._("Embed"),o=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned;return c('React').createElement('span',{className:"_4q8d"+(o?' '+"_1mtq":'')},c('React').createElement('a',{href:m.embedURI,rel:'dialog',className:"_2g1w"},n))};l.prototype.renderSaveLink=function(){var m=null;try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(q){}if(m===c('FBFeedLocations').CAMPFIRE_NOTE&&this.props.contextArgs.showsavelink){var n=this.props.contextArgs,o=n.isSaved,p=n.saveStoryID;return c('React').createElement(c('UFISaveActionLink.react'),{isSaved:o,storyID:p})}return null};l.prototype.renderSearchFeedback=function(){var m=this.props.contextArgs.inlineSearchFeedbackConfig;if(!m)return null;return c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},m))};l.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIActionLinks.react'),contextArgs:this.props.contextArgs,feedback:this.props.feedbacktarget}))};l.prototype.renderCrowdsourceLabelingContainer=function(){if(!c('UFIConfig').showUFICrowdsource)return null;return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFICrowdsourceLabelingContainer.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs})};l.prototype.renderLayout=function(m,n,o){n=n.map(function(p,q){return p&&c('React').createElement('div',{className:"_3m9g",key:q},p)}).filter(function(p){return p});if(!m&&n.length===0)return null;return c('React').createElement('div',{className:c('joinClasses')("_3399",o)},n,c('React').createElement('div',{className:"_524d"},m))};l.prototype.shouldRenderActionButtons=function(){var m=null,n=this.props.contextArgs.source;if(this.props.contextArgs.feedcontext)try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type}catch(o){}if(m===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||m===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||m===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE||m===c('FBFeedLocations').GROUP_SUGGESTIONS_WITH_STORY||n===c('FeedbackSourceType').LIVE_WWW_BROADCASTING||n===c('FeedbackSourceType').COMPACT_SEARCH||n===c('FeedbackSourceType').LIVE_VIDEO_STORIES)return false;return true};l.prototype.hasCounts=function(){return !!(this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount)};l.prototype.render=function(){var m=this.renderActorSelector(),n=this.renderSearchFeedback(),o=[],p=[],q=this.props.contextArgs.disableCommentAndLikeForGroupAds,r=null,s=this.renderBling();if(s){p.push(m);if(this.hasCounts()){r=this.renderLayout(null,[n],"_1f6t")}else p.push(n);}else{o.push(m);o.push(n)}o.push(this.renderCommentOrderingModeSelector());var t=this.props.contextArgs.source===c('FeedbackSourceType').COMPACT_SEARCH,u=c('SutroStoryHeaderUFIGatingConfig').enabled_hide_ufi_border&&!t,v="_1f6t"+(t?' '+"_24vt":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":'')+(u?' '+"_20h5":''),w=c('SutroStoryHeaderUFIGatingConfig').is_center_aligned,x=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi,y=c('SutroStoryHeaderUFIGatingConfig').enabled_for_ufi_animation,z=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),o,"_a7s"+(u?' '+"_20h6":'')+(x?' '+"_610i":'')+(x&&w?' '+"_610j":'')+(x&&y?' '+"_125r":'')+(' '+"clearfix")+(' '+"_zw3")+(q?' '+"_r9u":'')):null,aa=this.renderCrowdsourceLabelingContainer();return c('React').createElement('div',{ref:'root',className:"_57w"},r,this.renderLayout(s,p,v),z,aa)};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d('UFIActionHeader.react',['cx','BootloadedComponent.react','FeedbackSourceType','FluxContainer','JSResource','React','UFIActionLinks.react','UFICommercialBreakStore','UFIDispatcherContext.react','UFIPlayLiveVODHighlightsStore','ifRequired'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={inCommercialBreak:false,isPlayingLiveVODHighlights:false},m}k.getStores=function(){return [c('UFICommercialBreakStore'),c('UFIPlayLiveVODHighlightsStore')]};k.calculateState=function(l,m){var n=m.contextArgs.instanceid;return {inCommercialBreak:c('UFICommercialBreakStore').getValueFor(n),isPlayingLiveVODHighlights:c('UFIPlayLiveVODHighlightsStore').getValueFor(n)}};k.prototype.$UFIActionHeader1=function(){var l=c('ifRequired')('UFIVideoPlayerRegistry',function(o){return o.getAvailableVideoPlayerController(this.props.contextArgs.instanceid)}.bind(this)),m=l&&l.getOption('VideoWithInstreamVideo','controller'),n=m&&m.getConfig();return n};k.prototype.$UFIActionHeader2=function(){if(!this.state.inCommercialBreak)return null;var l=this.$UFIActionHeader1();if(l&&l.useNewContextCard)return null;return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('CommercialBreakUFIOverlay.react').__setRef('UFIActionHeader.react'),bootloadPlaceholder:c('React').createElement('div',null),contextArgs:this.props.contextArgs})};k.prototype.$UFIActionHeader3=function(){var l=this.props.contextArgs.source,m=l===c('FeedbackSourceType').COMPACT_SEARCH,n=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.props.dispatcher,stores:this.props.stores},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.props.contextArgs,feedbacktarget:this.props.feedbacktarget,hideActorSelector:m,showCommentOrderingModeSelector:this.props.showCommentOrderingModeSelector}));if(this.state.isPlayingLiveVODHighlights)return c('React').createElement('div',{className:"_f_s"},n);if(!this.state.inCommercialBreak)return n;var o=this.$UFIActionHeader1(),p=o&&o.vodTransitionVersion!==0;if(!p)return null;return c('React').createElement('div',{className:"_4hqd"},n)};k.prototype.render=function(){return c('React').createElement('div',null,this.$UFIActionHeader2(),this.$UFIActionHeader3())};f.exports=c('FluxContainer').create(k,{withProps:true,pure:false})}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1435334373168219",queryID:"1723155404680538"})}),null);
__d('UFICommentLikeSubscription',['BaseGraphQLSubscription','CommentLikeWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+j},_getQueryID:function i(){return c('CommentLikeWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return 'comment_like_subscribe'}});f.exports=h}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1568910389836230",queryID:"1926192390928892"})}),null);
__d('UFICommentSubscription',['BaseGraphQLSubscription','CommentCreateWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+j},_getQueryID:function i(){return c('CommentCreateWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return 'comment_create_subscribe'}});f.exports=h}),null);
__d('UFIFeaturedReplyCommentListImpl',['UFIReplyCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIReplyCommentListImpl'));i=h&&h.prototype;function j(k,l,m,n){i.constructor.call(this,k,l,c('WebCommentViewOption').FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){if(r.id)q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r])}.bind(this))}j.prototype.fetchComments=function(k,l,m){};f.exports=j}),null);
__d('UFIFeaturedToplevelCommentListImpl',['UFIToplevelPagedCommentListImpl','WebCommentViewOption'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentListImpl'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,c('WebCommentViewOption').FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){if(q.id)p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q])}.bind(this))}j.prototype.fetchComments=function(k,l,m){};f.exports=j}),null);
__d('UFIFeedbackFilters',[],(function a(b,c,d,e,f,g){'use strict';var h={getRequestedIDs:function i(j){var k=[];if(j.reactorids)k=k.concat(j.reactorids);if(j.actorforpost)k=k.concat(j.actorforpost);return k}};f.exports=h}),null);
__d('UFIFetcher',['Promise','ShortProfiles'],(function a(b,c,d,e,f,g){'use strict';var h={fetchShortProfiles:function i(j){return new (c('Promise'))(function(k,l){return c('ShortProfiles').getMulti(j,k)})},fetchComments:function i(j,k,l){return new (c('Promise'))(function(m,n){return j.getComments(k.getOffset(),k.getLength(),l,m)}).then(function(m){return Object.values(m)})},fetchCommentsOrThrow:function i(j,k,l){return Object.values(j.getCommentsOrThrow(k,l))}};f.exports=h}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1304193676334207",queryID:"264366153976871"})}),null);
__d('UFILikeSubscription',['BaseGraphQLSubscription','FeedbackLikeWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_like_subscribe/feedback_id_'+j},_getQueryID:function i(){return c('FeedbackLikeWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})}},_getSubscriptionCallName:function i(){return 'feedback_like_subscribe'}});f.exports=h}),null);
__d("UFILiveTipJarSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1392307484123243",queryID:"1851557885085599"})}),null);
__d('UFILiveTipJarSubscription',['BaseGraphQLSubscription','UFILiveTipJarSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/tip_jar_tip_event_subscribe/video_id_'+j},_getQueryID:function i(){return c('UFILiveTipJarSubscriptionWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {data:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})}},_getSubscriptionCallName:function i(){return 'tip_jar_tip_event_subscribe'}});f.exports=h}),null);
__d("PageCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1012208032215317",queryID:"1799303777028448"})}),null);
__d('UFIPageCommentSubscription',['BaseGraphQLSubscription','PageCommentCreateWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/page_comment_create_subscribe/top_level_feedback_id_'+j},_getQueryID:function i(){return c('PageCommentCreateWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})}},_getSubscriptionCallName:function i(){return 'page_comment_create_subscribe'}});f.exports=h}),null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIReactionTypes','UFIStoryActionType','UFIUIEvents','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIStoryActionType').CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming,instanceid:k.contextArgs.instanceid},k.target,k.sphericalYaw,k.sphericalPitch);c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});break;}};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;c('UFIUserActions').addComment(l.ftentidentifier,o,p,{source:m,replyid:l.parentcommentid,attachedphoto:l.body.mentionsphoto,attachedvideo:l.body.mentionsvideo})}function j(l,m){var n=l.body.text,o=l.body.mentionstext;c('UFIUserActions').editComment(l.id,n,o,{source:m,attachedPhoto:l.body.mentionsphoto,attachedSticker:l.attachment,attachedVideo:l.body.mentionsvideo})}var k={retrySubmit:function l(m,n){switch(m.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(m,n);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(m,n);break;default:h.error('retrysubmitstatus',{status:m.status});break;}}};f.exports=k}),null);
__d('FacecastStreamingCommentDelayTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear()}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').BASIC)};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').VITAL)};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.appversion=j;return this};h.prototype.setClientUserID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.client_userid=j;return this};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this};var i={appid:true,appversion:true,client_userid:true,comment_id:true,event:true,protocol:true,vc:true};f.exports=h}),null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','FacecastStreamingCommentDelayTypedLogger','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIComments','UFIConfig','UFIConstants','UFIReactionsUtils','UFISharedDispatcher','UFIStoryAction','UFIStreamingStateType','requireWeak'],(function a(b,c,d,e,f,g,h){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log()}var j={handleLiveLike:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[{actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count}],r=o.reactions_summary;if(r){var s=c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}})}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:q})},handleLiveComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[p]})},handleLiveStreamingComment:function k(l,m,n,o){c('BanzaiODS').bumpEntityKey('feedback','gql_streaming_comment_received');var p=m&&m.comment;if(!p)return;i('comment',n,{comment_id:p.legacy_token});if(o)new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(p.legacy_fbid).setEvent('push').log();var q=this.prepareCommentData(l,p,n,m.client_mutation_id);c('requireWeak')('UFILiveStreamingComments',function(r){r.enqueueSubscribedComment(l,{comments:[q],streamingstate:c('UFIStreamingStateType').LIVE,priority:p.live_streaming_comment_priority},m.feedback.top_level_comments.total_count)})},prepareCommentData:function k(l,m,n,o){var p={__typename:'saved',author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,canshare:m.can_viewer_share,commentshareuri:m.www_share_uri_raw,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("a few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthorbot:m.isauthorbot,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,spamreplycount:0,hasConstituentBadge:m.has_constituent_badge};if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length&&r[0]=='sticker'){var s=q.target;p.attachment={fbid:s.id,metadata:{source_uri:s.img.uri,source_uri_2x:s.img_2x.uri,width:s.img.width,height:s.img.height,frameCount:s.frame_count,frameRate:s.frame_rate,framesPerCol:s.frames_per_column,framesPerRow:s.frames_per_row,sprite_uri:s.sprite_img&&s.sprite_img.uri,sprite_uri_2x:s.sprite_img_2x&&s.sprite_img_2x.uri},type:'sticker'}}else if(r&&r.length&&r[0]=='photo'){var t=q.target;p.attachment={fbid:t.id,metadata:{preview_uri:t.photo_img&&t.photo_img.uri,width:t.photo_img.width,height:t.photo_img.height,url:t.url},type:'photo'}}else if(r&&r.length&&(r[0]=='share'||r[0]=='image_share')){q.type='live_share';p.attachment=q}else if(r&&r.length&&(r[0]=='animated_image_share'||r[0]=='animated_image_autoplay'||r[0]=='animated_image_video'||r[0]=='animated_image_video_autoplay')){q.type='gif';p.attachment=q}else if(r&&r.length&&r[0]=='video_inline'){q.type='video';p.attachment=q}else if(r&&r.length&&r[0]=='comment_place_info'){q.type='live_comment_place_info';p.attachment=q}}var u=m.feedback;if(u.reactions_summary){p.canviewerreact=u.can_viewer_react;p.reactioncount=u.reactors.count;p.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(u.reactions_summary);p.reactioncountreduced=u.reaction_count_reduced?u.reaction_count_reduced:u.reactors.count;p.viewerreaction=u.viewer_feedback_reaction_info?u.viewer_feedback_reaction_info.key:0}return p},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c('UFIComments').setComment(p.id,new (c('ImmutableObject'))(p));c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(l,p.id))}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(l));},handleLiveCommentLike:function k(l,m,n){i('comment_like',n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]})}};f.exports=j}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1237650813017179",queryID:"1235619139887368"})}),null);
__d('UFITypingSubscription',['BaseGraphQLSubscription','FeedbackTypingWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_typing_subscribe/feedback_id_'+j},_getQueryID:function i(){return c('FeedbackTypingWebGraphQLSubscription').getDocID()},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})}},_getSubscriptionCallName:function i(){return 'feedback_typing_subscribe'}});f.exports=h}),null);
__d('UFITypingSubscriptionController',['TimeSlice','UFITypingSubscription','getByPath','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h=15*1000;function i(l){var m=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),n=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0}}function j(l){return l.friendCount===0&&l.otherCount===0}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(l,this.$UFITypingSubscriptionController4.bind(this))}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe()};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c('setTimeout')(c('TimeSlice').guard(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0})}.bind(this),'UFITypingSubscriptionController freshnessTimer',{isContinuation:false}),h);};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null}};f.exports=k}),null);
__d('UFITypingSubscriptionControllerFactory',['UFIConfig','UFISharedDispatcher','UFIStoryAction','UFITypingSubscriptionController','debounce'],(function a(b,c,d,e,f,g){'use strict';var h=500,i={forUFIController:function j(k,l){var m=c('debounce')(function(n){var o=c('UFIConfig').typingIndicator.fromEveryone,p=void 0;if(n.friendCount){p=c('UFIStoryAction').friendTyping(l)}else if(n.otherCount&&o){p=c('UFIStoryAction').someoneTyping(l)}else p=c('UFIStoryAction').typingStopped(l);c('UFISharedDispatcher').dispatch(p)},h);return new (c('UFITypingSubscriptionController'))(k.targetfbid,m)}};f.exports=i}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/videos\/vodcomments\/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}})}),null);
__d('UFIVODStreamingComments',['AsyncRequest','BanzaiODS','Map','SubscriptionsHandler','UFICentralUpdates','UFIConstants','UFIInstanceAction','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','WebCommentViewOption','XVODStreamingCommentsAsyncController','setInterval'],(function a(b,c,d,e,f,g){'use strict';c('BanzaiODS').setEntitySample('feedback',.0001);function h(j,k){this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?'MayPlay':'MayNotPlay';this.pinQueue=[];this.resetToTime(k.getCurrentTimePosition());var l=this.ufiController.getFtEntIdentifier(),m=this.ufiController.getInstanceID(),n=c('UFIToplevelPagedCommentList').getPagedCommentCountForFeedbackTargetID(l);if(typeof n==='number')c('UFIToplevelStreamedCommentList').getCommentList(l,m).updateCommentCount(n);this.subscriptions.addSubscriptions(k.addListener('seekEnd',function(o){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.resetToTime(o.position)}.bind(this)),k.addListener('unmute',function(o){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.$UFIVODCommentStream1()}.bind(this)),k.addListener('updateStatus',function(o,p){var q=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>o.position)break;q=this.pinQueue.shift()}if(q)this.$UFIVODCommentStream2(q);}.bind(this)));c('setInterval')(this.renderNextComment.bind(this),2000);c('BanzaiODS').bumpEntityKey('vod_comments','www_load')}h.prototype.renderNextComment=function(){if(!this.videoPlayerController.isState('playing'))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,k.ufipayload);c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_comment_rendered');break}this.$UFIVODCommentStream1()};h.prototype.fetchNewCommments=function(j,k,l,m){var n=j+60,o=c('XVODStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.ufiController.getFtEntIdentifier()).setString('target_ufi_instance_id',this.ufiController.getInstanceID()).setFloat('start_time',j).setFloat('end_time',n).setBool('should_backfill',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(o).setHandler(function(p){var q=p.getPayload();if(q.status==='error')return;if(q.backfillpayload)c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,q.backfillpayload);l(q.ufipayloads);m(q.pinnedcommentpayloads,q.backfillpinnedcommentpayload);this.queueEndTime=n}.bind(this)).setFinallyHandler(function(){if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didReceiveVODComments(this.ufiController.getContextArgs()));this.currentRequest=null}.bind(this));this.currentRequest.send();if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didRequestVODComments(this.ufiController.getContextArgs()));};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k)}.bind(this),function(k,l){this.pinQueue=this.pinQueue.concat(k)}.bind(this))};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c('UFIToplevelStreamedCommentList').resetCommentList(k,this.ufiController.getInstanceID());c('UFICentralUpdates').didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l}.bind(this),function(l,m){this.pinQueue=l;this.$UFIVODCommentStream2(m)}.bind(this))};h.prototype.stop=function(){this.subscriptions.release()};h.prototype.$UFIVODCommentStream1=function(){var j=c('UFIToplevelStreamedCommentList').getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||this.commentsAutoplayState!=='MayPlay'||!this.videoPlayerController.isState('playing'))return;c('BanzaiODS').bumpEntityKey('vod_comments','www_autoplay');this.commentsAutoplayState='Played';c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.ufiController.getContextArgs(),c('WebCommentViewOption').LIVE_STREAMING));this.ufiController.scrollToTopOfCommentsInViewer()};h.prototype.$UFIVODCommentStream2=function(j){var k=this.ufiController.getContextArgs(),l=c('UFILivePinnedCommentStore').getPinnedCommentID(k.ftentidentifier),m=j.ufipayload;if(!m){if(l!==null)c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(k,j.pineventid));return}var n=m.pinnedcomments[0].id;if(n===l)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,m);c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(k,n,j.pineventid))};var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.getInstanceID();if(i.get(m))return;i.set(m,new h(k,l))},stop:function j(k,l){var m=i.get(l);if(!m)return;m.stop();i['delete'](l)}}}),null);
__d("XCommentEmbedPluginEmbedAsyncDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/plugins\/comment-embed\/async\/embed\/dialog\/",{comment_id:{type:"String",required:true},width:{type:"Int"},__asyncDialog:{type:"Int"}})}),null);
__d('UFIController',['csx','invariant','Promise','Arbiter','AsyncRequest','BootloadedComponent.react','Bootloader','CommentPrelude','DOM','DOMContainer.react','DOMQuery','ErrorUtils','FeedbackPayloadSourceType','JSResource','LivePinnedCommentEventCreateSubscription','LiveTimer','React','ReactDOM','Run','ShortProfiles','StaticUFI.react','SubscriptionsHandler','TranslationTrigger','UFIActionHeader.react','UFIActionLinks.react','UFIAddCommentActionType','UFIAsyncWrapper','UFICallbackStore','UFICentralUpdates','UFICommentActionType','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFIComments','UFICommentSubscription','UFICommentUtils','UFICommentVisibilityStore','UFICommercialBreakAdapter','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIDomRootAdapter','UFIFeaturedReplyCommentListImpl','UFIFeaturedToplevelCommentListImpl','UFIFeedbackFilters','UFIFeedbackMode','UFIFeedbackStore','UFIFeedbackTargets','UFIFetcher','UFIInstanceAction','UFIInstanceActionType','UFILikeSubscription','UFILivePinnedCommentStore','UFILiveTipJarSubscription','UFINewCommentNotifier','UFIOrderingModeStore','UFIPageCommentSubscription','UFIPaging','UFIPlayLiveVODHighlightsAdapter','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFIStoryActionType','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionControllerFactory','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','UFIVisibility','UFIVODStreamingComments','URI','XCommentEmbedPluginEmbedAsyncDialogController','createArrayFromMixed','ex','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy','requireWeak'],(function a(b,c,d,e,f,g,h,i){'use strict';var j={NEWSSTAND:'newsstand'},k=function n(o,p,q,r){var s=o.getRequestedOffset(),t=o.getRequestedLength(),u=s+t===p,v=u&&l(r)?q-s:t;return new (c('UFIRange'))(s,v)},l=function n(o){return o==c('FeedbackPayloadSourceType').USER_ACTION||o==c('FeedbackPayloadSourceType').LIVE_SEND||o==c('FeedbackPayloadSourceType').STREAMING};m.factory=function(n,o,p){if(o.flushEventQueueBeforeRender){if(c('UFIConfig').flushEventQueueBeforeRenderUseIdleCallback&&window.requestIdleCallback){window.requestIdleCallback(function(){return m.$UFIController13(n,o,p)})}else setTimeout(function(){return m.$UFIController13(n,o,p)},c('UFIConfig').flushEventQueueBeforeRenderTimeout);}else m.$UFIController13(n,o,p);};m.$UFIController13=function(n,o,p){o.rootid=n.id;return new m(n,Object.freeze(o),p)};m.prototype.getRootNode=function(){return this.root};m.prototype.getContextArgs=function(){return this.$UFIController2};m.prototype.getFtEntIdentifier=function(){return this.$UFIController2.ftentidentifier};m.prototype.getInstanceID=function(){return this.$UFIController2.instanceid};m.prototype.getFluentContentToken=function(){return this.$UFIController2.fluentContentToken};m.prototype.shouldAutoplayLiveVODComments=function(){return !!this.$UFIController2.autoplayLiveVODComments};function m(n,o,p){var q,r;this.$UFIController6=false;this.$UFIController14();this.$UFIController15();this.root=n;this.$UFIController2=o;this.$UFIController7=null;c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').init(o,p));c('UFIRootRegistry').registerController(o.rootid,o.instanceid,o.ftentidentifier,function(){this.$UFIController16()}.bind(this));this.$UFIController4=new (c('UFIDomRootAdapter'))(this.root,this.$UFIController2);if(c('UFIConfig').feedfocusWrapperModule&&o.location==j.NEWSSTAND){var s=c('UFIConfig').feedfocusWrapperModule,t=c('DOMQuery').scry(this.root,"^._5pat"),u=t[0];if(u)(function(){var ea=c('createArrayFromMixed')(u.children),fa=document.createDocumentFragment();ea.forEach(function(ga){fa.appendChild(ga)});c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(s,{instanceID:o.instanceid},c('React').createElement(c('DOMContainer.react'),null,fa))),u)})();}var v=o.feedbackMode===c('UFIFeedbackMode').NEVER||o.feedbackMode===c('UFIFeedbackMode').NONE;this.$UFIController10={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},allSeenActiveLoadDirectionData:{},requestedInitialComments:false,isHidden:v,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,focusTopLevelComposer:false,featuredCommentLists:{},featuredCommentIDs:[],translateAllCommentID:null,toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:false,shouldTranslateAllVisibleComments:false,commentsLoadingTranslations:{}};this.authorProfiles={};this.commentcounts={};this.comments=[];this.repliesMap={};var w=p.feedbacktarget?p.feedbacktarget:p.feedbacktargets&&p.feedbacktargets[0];if(!this.canRenderHeader())c('Bootloader').loadModules(["UFIActionLinkController"],function(ea){return new ea(n,o,w)},'UFIController');if(w)this.$UFIController17(w,o);var x=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),y=null;if(p.featuredcommentlists&&p.featuredcommentlists.comments&&p.featuredcommentlists.comments[o.ftentidentifier]){y=p.featuredcommentlists.comments[o.ftentidentifier];this.$UFIController10.featuredCommentLists[o.ftentidentifier]=new (c('UFIFeaturedToplevelCommentListImpl'))(o.ftentidentifier,y.values,p.comments)}else{var z=p.commentlists&&p.commentlists.comments,aa=z[o.ftentidentifier];y=aa[x]}if(p.featuredcommentids)this.$UFIController10.featuredCommentIDs=p.featuredcommentids;this.ranges={};this.replyRanges={};this.commentcounts={};this.ranges[x]=new (c('UFIRange'))(y.range.offset,y.range.length);this.$UFIController10.oldRange={offset:y.range.offset,length:this.comments&&this.comments.length||0};var ba=void 0,ca=void 0,da=void 0;if(p.commentlists.replies)for(ba=0;ba<y.values.length;ba++){ca=y.values[ba];da=p.commentlists.replies[ca];if(da){this.commentcounts[ca]=this.getReplyCommentList(ca).getCommentCount();this.replaceReplyRange(ca,new (c('UFIRange'))(da.range.offset,da.range.length))}}if(p.featuredcommentlists)if(p.featuredcommentlists.replies)for(ba=0;ba<y.values.length;ba++){ca=y.values[ba];da=p.featuredcommentlists.replies[ca];if(da){this.$UFIController10.featuredCommentLists[ca]=new (c('UFIFeaturedReplyCommentListImpl'))(o.ftentidentifier,ca,da.values,p.comments);this.commentcounts[ca]=this.getReplyCommentList(ca).getCommentCount();this.replaceReplyRange(ca,c('UFIRange').combine(new (c('UFIRange'))(da.range.offset,da.range.length),this.replyRanges[ca]))}}this.$UFIController8=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(ea,fa){var ga=fa.updates;if(o.ftentidentifier in ga){this.$UFIController10.payloadSource=fa.payloadSource;this.fetchAndUpdate(this.$UFIController10.payloadSource)}}.bind(this))];this.$UFIController18(o);this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController19()}.bind(this));this.getToplevelCommentList();c('UFICentralUpdates').handleUpdate(c('FeedbackPayloadSourceType').INITIAL_SERVER,p);if(o.islivestreaming&&o.fluentContentToken)(function(){var ea=Date.now();c('LivePinnedCommentEventCreateSubscription').subscribe(o.fluentContentToken,function(fa){c('UFISubscriptionUpdates').handleLivePinnedComment(o,fa,Date.now()-ea)})})();if(o.islivestreaming)c('requireWeak')('UFILiveStreamingComments',function(ea){var fa=null;if(p.comments&&p.comments.length>0)fa=p.comments[p.comments.length-1].fbid;ea.start(o.ftentidentifier,w.commentcount,fa,o.showLiveVideoAnnoucements,o.showLiveVideoBroadcastingJoinEvents,o.isViewerTheOwner,o.isLiveAudio,o.liveVideoAnnouncementRenderIntervalMilliSec,o);c('Run').onLeave(function(){return ea.stop(o.ftentidentifier)})});if(o.mayAutoscrollToComments)this.scrollToTopOfCommentsInViewer();if(!o.lazyFetch&&!this.canRenderHeader())this.$UFIController20(w);if(this.$UFIController2.fluentContentToken)c('UFIVideoPlayerRegistry').registerUFIController(this,function(ea){if(o.enableVODStreamingComments&&!this.$UFIController10.featuredCommentLists[o.ftentidentifier])c('UFIVODStreamingComments').start(this,ea);c('UFICommercialBreakAdapter').start(o,ea);c('UFIPlayLiveVODHighlightsAdapter').start(o,ea);if(o.islivestreaming)this.$UFIController12.addSubscriptions(ea.addListener('stateChange',function(){if(ea.isState('playing'))this.render();}.bind(this)));}.bind(this),function(){if(o.enableVODStreamingComments)c('UFIVODStreamingComments').stop(this.$UFIController2.ftentidentifier,o.instanceid);c('UFICommercialBreakAdapter').stop(o.instanceid);c('UFIPlayLiveVODHighlightsAdapter').stop(o.instanceid)}.bind(this));}m.prototype.$UFIController18=function(n){this.$UFIController1=new (c('SubscriptionsHandler'))();this.$UFIController1.addSubscriptions(c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController16()}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController16()}.bind(this)),c('Arbiter').subscribe('ConversationNub/destroy',function(o,p){if(p.root&&c('DOMQuery').contains(p.root,this.root))this.$UFIController16();}.bind(this)),c('Arbiter').subscribe('WorkHub/destroy',function(o,p){if(p.root&&c('DOMQuery').contains(p.root,this.root))this.$UFIController16();}.bind(this)));if(n.viewas)this.$UFIController1.addSubscriptions(c('Arbiter').subscribe('pre_page_transition',function(o,p){if(n.viewas!==new (c('URI'))(p.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(n.ftentidentifier);c('UFIToplevelStreamedCommentList').resetAllCommentLists(n.ftentidentifier)}}));};m.prototype.$UFIController17=function(n,o){this.$UFIController21();var p=Date.now(),q=[];if(n.ll)q.push(c('UFILikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveLike(o.ftentidentifier,s,Date.now()-p)}));if(n.pagelc)q.push(c('UFIPageCommentSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveComment(o.ftentidentifier,s.page_comment_create_subscribe,Date.now()-p)}));if(n.lc)q.push(c('UFICommentSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveComment(o.ftentidentifier,s.comment_create_subscribe,Date.now()-p)}));if(n.lcl)q.push(c('UFICommentLikeSubscription').subscribe(n.targetfbid,function(s){c('UFISubscriptionUpdates').handleLiveCommentLike(o.ftentidentifier,s,Date.now()-p)}));if(n.lti&&c('UFIConfig').typingIndicator.subscribe)q.push(c('UFITypingSubscriptionControllerFactory').forUFIController(n,o));if(n.istipjarenabled)c('requireWeak')('UFILiveStreamingComments',function(s){q.push(c('UFILiveTipJarSubscription').subscribe(n.targetfbid,function(t){s.enqueueSubscribedTipJarEvent(n,t)}))});var r=new (c('SubscriptionsHandler'))();r.addSubscriptions.apply(r,q.filter(function(s){return !!s}));this.$UFIController7=r};m.prototype.$UFIController22=function(){var n=c('UFIFeedbackStore').getState()[this.$UFIController2.ftentidentifier];if(n)this.$UFIController17(n,this.$UFIController2);};m.prototype.scrollToTopOfCommentsInViewer=function(){c('Arbiter').inform(c('UFIUIEvents').AutoplayLiveComments,{form:this.$UFIController4.getParentForm()})};m.prototype.$UFIController23=function(){var n=this.$UFIController4.getHeadRoot();if(n)c('ReactDOM').unmountComponentAtNode(n);if(c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid)){var o=this.$UFIController4.getSnowliftActionRoot();if(o)c('ReactDOM').unmountComponentAtNode(o);}c('ReactDOM').unmountComponentAtNode(this.root)};m.prototype.unitTestOnlySetFeedbackIntoState=function(n){this.$UFIController10.feedback=n};m.prototype.$UFIController14=function(){if(!this.$UFIController12){this.$UFIController3=new (c('UFIDispatcher'))();this.$UFIController11={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController3),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController3)};this.$UFIController12=new (c('SubscriptionsHandler'))();this.$UFIController12.addSubscriptions(this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_LIKE,function(n){c('UFIUserActions').changeCommentLike(n.comment.id,n.like,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').CHANGE_REACTION,function(n){c('UFIUserActions').changeCommentReaction(n.comment.id,n.reactionType,{source:this.$UFIController2.source,instanceid:this.$UFIController2.instanceid},n.target)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').REMOVE,function(n){if(n.comment.candeletewithrule){c('Bootloader').loadModules(["UFICommentRemoveWithRule"],function(o){return o.show(n,this.$UFIController2)}.bind(this),'UFIController');return}else c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(o){return o.show(function(){c('UFIUserActions').removeComment(n.comment.id,{source:this.$UFIController2.source,oneclick:false,target:n.target});n.onConfirm()}.bind(this))}.bind(this),'UFIController');}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').DELETE_COMMENT_AND_REMOVE_COMMENTER,function(n){c('Bootloader').loadModules(["UFICommentDeleteAndMemberRemoveDialog"],function(o){o.showEx(n.comment.author_name,n,{source:this.$UFIController2.source,oneclick:false,target:n.target})}.bind(this),'UFIController')}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').MUTE_MEMBER,function(n){if(!n.comment.ismuted){c('Bootloader').loadModules(["UFIMemberMuteDialog"],function(p){return p.show(function(q,r){c('UFIUserActions').muteMember(n.comment.id,{source:this.$UFIController2.source,oneclick:false,target:n.target},q,r)}.bind(this),n.comment.author_name)}.bind(this),'UFIController')}else{var o;c('Bootloader').loadModules(["GroupsMemberMuteDurationDefaults"],function(p){o=p.UNMUTE},'UFIController');c('UFIUserActions').muteMember(n.comment.id,{source:this.$UFIController2.source,oneclick:false,target:n.target},o,null)}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_TEXT_DELIGHTS,function(n){c('UFIUserActions').toggleTextDelights(n.comment,{source:this.$UFIController2.source,target:n.target},!n.comment.text_delights_are_hidden)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TRANSLATE,function(n){if(!this.$UFIController10.commentsLoadingTranslations[n.comment.id]){this.$UFIController10.commentsLoadingTranslations[n.comment.id]=true;c('UFIUserActions').translateComments(n.comment.ftentidentifier,[n.comment.id],n.trigger,{source:this.$UFIController2.source,target:n.target});if(c('UFICommentUtils').shouldShowTranslateAll(this.comments,this.repliesMap,babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),this.$UFIController10.commentsLoadingTranslations))this.$UFIController10.translateAllCommentID=n.comment.id;this.render()}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_MARK_AS_SPAM,function(n){c('UFIUserActions').setHideAsSpam(n.comment.id,n.is_spam,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_KEEP_SPAM,function(n){c('UFIUserActions').keepSpam(n.comment.id,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_APPEAL_SPAM,function(n){c('UFIUserActions').appealSpam(n.comment.id,n.feedback.actorname,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_SECURE_ACCOUNT,function(n){c('Bootloader').loadModules(["UFICommentSecureAccountDialog"],function(o){return o.show(function(){c('UFIUserActions').secureAccount(n.comment.id,{source:this.$UFIController2.source,target:n.target})}.bind(this),n.feedback.actorname)}.bind(this),'UFIController')}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').CHANGE_ACCEPTED_ANSWER,function(n){c('UFIUserActions').changeAcceptedAnswer(n.comment,n.doAccept)}),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').TOGGLE_INLINE_BAN,function(n){return c('UFIUserActions').banUser(n.comment,n.ownerid,n.is_banned,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').EMBED,function(n){var o=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',n.comment.id).getURI();new (c('AsyncRequest'))(o).send()}),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').MANAGE_CONSTITUENT_BADGE,function(n){c('UFIUserActions').manageConstituentBadge(n.comment)}),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_NEW,function(n){var o=this.$UFIController4.getParentForm();if(o)c('UFINewCommentNotifier').onNewComment(o,this.$UFIController2,n.comment,n.target,n.replyCommentID,n.timestamp);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').PIVOT_SEND_MESSAGE,function(n){var o=this.$UFIController4.getParentForm();if(o)c('UFINewCommentNotifier').onNewCommentPivot(o,this.$UFIController2,n.comment,n.target,n.recipientID,n.timestamp);}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').SUBMIT_EDIT,function(n){var o=n.comment,p=n.commentData,q=n.target;if(!p.visibleValue&&!p.attachedPhoto&&!p.attachedVideo&&!p.attachedSticker&&!p.attachedShareURL){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(r){return r.show(function(){return c('UFIUserActions').removeComment(o.id,{source:this.$UFIController2.source,oneclick:false,target:q})}.bind(this))}.bind(this),'UFIController')}else c('UFIUserActions').editComment(o.id,p.visibleValue,p.encodedValue,{source:this.$UFIController2.source,target:q,attachedPhoto:p.attachedPhoto,attachedVideo:p.attachedVideo,attachedSticker:p.attachedSticker,attachedShareURL:p.attachedShareURL});}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFICommentActionType').REMOVE_PREVIEW,function(n){return c('UFIUserActions').removePreview(n.comment,{source:this.$UFIController2.source,target:n.target})}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIAddCommentActionType').RETRY_SUBMIT,function(n){return c('UFIRetryActions').retrySubmit(n.comment,this.$UFIController2.source)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').PAGE_IN_COMMENTS,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController24(n.commentID,n.direction,n.nextRange);this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').TOGGLE_REPLIES,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;var o=n.commentID,p=this.$UFIController10.repliesExpandedMap[o];if(p){delete this.$UFIController10.isActiveLoading[o];this.$UFIController10.repliesExpandedMap[o]=false;this.render()}else{this.$UFIController10.focusedReplyComposer={replyID:'replycomposer-'+o,initiatorComment:null};this.$UFIController24(o,c('UFIPaging').BOTTOM,this.$UFIController25(o));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION)}}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').SHOW_REPLIES,function(n){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.focusedReplyComposer={replyID:'replycomposer-'+n.commentID,initiatorComment:n.initiatorComment};this.$UFIController24(n.commentID,c('UFIPaging').BOTTOM,this.$UFIController25(n.commentID));this.fetchAndUpdateWithLogs(c('FeedbackPayloadSourceType').USER_ACTION)}.bind(this)),this.$UFIController11.UFICallbackStore.on(c('UFIStoryActionType').COMMENTS_ARRIVED,function(n){this.$UFIController10.payloadSource=n.source;this.$UFIController10.showLoadingUFI=false;this.$UFIController10.isActiveLoading={};this.$UFIController10.commentIDToFocusOnMount=n.source===c('FeedbackPayloadSourceType').USER_ACTION&&!this.$UFIController2.isBroadcasterUFI?this.$UFIController26(n.newOffset,n.newLength):null;this.$UFIController10.oldRange={offset:n.newOffset,length:n.newLength};this.$UFIController27();if(this.$UFIController10.shouldTranslateAllVisibleComments&&!c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))this.$UFIController28();this.render();if(n.source==c('FeedbackPayloadSourceType').ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController2.ftentidentifier,Date.now());}}.bind(this)))}};m.prototype.$UFIController15=function(){this.$UFIController9=[c('UFISharedDispatcher').register(function(n){switch(n.type){case c('UFIInstanceActionType').REMOVE:if(n.instanceID!==this.$UFIController2.instanceid){if(n.ftentidentifier===this.$UFIController2.ftentidentifier)this.$UFIController22();return}c('UFIRootRegistry').cleanupInstance(n.instanceID);break;case c('UFIInstanceActionType').TOGGLE_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').COLLAPSE_ACTION;this.$UFIController10.isHidden=!this.$UFIController10.isHidden;this.render();break;case c('UFIInstanceActionType').CHANGE_ORDER_MODE:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.showLoadingUFI=true;this.render();this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);break;case c('UFIInstanceActionType').REQUESTED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=true;this.render();break;case c('UFIInstanceActionType').RECEIVED_VOD_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.loadingVODComments=false;this.render();break;case c('UFIStoryActionType').LIVE_PIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;var o=c('UFIComments').getComment(n.commentID),p=o?o.author:null;if(p)c('ShortProfiles').get(p,function(q){this.authorProfiles[p]=q;if(!this.$UFIController6)this.render();}.bind(this));break;case c('UFIStoryActionType').LIVE_UNPIN_COMMENT:if(n.ftentidentifier!==this.$UFIController2.ftentidentifier)return;this.render();break;case c('UFIStoryActionType').SHOW_COMMENTS:if(n.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController10.isHidden=false;this.$UFIController10.focusTopLevelComposer=true;c('CommentPrelude').expand(this.root,false,'ufi_controller');if(this.staticUFI)c('CommentPrelude').expand(this.staticUFI,false,'ufi.react');this.render();break;case c('UFIInstanceActionType').TRANSLATE_ALL:if(n.instanceID!==this.$UFIController2.instanceid)return;if(this.$UFIController2.islivestreaming)break;this.$UFIController10.shouldTranslateAllVisibleComments=true;this.$UFIController10.translateAllCommentID=null;this.$UFIController28();this.render();break;}}.bind(this))]};m.prototype.getStores=function(){return this.$UFIController11};m.prototype.$UFIController25=function(n){var o=this.commentcounts[n],p=Math.min(o,this.$UFIController2.pagesize);return new (c('UFIRange'))(o-p,p)};m.prototype.$UFIController24=function(n,o,p){var q=this.$UFIController10,r=q.isActiveLoading,s=q.allSeenActiveLoadDirectionData,t=q.repliesExpandedMap,u=q.toplevelPagerClickCounts,v=q.replyPagerClickCounts,w=this.$UFIController2.ftentidentifier,x=n!==w;r[n]=o;var y=s[n]||{};y[o]=true;s[n]=y;if(x){t[n]=true}else this.$UFIController10.hasPagedToplevel=true;if(n==w){var z=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),aa=u[z]||0;u[z]=aa+1;this.getRange().updateRequestedRange(p.offset,p.length)}else{var ba=v[n]||0;v[n]=ba+1;this.replyRanges[n].updateRequestedRange(p.offset,p.length)}};m.prototype.$UFIController29=function(){this.$UFIController10.payloadSource=c('FeedbackPayloadSourceType').USER_ACTION;this.$UFIController10.showLoadingUFI=true;this.$UFIController10.requestedInitialComments=true;var n=this.getToplevelCommentList().getCommentCount(),o=Math.min(n,this.$UFIController2.numLazyComments||0);c('forEachObject')(this.ranges,function(p){p.updateRequestedRange(n-o,o)});this.fetchAndUpdate(c('FeedbackPayloadSourceType').USER_ACTION);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController2.ftentidentifier,function(p){if(this.canRenderHeader()){this.renderHeader(p)}else this.$UFIController20(p);}.bind(this))};m.prototype.$UFIController20=function(n){if(this.shouldShowCommentOrderingModeSelector(n))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(o){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIController'),contextArgs:this.$UFIController2,feedback:n})),o)}.bind(this));};m.prototype.$UFIController27=function(){if(Object.keys(this.$UFIController10.commentsLoadingTranslations).length==0)return;this.comments.forEach(function(n){if(this.$UFIController10.commentsLoadingTranslations[n.id]&&!!n.translationdata)delete this.$UFIController10.commentsLoadingTranslations[n.id];}.bind(this));Object.keys(this.repliesMap).forEach(function(n){var o=this.repliesMap[n];o.forEach(function(p){if(this.$UFIController10.commentsLoadingTranslations[p.id]&&!!p.translationdata)delete this.$UFIController10.commentsLoadingTranslations[p.id];}.bind(this))}.bind(this))};m.prototype.$UFIController28=function(){var n=this.comments.filter(function(q){return this.$UFIController30(q)}.bind(this)).map(function(q){return q.id}),o=babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),p=[];Object.keys(this.repliesMap).filter(function(q){return o[q]}).forEach(function(q){p=p.concat(this.repliesMap[q])}.bind(this));n=n.concat(p.filter(function(q){return this.$UFIController30(q)}.bind(this)).map(function(q){return q.id}));if(n.length>0){n.forEach(function(q){return this.$UFIController10.commentsLoadingTranslations[q]=true}.bind(this));c('UFIUserActions').translateComments(this.$UFIController2.ftentidentifier,n,c('TranslationTrigger').TRANSLATE_ALL,{source:this.$UFIController2.source})}};m.prototype.$UFIController30=function(n){return n.istranslatable&&!n.translationdata&&!this.$UFIController10.commentsLoadingTranslations[n.id]};m.prototype.canRenderHeader=function(){return !!this.$UFIController4.getHeadRoot()};m.prototype.renderHeader=function(n){if(!this.canRenderHeader())return;var o=!!this.$UFIController2.hasReactions&&(this.$UFIController2.feedbackMode==='none'||this.$UFIController2.feedbackMode==='toggle')&&n.displayreactions&&this.shouldShowCommentOrderingModeSelector(n)&&(!this.$UFIController2.lazyFetch||this.$UFIController10.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('UFIActionHeader.react'),{contextArgs:this.$UFIController2,dispatcher:this.$UFIController3,feedbacktarget:n,showCommentOrderingModeSelector:o,stores:this.$UFIController11})),this.$UFIController4.getHeadRoot());var p=c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid);if(p&&this.$UFIController4.getSnowliftActionRoot())c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.$UFIController2,feedbacktarget:n,showCommentOrderingModeSelector:o,hideActorSelector:true}))),this.$UFIController4.getSnowliftActionRoot());};m.prototype.shouldComponentUpdate=function(){if(this.$UFIController2.islivestreaming&&(this.$UFIController10.payloadSource===c('FeedbackPayloadSourceType').STREAMING||this.$UFIController10.payloadSource===c('FeedbackPayloadSourceType').LIVE_SEND)){var n=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerController(this.$UFIController2.instanceid),o=n?n.isState('playing')&&!n.getOption('WatchAndScroll','isActive'):false,p=c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),this.$UFIController2)===c('UFIVisibility').VISIBLE;return o||p}return true};m.prototype.render=function(){if(!this.shouldComponentUpdate())return;if(this.$UFIController10.showLoadingUFI||c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)&&this.$UFIController10.loadingVODComments){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,this.$UFIController31()),this.root);return}this.$UFIController10.feedback||i(0);var n=this.$UFIController10.feedback,o=n.reactionsentences,p=n.likesentences,q=n.replysocialsentencemaxreplies,r=this.comments.length||!c('isEmpty')((o||p).current),s=this.$UFIController10.payloadSource;if(r&&l(s)&&this.$UFIController2.feedbackMode!==c('UFIFeedbackMode').NEVER){this.$UFIController10.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller')}if(this.$UFIController2.disableCSSHiding&&this.$UFIController10.isHidden){c('ReactDOM').unmountComponentAtNode(this.root);return}if(this.$UFIController2.lazyFetch&&!this.$UFIController10.requestedInitialComments){c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,this.$UFIController31()),this.root);this.$UFIController29();return}var t=this.getRange();if(this.$UFIController8===null)this.$UFIController8=t.getOffset()+t.getLength()-1;var u=q||-1,v={};v[this.$UFIController2.ftentidentifier]=new (c('UFIRange'))(t.offset,t.length).updateRequestedRange(t.requestedOffset,t.requestedLength);for(var w in this.replyRanges)v[w]=new (c('UFIRange'))(this.replyRanges[w].offset,this.replyRanges[w].length).updateRequestedRange(this.replyRanges[w].requestedOffset,this.replyRanges[w].requestedLength);var x=babelHelpers['extends']({},this.$UFIController10.defaultRepliesExpandedMap,this.$UFIController10.repliesExpandedMap),y=!!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier],z=c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)?true:this.getToplevelCommentList().getClientHasAll()&&t.offset===0&&t.length===this.getToplevelCommentList().getCommentCount(),aa=this.$UFIController10.focusTopLevelComposer,ba=this.$UFIController32(s),ca=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid),da=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('StaticUFI.react'),{ref:function(fa){this.staticUFI=fa}.bind(this),feedback:this.$UFIController10.feedback,contextArgs:this.$UFIController2,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController10.deletedCounts,availableComments:this.comments,source:this.$UFIController2.source,payloadSource:s,ranges:v,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController8,replySocialSentenceMaxReplies:u,orderingMode:ca,hideOrderingModeSelector:y,commentPermalinks:this.$UFIController10.commentPermalinks,canAddCommentMap:this.$UFIController10.canAddCommentMap,canReplyMap:this.$UFIController10.canReplyMap,focusTopLevelComposer:aa,focusReply:ba,isActiveLoading:this.$UFIController10.isActiveLoading,allSeenActiveLoadDirectionData:this.$UFIController10.allSeenActiveLoadDirectionData,repliesExpandedMap:x,hasPagedToplevel:this.$UFIController10.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController10.commentIDToFocusOnMount,hideToplevelPager:z,featuredCommentIDs:this.$UFIController10.featuredCommentIDs,loadingTranslationsMap:this.$UFIController10.commentsLoadingTranslations,translateAllCommentID:this.$UFIController10.translateAllCommentID}));c('ReactDOM').render(c('React').createElement(c('UFIAsyncWrapper'),null,da),this.root);c('LiveTimer').updateTimeStamps();var ea=this.$UFIController4.getParentForm();if(ea)c('Arbiter').inform(c('UFIUIEvents').Changed,{form:ea});if(s!=c('FeedbackPayloadSourceType').INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController10.focusedReplyComposer=null;this.$UFIController10.focusTopLevelComposer=false};m.prototype.$UFIController32=function(n){if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER&&this.$UFIController10.feedback&&this.$UFIController10.feedback.permalinkcommentid){return {replyID:'replycomposer-'+this.$UFIController10.feedback.permalinkcommentid}}else if(this.$UFIController10.focusedReplyComposer)return this.$UFIController10.focusedReplyComposer;return null};m.prototype.$UFIController26=function(n,o){var p=this.$UFIController10.oldRange;if(p&&(p.offset!=n||p.length!=o)){var q=n<p.offset?p.length:0;if(q<o)return this.comments[q].id;}return this.$UFIController10.commentIDToFocusOnMount};m.prototype.$UFIController33=function(n,o,p){if(n&&o.id===n.permalinkcommentid)return true;if(p>1)return true;if(p>0&&o.interestingReplyOffset===undefined)return true;var q=n&&o.author===n.viewerid;if(q&&p==1)return true;return false};m.prototype.getNewRange=function(n,o,p){if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)){return new (c('UFIRange'))(0,o.feedcarded?4:50)}else return k(this.getRange(),this.commentcounts[o.ftentidentifier],p,n);};m.prototype.getNewReplyRange=function(n,o,p){var q=o.id;if(this.replyRanges[q]){return k(this.getReplyRange(q),this.commentcounts[q],p,n)}else if(o.interestingReplyOffset!==undefined){return new (c('UFIRange'))(o.interestingReplyOffset,1)}else{var r=this.$UFIController10.feedback&&this.$UFIController10.feedback.isranked,s=r?0:Math.min(p,2);return new (c('UFIRange'))(0,s)}};m.prototype.fetchAndUpdateWithLogs=function(n){n===this.$UFIController10.payloadSource||i(0);this.$UFIController34(n,true)};m.prototype.fetchAndUpdate=function(n){n===this.$UFIController10.payloadSource||i(0);this.$UFIController34(n,false)};m.prototype.$UFIController35=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return {numPagerClicks:n?this.$UFIController10.toplevelPagerClickCounts[o]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext,feedbackSource:this.$UFIController2.source,streamingOrderReversed:this.$UFIController2.streamingCommentOrderReversed}};m.prototype.$UFIController36=function(n,o){return {numPagerClicks:o?this.$UFIController10.replyPagerClickCounts[n]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext}};m.prototype.$UFIController37=function(n){var o=this.$UFIController10.feedback,p=this.getToplevelCommentList(),q=this.getNewRange(n,this.$UFIController2,p.getCommentCount()),r=c('UFIFetcher').fetchCommentsOrThrow(p,q,this.$UFIController35(false));this.$UFIController38(q,r);var s=c('UFICommentFilters').getAuthors(r);r.forEach(function(v){var w=v.id,x=this.getReplyCommentList(w),y=this.getNewReplyRange(n,v,x.getCommentCount()),z=c('UFIFetcher').fetchCommentsOrThrow(x,y,this.$UFIController36(w,false));s.push.apply(s,c('UFICommentFilters').getAuthors(z));this.$UFIController39(y,v,z)}.bind(this));if(o)s.push.apply(s,c('UFIFeedbackFilters').getRequestedIDs(o));var t=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(t)s.push(t);if(o&&o.acceptedanswer){var u=c('UFIComments').getComment(o.acceptedanswer);if(u&&u.author)s.push(u.author);}Object.assign(this.authorProfiles,c('ShortProfiles').getMultiNow(s))};m.prototype.$UFIController34=function(n,o){var p=c('UFIFeedbackTargets').getFeedbackTargetIfExists(this.$UFIController2.ftentidentifier);if(!p){var q=new Error(c('ex')('Feedback target %s not present while rendering UFI with source %s',this.$UFIController2.ftentidentifier,n));q.type='warn';c('ErrorUtils').reportError(q,true);return}this.$UFIController10.feedback=p;if(l(n))this.render();if(this.canRenderHeader())this.renderHeader(p);if(!this.$UFIController10.isHidden)if(n===c('FeedbackPayloadSourceType').INITIAL_SERVER){this.$UFIController37(n);this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n))}else this.fetchAllComments(n,o).done(function(){return this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,n))}.bind(this));};m.prototype.fetchAllComments=function(n,o){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(n,o).then(function(p){var q=c('UFICommentFilters').getAuthors(p);if(!this.$UFIController10.feedback||!this.$UFIController10.feedback.isthreaded||!p.length)return q;return this.fetchAllReplyIDsForComments(p,n,o).then(function(r){return q.concat(r)})}.bind(this)).then(function(p){if(!this.$UFIController10.feedback)return [];return c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController10.feedback).concat(p)}.bind(this))}.bind(this)).then(function(p){var q=this.$UFIController10.feedback,r=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(r)p.push(r);if(q&&q.acceptedanswer){var s=c('UFIComments').getComment(q.acceptedanswer);if(s&&s.author)p.push(s.author);}return c('UFIFetcher').fetchShortProfiles(p)}.bind(this)).then(function(p){Object.assign(this.authorProfiles,p)}.bind(this))};m.prototype.fetchCommentsForFeedbackTarget=function(n,o){var p=this.getToplevelCommentList().getCommentCount(),q=this.getNewRange(n,this.$UFIController2,p);return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),q,this.$UFIController35(o)).then(function(r){this.$UFIController38(q,r);return r}.bind(this))};m.prototype.$UFIController38=function(n,o){var p=this.getToplevelCommentList(),q=this.$UFIController2.ftentidentifier,r=this.$UFIController10,s=r.deletedCounts,t=r.canAddCommentMap,u=r.canReplyMap,v=r.commentPermalinks;this.replaceRange(n);this.comments=o;this.commentcounts[q]=p.getCommentCount();s[q]=p.getDeletedCount();t[q]=!this.$UFIController10.featuredCommentLists[q];o.forEach(function(w){var x=w.id,y=w.cancomment;u[x]=y;v[x]=p.getPermalinkForComment(x)})};m.prototype.fetchRepliesForComment=function(n,o,p){var q=n.id,r=this.getReplyCommentList(q).getCommentCount(),s=this.getNewReplyRange(o,n,r);return c('UFIFetcher').fetchComments(this.getReplyCommentList(q),s,this.$UFIController36(q,p)).then(function(t){this.$UFIController39(s,n,t);return t}.bind(this))};m.prototype.$UFIController39=function(n,o,p){var q=o.id,r=this.getReplyCommentList(q),s=this.$UFIController10,t=s.deletedCounts,u=s.canAddCommentMap,v=s.featuredCommentLists,w=s.defaultRepliesExpandedMap,x=s.feedback,y=s.canReplyMap,z=s.commentPermalinks;this.replaceReplyRange(q,n);this.repliesMap[q]=p;this.commentcounts[q]=r.getCommentCount();t[q]=r.getDeletedCount();u[q]=!v[q];w[q]=this.$UFIController33(x,o,p.length);p.forEach(function(aa){var ba=aa.id,ca=aa.cancomment;y[ba]=ca;z[ba]=r.getPermalinkForComment(ba)})};m.prototype.fetchAllReplyIDsForComments=function(n,o,p){var q=new (c('Promise').all)(n.map(function(r){return this.fetchRepliesForComment(r,o,p).then(function(s){return c('UFICommentFilters').getAuthors(s)})}.bind(this)));return q.then(c('flattenArray'))};m.prototype.getToplevelCommentList=function(){var n=this.$UFIController2;if(this.$UFIController10.featuredCommentLists[n.ftentidentifier])return this.$UFIController10.featuredCommentLists[n.ftentidentifier];if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))return c('UFIToplevelStreamedCommentList').getCommentList(n.ftentidentifier,n.islivestreaming?c('UFIToplevelStreamedCommentList').GLOBAL_ID:n.instanceid);var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIToplevelPagedCommentList').getCommentList(n.ftentidentifier,o)};m.prototype.getReplyCommentList=function(n){if(n in this.$UFIController10.featuredCommentLists)return this.$UFIController10.featuredCommentLists[n];var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);return c('UFIReplyCommentList').getCommentList(this.$UFIController2.ftentidentifier,n,o)};m.prototype.getRange=function(){var n=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);if(!(n in this.ranges)){var o=this.getToplevelCommentList().getCommentCount(),p=Math.min(o,this.$UFIController2.defaultNumCommentsToExpand);this.ranges[n]=new (c('UFIRange'))(o-p,p)}return this.ranges[n]};m.prototype.replaceRange=function(n){var o=c('UFIOrderingModeStore').getOrderingMode(this.$UFIController2.instanceid);this.ranges[o]=n};m.prototype.getReplyRange=function(n){if(!(n in this.replyRanges))this.replyRanges[n]=new (c('UFIRange'))();return this.replyRanges[n]};m.prototype.replaceReplyRange=function(n,o){this.replyRanges[n]=o};m.prototype.$UFIController16=function(){this.$UFIController6=true;this.$UFIController23();this.$UFIController40()};m.prototype.$UFIController40=function(){this.$UFIController41();this.$UFIController42();this.$UFIController21();this.$UFIController43();this.$UFIController44();this.$UFIController45();this.$UFIController46();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').remove(this.$UFIController2))};m.prototype.$UFIController19=function(){this.$UFIController21()};m.prototype.$UFIController46=function(){var n=this.$UFIController2;c('UFIPlayLiveVODHighlightsAdapter').stop(n.instanceid)};m.prototype.$UFIController45=function(){var n=this.$UFIController2;c('UFICommercialBreakAdapter').stop(n.instanceid)};m.prototype.$UFIController44=function(){var n=this.$UFIController2;c('UFIVODStreamingComments').stop(n.ftentidentifier,n.instanceid)};m.prototype.$UFIController41=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(n){return n&&c('UFICentralUpdates').unsubscribe(n)})};m.prototype.$UFIController42=function(){this.$UFIController1&&this.$UFIController1.release()};m.prototype.$UFIController21=function(){this.$UFIController7&&this.$UFIController7.release()};m.prototype.$UFIController43=function(){if(this.$UFIController12){this.$UFIController12.release();this.$UFIController12=null}this.$UFIController9.forEach(function(n){return c('UFISharedDispatcher').unregister(n)})};m.prototype.$UFIController31=function(){var n=this.$UFIController2;return c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController11},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController10.feedback,id:this.$UFIController2.ftentidentifier,contextArgs:n,commentCounts:this.commentcounts,loadingComments:true}))};m.prototype.shouldShowCommentOrderingModeSelector=function(n){var o=this.getToplevelCommentList().getCommentCount()||n.commentcount||0;return n.orderingmodes&&o>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController10.featuredCommentLists[this.$UFIController2.ftentidentifier]};f.exports=m}),18);
__d('UFIMentionsInputProxy.react',['cx','Promise','JSResource','JSResourceReference','React','emptyFunction','setImmediate'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').createClass({displayName:'UFIMentionsInputProxy',_cmdBuffer:[],getInitialState:function j(){return {component:null,viewComponent:null}},componentDidMount:function j(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function j(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function j(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]})},getText:function j(){return this._fillCmdBuffer({fn:'getText',args:[]})},focus:function j(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]})},submitComment:function j(event,k){this._fillCmdBuffer({fn:'submitComment',args:[event,k]})},insertMention:function j(k){this._fillCmdBuffer({fn:'insertMention',args:[k]})},insertEmoticon:function j(k){this._fillCmdBuffer({fn:'insertEmoticon',args:[k]})},insertEmoji:function j(k){this._fillCmdBuffer({fn:'insertEmoji',args:[k]})},_bootload:function j(){c('Promise').all([c('JSResource')('UFIMentionsInput.react').__setRef('UFIMentionsInputProxy.react').load(),new (c('Promise'))(function(k){if(this.props.viewComponent instanceof c('JSResourceReference')){this.props.viewComponent.load().done(k)}else k(this.props.viewComponent);}.bind(this))]).done(function(k){var l=k[0],m=k[1];if(this.isMounted())this.setState({component:l,viewComponent:m});}.bind(this))},_shouldDrainBuffer:function j(){return this._cmdBuffer.length>0},_fillCmdBuffer:function j(k){if(this.refs.mentionsinputchild){return this._execCmd(k)}else this._cmdBuffer=this._cmdBuffer.concat([k]);},_drainFnBuffer:function j(){if(this._shouldDrainBuffer()){var k=this._cmdBuffer[0];this._execCmd(k);this._cmdBuffer=this._cmdBuffer.slice(1);c('setImmediate')(this._drainFnBuffer)}},_execCmd:function j(k){var l=this.refs.mentionsinputchild;return l[k.fn].apply(l,k.args)},_renderProxyInput:function j(){var k="_1osa mentionsHidden";return c('React').createElement('input',{className:k,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus})},_renderDummy:function j(){var k="UFIAddCommentInput _1osb _1osc _2xww";return c('React').createElement('div',{onClick:this.focus,className:"_2xwx",onFocus:this.focus,onMouseOver:this._bootload,role:'presentation'},c('React').createElement('div',{className:k},this._renderProxyInput(),this.props.placeholder))},render:function j(){var k=this.state.component;if(!k)return this._renderDummy();return c('React').createElement(k,babelHelpers['extends']({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props,{viewComponent:this.state.viewComponent}),this.props.children)}});f.exports=i}),null);
__d('LitestandClassicRHC',['Arbiter','BigPipe','DOMQuery','NavigationMessage','Run','SubscriptionsHandler','requireWeak'],(function a(b,c,d,e,f,g){function h(j,k){var l=new (c('SubscriptionsHandler'))(),m=l.release.bind(l),n=c('DOMQuery').scry(j,'.pagelet'),o=n.length;l.addSubscriptions(k.subscribe(n.map(function(p){return p.id+'_displayed'}),function(){if(--o===0){c('Arbiter').inform('LitestandClassicRHC/loaded');m()}}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,m),k.subscribeOnce(c('BigPipe').Events.displayed,function(){c('Arbiter').inform('LitestandClassicRHC/loaded');m()}));c('Run').onLeave(m)}var i={init:function j(k){c('requireWeak')('BigPipe',function(l){var m=l.getCurrentInstance();if(m&&m.arbiter){h(k,m.arbiter)}else c('Arbiter').subscribeOnce('BigPipe/init',function(event,n){h(k,n.arbiter)},c('Arbiter').SUBSCRIBE_NEW);})}};f.exports=i}),18);
__d('MultiBootstrapDataSource',['DataSource'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints}j.prototype.bootstrapWithoutToken=function(){'use strict';for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};f.exports=j}),null);
__d('VideoDisplayTimePlayButton',['CSS','DataStore','Event'],(function a(b,c,d,e,f,g){var h={},i='_spinner',j={getClicked:function k(l){return c('DataStore').get(l,'clicked',false)},register:function k(l,m){var n=l.id;h[n]=c('Event').listen(l,'click',function(){if(m){c('CSS').hide(l);c('CSS').show(m)}c('DataStore').set(l,'clicked',true)});if(m)h[n+i]=c('Event').listen(m,'click',function(){if(m)c('CSS').hide(m);c('CSS').show(l);c('DataStore').set(l,'clicked',false)});},unregister:function k(l){var m=l.id;if(Object.prototype.hasOwnProperty.call(h,m))h[m].remove();var n=m+i;if(Object.prototype.hasOwnProperty.call(h,n))h[n].remove();}};f.exports=j}),null);